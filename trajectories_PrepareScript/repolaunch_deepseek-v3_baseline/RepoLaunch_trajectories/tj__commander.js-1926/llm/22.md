##### LLM INPUT #####
================================ System Message ================================

You are a developer. Your task is to install dependencies and set up a environment that is able to run the tests of the project.

- You start with an initial Docker container based on ubuntu:22.04.
- You interact with a Bash session inside this container.
- Project files are located in /testbed within the container, and your current working directory of bash is already set to /testbed.
- No need to clone the project again.

The final objective is to successfully run the tests of the project.


### JavaScript/Node.js-Specific Instructions:
- Use npm, yarn, or pnpm to install dependencies (check package.json and lockfiles)
- Run `npm install` or `yarn install` to install dependencies
- Check package.json for test scripts and build commands
- Consider using `npm ci` for faster, reproducible builds if package-lock.json exists
- Install global dependencies if needed (e.g., `npm install -g typescript`)


================================ Human Message =================================


You run in a loop of Thought, Action, Observation.
At the end of the loop you should use Action to stop the loop.

Use Thought to describe your thoughts about the question you have been asked.
Use Action to run one of the actions available to you.
Observation will be the result of running those actions.
> Important Note: Each step, reply with only **one** (Thought, Action) pair.
> Important Note: Do not reply **Observation**, it will be provided by the system.

Your available actions are:

    Command: run a command in the bash, reply with following format, your command should not require sudo or interactive input:
        <command>bash command</command>
        e.g. install build-essential: <command>apt-get install -y build-essential</command>
        e.g. view file content: <command>cat README.md</command>
    Search: search the web for if you need some information, generate query and reply with following format:
        <search>the search query</search>
        e.g. <search>how to fix 'No module named setuptools'</search>
        e.g. <search>how to install python3 on ubuntu</search>
        e.g. <search>how to create development environment for python3</search>
    Stop: stop the setup loop once you think the setup is complete, reply with following format:
        <stop></stop>
    

Observation will be the result of running those actions.


Project Structure: the structure of the project, including files and directories.
Related Files: the content of related files of the project that may help you understand the project.
Thought: you should always think about what to do
Action: <command>your bash command here</command> or <search>your search query</search> or other actions available
Observation: the result of the action
... (this Thought/Action/Observation can repeat N times) ...
Thought: I think the setup should be fine
Action: <stop>stop the setup</stop>
Answer: the final result

Begin!
Project Structure: ğŸ“‚ 
/home/hagon/Project/msb/EnvAgent/git/EnvBench/baseline_RepoLaunch/SWE-bench-L
ive/launch/playground/EnvPilot_baseline/tj__commander.js-1926/repo
â”£â”â” ğŸ“‚ .github
â”£â”â” ğŸ“‚ docs
â”£â”â” ğŸ“‚ examples
â”£â”â” ğŸ“‚ lib
â”£â”â” ğŸ“‚ tests
â”£â”â” ğŸ“‚ typings
â”£â”â” ğŸ“„ .editorconfig
â”£â”â” ğŸ“„ .eslintrc.js
â”£â”â” ğŸ“„ CHANGELOG.md
â”£â”â” ğŸ“„ CONTRIBUTING.md
â”£â”â” ğŸ“„ esm.mjs
â”£â”â” ğŸ“„ index.js
â”£â”â” ğŸ“„ LICENSE
â”£â”â” ğŸ“„ package-lock.json
â”£â”â” ğŸ“„ package-support.json
â”£â”â” ğŸ“„ package.json
â”£â”â” ğŸ“„ Readme.md
â”£â”â” ğŸ“„ Readme_zh-CN.md
â”£â”â” ğŸ“„ SECURITY.md
â”—â”â” ğŸ“„ tsconfig.json

Related Files: ------ BEGIN RELATED FILES ------
File: Readme_zh-CN.md
```
# Commander.js

[![Build Status](https://github.com/tj/commander.js/workflows/build/badge.svg)](https://github.com/tj/commander.js/actions?query=workflow%3A%22build%22)
[![NPM Version](http://img.shields.io/npm/v/commander.svg?style=flat)](https://www.npmjs.org/package/commander)
[![NPM Downloads](https://img.shields.io/npm/dm/commander.svg?style=flat)](https://npmcharts.com/compare/commander?minimal=true)
[![Install Size](https://packagephobia.now.sh/badge?p=commander)](https://packagephobia.now.sh/result?p=commander)

å®Œæ•´çš„ [node.js](http://nodejs.org) å‘½ä»¤è¡Œè§£å†³æ–¹æ¡ˆã€‚

ä½¿ç”¨å…¶ä»–è¯­è¨€é˜…è¯»ï¼š[English](./Readme.md) | ç®€ä½“ä¸­æ–‡

- [Commander.js](#commanderjs)
  - [å®‰è£…](#%e5%ae%89%e8%a3%85)
  - [å¿«é€Ÿå¼€å§‹](#%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B)
  - [å£°æ˜ program å˜é‡](#%e5%a3%b0%e6%98%8e-program-%e5%8f%98%e9%87%8f)
  - [é€‰é¡¹](#%e9%80%89%e9%a1%b9)
    - [å¸¸ç”¨é€‰é¡¹ç±»å‹ï¼Œboolean å‹é€‰é¡¹å’Œå¸¦å‚æ•°çš„é€‰é¡¹](#%e5%b8%b8%e7%94%a8%e9%80%89%e9%a1%b9%e7%b1%bb%e5%9e%8bboolean-%e5%9e%8b%e9%80%89%e9%a1%b9%e5%92%8c%e5%b8%a6%e5%8f%82%e6%95%b0%e9%80%89%e9%a1%b9)
    - [é€‰é¡¹çš„é»˜è®¤å€¼](#%E9%80%89%E9%A1%B9%E7%9A%84%E9%BB%98%E8%AE%A4%E5%80%BC)
    - [å…¶ä»–çš„é€‰é¡¹ç±»å‹ï¼Œå–åé€‰é¡¹ï¼Œä»¥åŠå¯é€‰å‚æ•°çš„é€‰é¡¹](#%E5%85%B6%E4%BB%96%E7%9A%84%E9%80%89%E9%A1%B9%E7%B1%BB%E5%9E%8B%EF%BC%8C%E5%8F%96%E5%8F%8D%E9%80%89%E9%A1%B9%EF%BC%8C%E4%BB%A5%E5%8F%8A%E5%8F%AF%E9%80%89%E5%8F%82%E6%95%B0%E7%9A%84%E9%80%89%E9%A1%B9)
    - [å¿…å¡«é€‰é¡¹](#%e5%bf%85%e5%a1%ab%e9%80%89%e9%a1%b9)
    - [å˜é•¿å‚æ•°é€‰é¡¹](#%e5%8f%98%e9%95%bf%e5%8f%82%e6%95%b0%e9%80%89%e9%a1%b9)
    - [ç‰ˆæœ¬é€‰é¡¹](#%e7%89%88%e6%9c%ac%e9%80%89%e9%a1%b9)
    - [å…¶ä»–é€‰é¡¹é…ç½®](#%E5%85%B6%E4%BB%96%E9%80%89%E9%A1%B9%E9%85%8D%E7%BD%AE)
    - [è‡ªå®šä¹‰é€‰é¡¹å¤„ç†](#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%80%89%E9%A1%B9%E5%A4%84%E7%90%86)
  - [å‘½ä»¤](#%e5%91%bd%e4%bb%a4)
    - [å‘½ä»¤å‚æ•°](#%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0)
      - [å…¶ä»–å‚æ•°é…ç½®](#%E5%85%B6%E4%BB%96%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE)
      - [è‡ªå®šä¹‰å‚æ•°å¤„ç†](#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%82%E6%95%B0%E5%A4%84%E7%90%86)
    - [å¤„ç†å‡½æ•°](#%E5%A4%84%E7%90%86%E5%87%BD%E6%95%B0)
    - [ç‹¬ç«‹çš„å¯æ‰§è¡Œï¼ˆå­ï¼‰å‘½ä»¤](#%E7%8B%AC%E7%AB%8B%E7%9A%84%E5%8F%AF%E6%89%A7%E8%A1%8C%EF%BC%88%E5%AD%90%EF%BC%89%E5%91%BD%E4%BB%A4)
    - [ç”Ÿå‘½å‘¨æœŸé’©å­](#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90)
  - [è‡ªåŠ¨åŒ–å¸®åŠ©ä¿¡æ¯](#%e8%87%aa%e5%8a%a8%e5%8c%96%e5%b8%ae%e5%8a%a9%e4%bf%a1%e6%81%af)
    - [è‡ªå®šä¹‰å¸®åŠ©](#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%b8%ae%e5%8a%a9)
    - [åœ¨å‡ºé”™åå±•ç¤ºå¸®åŠ©ä¿¡æ¯](#%E5%9C%A8%E5%87%BA%E9%94%99%E5%90%8E%E5%B1%95%E7%A4%BA%E5%B8%AE%E5%8A%A9%E4%BF%A1%E6%81%AF)
    - [ä½¿ç”¨ä»£ç å±•ç¤ºå¸®åŠ©ä¿¡æ¯](#%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%A0%81%E5%B1%95%E7%A4%BA%E5%B8%AE%E5%8A%A9%E4%BF%A1%E6%81%AF)
    - [.name](#name)
    - [.usage](#usage)
    - [.description å’Œ .summary](#description-%E5%92%8C-summary)
    - [.helpOption(flags, description)](#helpoptionflags-description)
    - [.addHelpCommand()](#addhelpcommand)
    - [å…¶ä»–å¸®åŠ©é…ç½®](#%E5%85%B6%E4%BB%96%E5%B8%AE%E5%8A%A9%E9%85%8D%E7%BD%AE)
  - [è‡ªå®šä¹‰äº‹ä»¶ç›‘å¬](#%e8%87%aa%e5%ae%9a%e4%b9%89%e4%ba%8b%e4%bb%b6%e7%9b%91%e5%90%ac)
  - [é›¶ç¢çŸ¥è¯†](#%e9%9b%b6%e7%a2%8e%e7%9f%a5%e8%af%86)
    - [.parse() å’Œ .parseAsync()](#parse-%e5%92%8c-parseasync)
    - [è§£æé…ç½®](#%E8%A7%A3%E6%9E%90%E9%85%8D%E7%BD%AE)
    - [ä½œä¸ºå±æ€§çš„é—ç•™é€‰é¡¹](#%E4%BD%9C%E4%B8%BA%E5%B1%9E%E6%80%A7%E7%9A%84%E9%81%97%E7%95%99%E9%80%89%E9%A1%B9)
    - [TypeScript](#typescript)
    - [createCommand()](#createCommand)
    - [Node é€‰é¡¹ï¼Œå¦‚ --harmony](#node-%E9%80%89%E9%A1%B9%EF%BC%8C%E5%A6%82---harmony)
    - [è°ƒè¯•å­å‘½ä»¤](#%e8%b0%83%e8%af%95%e5%ad%90%e5%91%bd%e4%bb%a4)
    - [æ˜¾ç¤ºé”™è¯¯](#%E6%98%BE%E7%A4%BA%E9%94%99%E8%AF%AF)
    - [é‡å†™é€€å‡ºå’Œè¾“å‡º](#%E9%87%8D%E5%86%99%E9%80%80%E5%87%BA%E5%92%8C%E8%BE%93%E5%87%BA)
    - [å…¶ä»–æ–‡æ¡£](#%E5%85%B6%E4%BB%96%E6%96%87%E6%A1%A3)
  - [æ”¯æŒ](#%e6%94%af%e6%8c%81)
    - [ä¼ä¸šä½¿ç”¨ Commander](#%e4%bc%81%e4%b8%9a%e4%bd%bf%e7%94%a8-commander)

å…³äºæœ¬æ–‡æ¡£ä¸­ä½¿ç”¨çš„æœ¯è¯­ï¼Œè¯·è§[æœ¯è¯­è¡¨](./docs/zh-CN/%E6%9C%AF%E8%AF%AD%E8%A1%A8.md)

## å®‰è£…

```sh
npm install commander
```

## å¿«é€Ÿå¼€å§‹

ç¼–å†™ä»£ç æ¥æè¿°ä½ çš„å‘½ä»¤è¡Œç•Œé¢ã€‚
Commander è´Ÿè´£å°†å‚æ•°è§£æä¸ºé€‰é¡¹å’Œå‘½ä»¤å‚æ•°ï¼Œä¸ºé—®é¢˜æ˜¾ç¤ºä½¿ç”¨é”™è¯¯ï¼Œå¹¶å®ç°ä¸€ä¸ªæœ‰å¸®åŠ©çš„ç³»ç»Ÿã€‚

Commander æ˜¯ä¸¥æ ¼çš„ï¼Œå¹¶ä¸”ä¼šé’ˆå¯¹æ— æ³•è¯†åˆ«çš„é€‰é¡¹æ˜¾ç¤ºé”™è¯¯ã€‚
ä¸¤ç§æœ€å¸¸ç”¨çš„é€‰é¡¹ç±»å‹æ˜¯å¸ƒå°”é€‰é¡¹ï¼Œå’Œä»å‚æ•°ä¸­è·å–å€¼çš„é€‰é¡¹ã€‚

ç¤ºä¾‹ä»£ç ï¼š[split.js](./examples/split.js)

```js
const { program } = require('commander');

program
  .option('--first')
  .option('-s, --separator <char>');

program.parse();

const options = program.opts();
const limit = options.first ? 1 : undefined;
console.log(program.args[0].split(options.separator, limit));
```

```console
$ node split.js -s / --fits a/b/c
error: unknown option '--fits'
(Did you mean --first?)
$ node split.js -s / --first a/b/c
[ 'a' ]
```

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨å­å‘½ä»¤å¹¶å¸¦æœ‰å¸®åŠ©æè¿°çš„æ›´å®Œæ•´çš„ç¨‹åºã€‚åœ¨å¤šå‘½ä»¤ç¨‹åºä¸­ï¼Œæ¯ä¸ªå‘½ä»¤ï¼ˆæˆ–å‘½ä»¤çš„ç‹¬ç«‹å¯æ‰§è¡Œæ–‡ä»¶ï¼‰éƒ½æœ‰ä¸€ä¸ªæ“ä½œå¤„ç†ç¨‹åºã€‚

ç¤ºä¾‹ä»£ç ï¼š[string-util.js](./examples/string-util.js)

```js
const { Command } = require('commander');
const program = new Command();

program
  .name('string-util')
  .description('CLI to some JavaScript string utilities')
  .version('0.8.0');

program.command('split')
  .description('Split a string into substrings and display as an array')
  .argument('<string>', 'string to split')
  .option('--first', 'display just the first substring')
  .option('-s, --separator <char>', 'separator character', ',')
  .action((str, options) => {
    const limit = options.first ? 1 : undefined;
    console.log(str.split(options.separator, limit));
  });

program.parse();
```

```console
$ node string-util.js help split
Usage: string-util split [options] <string>

Split a string into substrings and display as an array.

Arguments:
  string                  string to split

Options:
  --first                 display just the first substring
  -s, --separator <char>  separator character (default: ",")
  -h, --help              display help for command

$ node string-util.js split --separator=/ a/b/c
[ 'a', 'b', 'c' ]
```

æ›´å¤šç¤ºä¾‹å¯ä»¥åœ¨ [examples](https://github.com/tj/commander.js/tree/master/examples) ç›®å½•ä¸­æ‰¾åˆ°ã€‚

## å£°æ˜ program å˜é‡

ä¸ºç®€åŒ–ä½¿ç”¨ï¼ŒCommander æä¾›äº†ä¸€ä¸ªå…¨å±€å¯¹è±¡ã€‚æœ¬æ–‡æ¡£çš„ç¤ºä¾‹ä»£ç å‡æŒ‰æ­¤æ–¹æ³•ä½¿ç”¨ï¼š

```js
// CommonJS (.cjs)
const { program } = require('commander');
```

å¦‚æœç¨‹åºè¾ƒä¸ºå¤æ‚ï¼Œç”¨æˆ·éœ€è¦ä»¥å¤šç§æ–¹å¼æ¥ä½¿ç”¨ Commanderï¼Œå¦‚å•å…ƒæµ‹è¯•ç­‰ã€‚åˆ›å»ºæœ¬åœ° Command å¯¹è±¡æ˜¯ä¸€ç§æ›´å¥½çš„æ–¹å¼ï¼š

```js
// CommonJS (.cjs)
const { Command } = require('commander');
const program = new Command();
```

```js
// ECMAScript (.mjs)
import { Command } from 'commander';
const program = new Command();
```

```ts
// TypeScript (.ts)
import { Command } from 'commander';
const program = new Command();
```

## é€‰é¡¹

Commander ä½¿ç”¨`.option()`æ–¹æ³•æ¥å®šä¹‰é€‰é¡¹ï¼ŒåŒæ—¶å¯ä»¥é™„åŠ é€‰é¡¹çš„ç®€ä»‹ã€‚æ¯ä¸ªé€‰é¡¹å¯ä»¥å®šä¹‰ä¸€ä¸ªçŸ­é€‰é¡¹åç§°ï¼ˆ-åé¢æ¥å•ä¸ªå­—ç¬¦ï¼‰å’Œä¸€ä¸ªé•¿é€‰é¡¹åç§°ï¼ˆ--åé¢æ¥ä¸€ä¸ªæˆ–å¤šä¸ªå•è¯ï¼‰ï¼Œä½¿ç”¨é€—å·ã€ç©ºæ ¼æˆ–`|`åˆ†éš”ã€‚

è§£æåçš„é€‰é¡¹å¯ä»¥é€šè¿‡`Command`å¯¹è±¡ä¸Šçš„`.opts()`æ–¹æ³•è·å–ï¼ŒåŒæ—¶ä¼šè¢«ä¼ é€’ç»™å‘½ä»¤å¤„ç†å‡½æ•°ã€‚

å¯¹äºå¤šä¸ªå•è¯çš„é•¿é€‰é¡¹ï¼Œé€‰é¡¹åä¼šè½¬ä¸ºé©¼å³°å‘½åæ³•ï¼ˆcamel-caseï¼‰ï¼Œä¾‹å¦‚`--template-engine`é€‰é¡¹å¯é€šè¿‡`program.opts().templateEngine`è·å–ã€‚

é€‰é¡¹åŠå…¶é€‰é¡¹å‚æ•°å¯ä»¥ç”¨ç©ºæ ¼åˆ†éš”ï¼Œä¹Ÿå¯ä»¥ç»„åˆæˆåŒä¸€ä¸ªå‚æ•°ã€‚é€‰é¡¹å‚æ•°å¯ä»¥ç›´æ¥è·Ÿåœ¨çŸ­é€‰é¡¹ä¹‹åï¼Œä¹Ÿå¯ä»¥åœ¨é•¿é€‰é¡¹åé¢åŠ ä¸Š `=`ã€‚

```sh
serve -p 80
serve -p80
serve --port 80
serve --port=80
```

`--`å¯ä»¥æ ‡è®°é€‰é¡¹çš„ç»“æŸï¼Œåç»­çš„å‚æ•°å‡ä¸ä¼šè¢«å‘½ä»¤è§£é‡Šï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œé€‰é¡¹åœ¨å‘½ä»¤è¡Œä¸­çš„é¡ºåºä¸å›ºå®šï¼Œä¸€ä¸ªé€‰é¡¹å¯ä»¥åœ¨å…¶ä»–å‚æ•°ä¹‹å‰æˆ–ä¹‹åæŒ‡å®šã€‚

å½“`.opts()`ä¸å¤Ÿç”¨æ—¶ï¼Œè¿˜æœ‰å…¶ä»–ç›¸å…³æ–¹æ³•ï¼š

- `.optsWithGlobals()`è¿”å›åˆå¹¶çš„æœ¬åœ°å’Œå…¨å±€é€‰é¡¹å€¼
- `.getOptionValue()`å’Œ`.setOptionValue()`æ“ä½œå•ä¸ªé€‰é¡¹çš„å€¼
- `.getOptionValueSource()`å’Œ`.setOptionValueWithSource()`åŒ…æ‹¬é€‰é¡¹å€¼çš„æ¥æº

### å¸¸ç”¨é€‰é¡¹ç±»å‹ï¼Œboolean å‹é€‰é¡¹å’Œå¸¦å‚æ•°é€‰é¡¹

æœ‰ä¸¤ç§æœ€å¸¸ç”¨çš„é€‰é¡¹ï¼Œä¸€ç±»æ˜¯ boolean å‹é€‰é¡¹ï¼Œé€‰é¡¹æ— éœ€é…ç½®å‚æ•°ï¼Œå¦ä¸€ç±»é€‰é¡¹åˆ™å¯ä»¥è®¾ç½®å‚æ•°ï¼ˆä½¿ç”¨å°–æ‹¬å·å£°æ˜åœ¨è¯¥é€‰é¡¹åï¼Œå¦‚`--expect <value>`ï¼‰ã€‚å¦‚æœåœ¨å‘½ä»¤è¡Œä¸­ä¸æŒ‡å®šå…·ä½“çš„é€‰é¡¹åŠå‚æ•°ï¼Œåˆ™ä¼šè¢«å®šä¹‰ä¸º`undefined`ã€‚

ç¤ºä¾‹ä»£ç ï¼š[options-common.js](./examples/options-common.js)

```js
program
  .option('-d, --debug', 'output extra debugging')
  .option('-s, --small', 'small pizza size')
  .option('-p, --pizza-type <type>', 'flavour of pizza');

program.parse(process.argv);

const options = program.opts();
if (options.debug) console.log(options);
console.log('pizza details:');
if (options.small) console.log('- small pizza size');
if (options.pizzaType) console.log(`- ${options.pizzaType}`);
```

```console
$ pizza-options -p
error: option '-p, --pizza-type <type>' argument missing
$ pizza-options -d -s -p vegetarian
{ debug: true, small: true, pizzaType: 'vegetarian' }
pizza details:
- small pizza size
- vegetarian
$ pizza-options --pizza-type=cheese
pizza details:
- cheese
```

å¤šä¸ªå¸ƒå°”çŸ­é€‰é¡¹å¯ä»¥åœ¨ç ´æŠ˜å·ä¹‹åç»„åˆåœ¨ä¸€èµ·ï¼Œå¹¶ä¸”å¯ä»¥è·Ÿä¸€ä¸ªå–å€¼çš„å•ä¸€é€‰é¡¹ã€‚
ä¾‹å¦‚ `-d -s -p cheese` å¯ä»¥å†™æˆ `-ds -p cheese` ç”šè‡³ `-dsp cheese`ã€‚

å…·æœ‰é¢„æœŸé€‰é¡¹å‚æ•°çš„é€‰é¡¹æ˜¯è´ªå©ªçš„ï¼Œå¹¶ä¸”æ— è®ºå€¼å¦‚ä½•ï¼Œéƒ½ä¼šæ¶ˆè€—å‚æ•°ã€‚
æ‰€ä»¥ `--id -xyz` è¯»å– `-xyz` ä½œä¸ºé€‰é¡¹å‚æ•°ã€‚

é€šè¿‡`program.parse(arguments)`æ–¹æ³•å¤„ç†å‚æ•°ï¼Œæ²¡æœ‰è¢«ä½¿ç”¨çš„é€‰é¡¹ä¼šå­˜æ”¾åœ¨`program.args`æ•°ç»„ä¸­ã€‚è¯¥æ–¹æ³•çš„å‚æ•°æ˜¯å¯é€‰çš„ï¼Œé»˜è®¤å€¼ä¸º`process.argv`ã€‚

### é€‰é¡¹çš„é»˜è®¤å€¼

é€‰é¡¹å¯ä»¥è®¾ç½®ä¸€ä¸ªé»˜è®¤å€¼ã€‚

ç¤ºä¾‹ä»£ç ï¼š[options-defaults.js](./examples/options-defaults.js)

```js
program
  .option('-c, --cheese <type>', 'add the specified type of cheese', 'blue');

program.parse();

console.log(`cheese: ${program.opts().cheese}`);
```

```console
$ pizza-options
cheese: blue
$ pizza-options --cheese stilton
cheese: stilton
```

### å…¶ä»–çš„é€‰é¡¹ç±»å‹ï¼Œå–åé€‰é¡¹ï¼Œä»¥åŠå¯é€‰å‚æ•°çš„é€‰é¡¹

å¯ä»¥å®šä¹‰ä¸€ä¸ªä»¥`no-`å¼€å¤´çš„ boolean å‹é•¿é€‰é¡¹ã€‚åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨è¯¥é€‰é¡¹æ—¶ï¼Œä¼šå°†å¯¹åº”é€‰é¡¹çš„å€¼ç½®ä¸º`false`ã€‚å½“åªå®šä¹‰äº†å¸¦`no-`çš„é€‰é¡¹ï¼Œæœªå®šä¹‰å¯¹åº”ä¸å¸¦`no-`çš„é€‰é¡¹æ—¶ï¼Œè¯¥é€‰é¡¹çš„é»˜è®¤å€¼ä¼šè¢«ç½®ä¸º`true`ã€‚

å¦‚æœå·²ç»å®šä¹‰äº†`--foo`ï¼Œé‚£ä¹ˆå†å®šä¹‰`--no-foo`å¹¶ä¸ä¼šæ”¹å˜å®ƒæœ¬æ¥çš„é»˜è®¤å€¼ã€‚

ç¤ºä¾‹ä»£ç ï¼š[options-negatable.js](./examples/options-negatable.js)

```js
program
  .option('--no-sauce', 'Remove sauce')
  .option('--cheese <flavour>', 'cheese flavour', 'mozzarella')
  .option('--no-cheese', 'plain with no cheese')
  .parse();

const options = program.opts();
const sauceStr = options.sauce ? 'sauce' : 'no sauce';
const cheeseStr = (options.cheese === false) ? 'no cheese' : `${options.cheese} cheese`;
console.log(`You ordered a pizza with ${sauceStr} and ${cheeseStr}`);
```

```console
$ pizza-options
You ordered a pizza with sauce and mozzarella cheese
$ pizza-options --sauce
error: unknown option '--sauce'
$ pizza-options --cheese=blue
You ordered a pizza with sauce and blue cheese
$ pizza-options --no-sauce --no-cheese
You ordered a pizza with no sauce and no cheese
```

é€‰é¡¹çš„å‚æ•°ä½¿ç”¨æ–¹æ‹¬å·å£°æ˜è¡¨ç¤ºå‚æ•°æ˜¯å¯é€‰å‚æ•°ï¼ˆå¦‚`--optional [value]`ï¼‰ã€‚è¯¥é€‰é¡¹åœ¨ä¸å¸¦å‚æ•°æ—¶å¯ç”¨ä½œ boolean é€‰é¡¹ï¼Œåœ¨å¸¦æœ‰å‚æ•°æ—¶åˆ™ä»å‚æ•°ä¸­å¾—åˆ°å€¼ã€‚

ç¤ºä¾‹ä»£ç ï¼š[options-boolean-or-value.js](./examples/options-boolean-or-value.js)

```js
program
  .option('-c, --cheese [type]', 'Add cheese with optional type');

program.parse(process.argv);

const options = program.opts();
if (options.cheese === undefined) console.log('no cheese');
else if (options.cheese === true) console.log('add cheese');
else console.log(`add cheese type ${options.cheese}`);
```

```console
$ pizza-options
no cheese
$ pizza-options --cheese
add cheese
$ pizza-options --cheese mozzarella
add cheese type mozzarella
```

å¸¦æœ‰å¯é€‰é€‰é¡¹å‚æ•°çš„é€‰é¡¹ä¸æ˜¯è´ªå©ªçš„ï¼Œå¹¶ä¸”ä¼šå¿½ç•¥ä»¥ç ´æŠ˜å·å¼€å¤´çš„å‚æ•°ã€‚å› æ­¤å¯¹äº`--id -5`ï¼Œ`id`è¡¨ç°ä¸ºå¸ƒå°”é€‰é¡¹ï¼Œä½†å¦‚æœéœ€è¦ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ç»„åˆå½¢å¼ï¼Œä¾‹å¦‚ `--id=-5`ã€‚

å…³äºå¯èƒ½æœ‰æ­§ä¹‰çš„ç”¨ä¾‹ï¼Œè¯·è§[å¯å˜å‚æ•°çš„é€‰é¡¹](./docs/zh-CN/%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E7%9A%84%E9%80%89%E9%A1%B9.md)ã€‚

### å¿…å¡«é€‰é¡¹

é€šè¿‡`.requiredOption()`æ–¹æ³•å¯ä»¥è®¾ç½®é€‰é¡¹ä¸ºå¿…å¡«ã€‚å¿…å¡«é€‰é¡¹è¦ä¹ˆè®¾æœ‰é»˜è®¤å€¼ï¼Œè¦ä¹ˆå¿…é¡»åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼Œå¯¹åº”çš„å±æ€§å­—æ®µåœ¨è§£ææ—¶å¿…å®šä¼šæœ‰èµ‹å€¼ã€‚è¯¥æ–¹æ³•å…¶ä½™å‚æ•°ä¸`.option()`ä¸€è‡´ã€‚

ç¤ºä¾‹ä»£ç ï¼š[options-required.js](./examples/options-required.js)

```js
program
  .requiredOption('-c, --cheese <type>', 'pizza must have cheese');

program.parse();
```

```console
$ pizza
error: required option '-c, --cheese <type>' not specified
```

### å˜é•¿å‚æ•°é€‰é¡¹

å®šä¹‰é€‰é¡¹æ—¶ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨`...`æ¥è®¾ç½®å‚æ•°ä¸ºå¯å˜é•¿å‚æ•°ã€‚åœ¨å‘½ä»¤è¡Œä¸­ï¼Œç”¨æˆ·å¯ä»¥è¾“å…¥å¤šä¸ªå‚æ•°ï¼Œè§£æåä¼šä»¥æ•°ç»„å½¢å¼å­˜å‚¨åœ¨å¯¹åº”å±æ€§å­—æ®µä¸­ã€‚åœ¨è¾“å…¥ä¸‹ä¸€ä¸ªé€‰é¡¹å‰ï¼ˆ`-`æˆ–`--`å¼€å¤´ï¼‰ï¼Œç”¨æˆ·è¾“å…¥çš„æŒ‡ä»¤å‡ä¼šè¢«è§†ä½œå˜é•¿å‚æ•°ã€‚ä¸æ™®é€šå‚æ•°ä¸€æ ·çš„æ˜¯ï¼Œå¯ä»¥é€šè¿‡`--`æ ‡è®°å½“å‰å‘½ä»¤çš„ç»“æŸã€‚

ç¤ºä¾‹ä»£ç ï¼š[options-variadic.js](./examples/options-variadic.js)

```js
program
  .option('-n, --number <numbers...>', 'specify numbers')
  .option('-l, --letter [letters...]', 'specify letters');

program.parse();

console.log('Options: ', program.opts());
console.log('Remaining arguments: ', program.args);
```

```console
$ collect -n 1 2 3 --letter a b c
Options:  { number: [ '1', '2', '3' ], letter: [ 'a', 'b', 'c' ] }
Remaining arguments:  []
$ collect --letter=A -n80 operand
Options:  { number: [ '80' ], letter: [ 'A' ] }
Remaining arguments:  [ 'operand' ]
$ collect --letter -n 1 -n 2 3 -- operand
Options:  { number: [ '1', '2', '3' ], letter: true }
Remaining arguments:  [ 'operand' ]
```

å…³äºå¯èƒ½æœ‰æ­§ä¹‰çš„ç”¨ä¾‹ï¼Œè¯·è§[å¯å˜å‚æ•°çš„é€‰é¡¹](./docs/zh-CN/%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E7%9A%84%E9%80%89%E9%A1%B9.md)ã€‚

### ç‰ˆæœ¬é€‰é¡¹

`.version()`æ–¹æ³•å¯ä»¥è®¾ç½®ç‰ˆæœ¬ï¼Œå…¶é»˜è®¤é€‰é¡¹ä¸º`-V`å’Œ`--version`ï¼Œè®¾ç½®äº†ç‰ˆæœ¬åï¼Œå‘½ä»¤è¡Œä¼šè¾“å‡ºå½“å‰çš„ç‰ˆæœ¬å·ã€‚

```js
program.version('0.0.1');
```

```console
$ ./examples/pizza -V
0.0.1
```

ç‰ˆæœ¬é€‰é¡¹ä¹Ÿæ”¯æŒè‡ªå®šä¹‰è®¾ç½®é€‰é¡¹åç§°ï¼Œå¯ä»¥åœ¨`.version()`æ–¹æ³•é‡Œå†ä¼ é€’ä¸€äº›å‚æ•°ï¼ˆé•¿é€‰é¡¹åç§°ã€æè¿°ä¿¡æ¯ï¼‰ï¼Œç”¨æ³•ä¸`.option()`æ–¹æ³•ç±»ä¼¼ã€‚

```bash
program.version('0.0.1', '-v, --vers', 'output the current version');
```

### å…¶ä»–é€‰é¡¹é…ç½®

å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œé€‰é¡¹å‡å¯é€šè¿‡`.option()`æ–¹æ³•æ·»åŠ ã€‚ä½†å¯¹æŸäº›ä¸å¸¸è§çš„ç”¨ä¾‹ï¼Œä¹Ÿå¯ä»¥ç›´æ¥æ„é€ `Option`å¯¹è±¡ï¼Œå¯¹é€‰é¡¹è¿›è¡Œæ›´è¯¦å°½çš„é…ç½®ã€‚

ç¤ºä¾‹ä»£ç ï¼š[options-extra.js](./examples/options-extra.js), [options-env.js](./examples/options-env.js), [options-conflicts.js](./examples/options-conflicts.js), [options-implies.js](./examples/options-implies.js)

```js
program
  .addOption(new Option('-s, --secret').hideHelp())
  .addOption(new Option('-t, --timeout <delay>', 'timeout in seconds').default(60, 'one minute'))
  .addOption(new Option('-d, --drink <size>', 'drink size').choices(['small', 'medium', 'large']))
  .addOption(new Option('-p, --port <number>', 'port number').env('PORT'))
  .addOption(new Option('--donate [amount]', 'optional donation in dollars').preset('20').argParser(parseFloat))
  .addOption(new Option('--disable-server', 'disables the server').conflicts('port'))
  .addOption(new Option('--free-drink', 'small drink included free ').implies({ drink: 'small' }));
```

```console
$ extra --help
Usage: help [options]

Options:
  -t, --timeout <delay>  timeout in seconds (default: one minute)
  -d, --drink <size>     drink cup size (choices: "small", "medium", "large")
  -p, --port <number>    port number (env: PORT)
  --donate [amount]      optional donation in dollars (preset: "20")
  --disable-server       disables the server
  --free-drink           small drink included free
  -h, --help             display help for command

$ extra --drink huge
error: option '-d, --drink <size>' argument 'huge' is invalid. Allowed choices are small, medium, large.

$ PORT=80 extra --donate --free-drink
Options:  { timeout: 60, donate: 20, port: '80', freeDrink: true, drink: 'small' }

$ extra --disable-server --port 8000
error: option '--disable-server' cannot be used with option '-p, --port <number>'
```

### è‡ªå®šä¹‰é€‰é¡¹å¤„ç†

é€‰é¡¹çš„å‚æ•°å¯ä»¥é€šè¿‡è‡ªå®šä¹‰å‡½æ•°æ¥å¤„ç†ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œå³ç”¨æˆ·æ–°è¾“å…¥çš„å‚æ•°å€¼å’Œå½“å‰å·²æœ‰çš„å‚æ•°å€¼ï¼ˆå³ä¸Šä¸€æ¬¡è°ƒç”¨è‡ªå®šä¹‰å¤„ç†å‡½æ•°åçš„è¿”å›å€¼ï¼‰ï¼Œè¿”å›æ–°çš„é€‰é¡¹å‚æ•°å€¼ã€‚

è‡ªå®šä¹‰å‡½æ•°é€‚ç”¨åœºæ™¯åŒ…æ‹¬å‚æ•°ç±»å‹è½¬æ¢ï¼Œå‚æ•°æš‚å­˜ï¼Œæˆ–è€…å…¶ä»–è‡ªå®šä¹‰å¤„ç†çš„åœºæ™¯ã€‚

å¯ä»¥åœ¨è‡ªå®šä¹‰å‡½æ•°çš„åé¢è®¾ç½®é€‰é¡¹å‚æ•°çš„é»˜è®¤å€¼æˆ–åˆå§‹å€¼ï¼ˆä¾‹å¦‚å‚æ•°ç”¨åˆ—è¡¨æš‚å­˜æ—¶éœ€è¦è®¾ç½®ä¸€ä¸ªåˆå§‹ç©ºåˆ—è¡¨)ã€‚

ç¤ºä¾‹ä»£ç ï¼š[options-custom-processing.js](./examples/options-custom-processing.js)

```js
function myParseInt(value, dummyPrevious) {
  // parseInt å‚æ•°ä¸ºå­—ç¬¦ä¸²å’Œè¿›åˆ¶æ•°
  const parsedValue = parseInt(value, 10);
  if (isNaN(parsedValue)) {
    throw new commander.InvalidArgumentError('Not a number.');
  }
  return parsedValue;
}

function increaseVerbosity(dummyValue, previous) {
  return previous + 1;
}

function collect(value, previous) {
  return previous.concat([value]);
}

function commaSeparatedList(value, dummyPrevious) {
  return value.split(',');
}

program
  .option('-f, --float <number>', 'float argument', parseFloat)
  .option('-i, --integer <number>', 'integer argument', myParseInt)
  .option('-v, --verbose', 'verbosity that can be increased', increaseVerbosity, 0)
  .option('-c, --collect <value>', 'repeatable value', collect, [])
  .option('-l, --list <items>', 'comma separated list', commaSeparatedList)
;

program.parse();

const options = program.opts();
if (options.float !== undefined) console.log(`float: ${options.float}`);
if (options.integer !== undefined) console.log(`integer: ${options.integer}`);
if (options.verbose > 0) console.log(`verbosity: ${options.verbose}`);
if (options.collect.length > 0) console.log(options.collect);
if (options.list !== undefined) console.log(options.list);
```

```console
$ custom -f 1e2
float: 100
$ custom --integer 2
integer: 2
$ custom -v -v -v
verbose: 3
$ custom -c a -c b -c c
[ 'a', 'b', 'c' ]
$ custom --list x,y,z
[ 'x', 'y', 'z' ]
```

## å‘½ä»¤

é€šè¿‡`.command()`æˆ–`.addCommand()`å¯ä»¥é…ç½®å‘½ä»¤ï¼Œæœ‰ä¸¤ç§å®ç°æ–¹å¼ï¼šä¸ºå‘½ä»¤ç»‘å®šå¤„ç†å‡½æ•°ï¼Œæˆ–è€…å°†å‘½ä»¤å•ç‹¬å†™æˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆè¯¦è¿°è§åæ–‡ï¼‰ã€‚å­å‘½ä»¤æ”¯æŒåµŒå¥—ï¼ˆ[ç¤ºä¾‹ä»£ç ](./examples/nestedCommands.js)ï¼‰ã€‚

`.command()`çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå‘½ä»¤åç§°ã€‚å‘½ä»¤å‚æ•°å¯ä»¥è·Ÿåœ¨åç§°åé¢ï¼Œä¹Ÿå¯ä»¥ç”¨`.argument()`å•ç‹¬æŒ‡å®šã€‚å‚æ•°å¯ä¸ºå¿…é€‰çš„ï¼ˆå°–æ‹¬å·è¡¨ç¤ºï¼‰ã€å¯é€‰çš„ï¼ˆæ–¹æ‹¬å·è¡¨ç¤ºï¼‰æˆ–å˜é•¿å‚æ•°ï¼ˆç‚¹å·è¡¨ç¤ºï¼Œå¦‚æœä½¿ç”¨ï¼Œåªèƒ½æ˜¯æœ€åä¸€ä¸ªå‚æ•°ï¼‰ã€‚

ä½¿ç”¨`.addCommand()`å‘`program`å¢åŠ é…ç½®å¥½çš„å­å‘½ä»¤ã€‚

ä¾‹å¦‚:

```js
// é€šè¿‡ç»‘å®šå¤„ç†å‡½æ•°å®ç°å‘½ä»¤ï¼ˆè¿™é‡Œçš„æŒ‡ä»¤æè¿°ä¸ºæ”¾åœ¨`.command`ä¸­ï¼‰
// è¿”å›æ–°ç”Ÿæˆçš„å‘½ä»¤ï¼ˆå³è¯¥å­å‘½ä»¤ï¼‰ä»¥ä¾›ç»§ç»­é…ç½®
program
  .command('clone <source> [destination]')
  .description('clone a repository into a newly created directory')
  .action((source, destination) => {
    console.log('clone command called');
  });

// é€šè¿‡ç‹¬ç«‹çš„çš„å¯æ‰§è¡Œæ–‡ä»¶å®ç°å‘½ä»¤ (æ³¨æ„è¿™é‡ŒæŒ‡ä»¤æè¿°æ˜¯ä½œä¸º`.command`çš„ç¬¬äºŒä¸ªå‚æ•°)
// è¿”å›æœ€é¡¶å±‚çš„å‘½ä»¤ä»¥ä¾›ç»§ç»­æ·»åŠ å­å‘½ä»¤
program
  .command('start <service>', 'start named service')
  .command('stop [service]', 'stop named service, or all if no name supplied');

// åˆ†åˆ«è£…é…å‘½ä»¤
// è¿”å›æœ€é¡¶å±‚çš„å‘½ä»¤ä»¥ä¾›ç»§ç»­æ·»åŠ å­å‘½ä»¤
program
  .addCommand(build.makeBuildCommand());
```

ä½¿ç”¨`.command()`å’Œ`addCommand()`æ¥æŒ‡å®šé€‰é¡¹çš„ç›¸å…³è®¾ç½®ã€‚å½“è®¾ç½®`hidden: true`æ—¶ï¼Œè¯¥å‘½ä»¤ä¸ä¼šæ‰“å°åœ¨å¸®åŠ©ä¿¡æ¯é‡Œã€‚å½“è®¾ç½®`isDefault: true`æ—¶ï¼Œè‹¥æ²¡æœ‰æŒ‡å®šå…¶ä»–å­å‘½ä»¤ï¼Œåˆ™ä¼šé»˜è®¤æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼ˆ[æ ·ä¾‹](./examples/defaultCommand.js)ï¼‰ã€‚

### å‘½ä»¤å‚æ•°

å¦‚ä¸Šæ‰€è¿°ï¼Œå­å‘½ä»¤çš„å‚æ•°å¯ä»¥é€šè¿‡`.command()`æŒ‡å®šã€‚å¯¹äºæœ‰ç‹¬ç«‹å¯æ‰§è¡Œæ–‡ä»¶çš„å­å‘½ä»¤æ¥è¯´ï¼Œå‚æ•°åªèƒ½ä»¥è¿™ç§æ–¹æ³•æŒ‡å®šã€‚è€Œå¯¹å…¶ä»–å­å‘½ä»¤ï¼Œå‚æ•°ä¹Ÿå¯ç”¨ä»¥ä¸‹æ–¹æ³•ã€‚

åœ¨`Command`å¯¹è±¡ä¸Šä½¿ç”¨`.argument()`æ¥æŒ‰æ¬¡åºæŒ‡å®šå‘½ä»¤å‚æ•°ã€‚è¯¥æ–¹æ³•æ¥å—å‚æ•°åç§°å’Œå‚æ•°æè¿°ã€‚å‚æ•°å¯ä¸ºå¿…é€‰çš„ï¼ˆå°–æ‹¬å·è¡¨ç¤ºï¼Œä¾‹å¦‚`<required>`ï¼‰æˆ–å¯é€‰çš„ï¼ˆæ–¹æ‹¬å·è¡¨ç¤ºï¼Œä¾‹å¦‚`[optional]`ï¼‰ã€‚

ç¤ºä¾‹ä»£ç ï¼š[argument.js](./examples/argument.js)

```js
program
  .version('0.1.0')
  .argument('<username>', 'user to login')
  .argument('[password]', 'password for user, if required', 'no password given')
  .action((username, password) => {
    console.log('username:', username);
    console.log('password:', password);
  });
```

åœ¨å‚æ•°åååŠ ä¸Š`...`æ¥å£°æ˜å¯å˜å‚æ•°ï¼Œä¸”åªæœ‰æœ€åä¸€ä¸ªå‚æ•°æ”¯æŒè¿™ç§ç”¨æ³•ã€‚å¯å˜å‚æ•°ä¼šä»¥æ•°ç»„çš„å½¢å¼ä¼ é€’ç»™å¤„ç†å‡½æ•°ã€‚ä¾‹å¦‚ï¼š

```js
program
  .version('0.1.0')
  .command('rmdir')
  .argument('<dirs...>')
  .action(function (dirs) {
    dirs.forEach((dir) => {
      console.log('rmdir %s', dir);
    });
  });
```

æœ‰ä¸€ç§ä¾¿æ·æ–¹å¼å¯ä»¥ä¸€æ¬¡æ€§æŒ‡å®šå¤šä¸ªå‚æ•°ï¼Œä½†ä¸åŒ…å«å‚æ•°æè¿°ï¼š

```js
program
  .arguments('<username> <password>');
```

#### å…¶ä»–å‚æ•°é…ç½®

æœ‰å°‘æ•°é™„åŠ åŠŸèƒ½å¯ä»¥ç›´æ¥æ„é€ `Argument`å¯¹è±¡ï¼Œå¯¹å‚æ•°è¿›è¡Œæ›´è¯¦å°½çš„é…ç½®ã€‚

ç¤ºä¾‹ä»£ç ï¼š[arguments-extra.js](./examples/arguments-extra.js)

```js
program
  .addArgument(new commander.Argument('<drink-size>', 'drink cup size').choices(['small', 'medium', 'large']))
  .addArgument(new commander.Argument('[timeout]', 'timeout in seconds').default(60, 'one minute'))
```

#### è‡ªå®šä¹‰å‚æ•°å¤„ç†

é€‰é¡¹çš„å‚æ•°å¯ä»¥é€šè¿‡è‡ªå®šä¹‰å‡½æ•°æ¥å¤„ç†ï¼ˆä¸å¤„ç†é€‰é¡¹å‚æ•°æ—¶ç±»ä¼¼ï¼‰ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šç”¨æˆ·æ–°è¾“å…¥çš„å‚æ•°å€¼å’Œå½“å‰å·²æœ‰çš„å‚æ•°å€¼ï¼ˆå³ä¸Šä¸€æ¬¡è°ƒç”¨è‡ªå®šä¹‰å¤„ç†å‡½æ•°åçš„è¿”å›å€¼ï¼‰ï¼Œè¿”å›æ–°çš„å‘½ä»¤å‚æ•°å€¼ã€‚

å¤„ç†åçš„å‚æ•°å€¼ä¼šä¼ é€’ç»™å‘½ä»¤å¤„ç†å‡½æ•°ï¼ŒåŒæ—¶å¯é€šè¿‡`.processedArgs`è·å–ã€‚

å¯ä»¥åœ¨è‡ªå®šä¹‰å‡½æ•°çš„åé¢è®¾ç½®å‘½ä»¤å‚æ•°çš„é»˜è®¤å€¼æˆ–åˆå§‹å€¼ã€‚

ç¤ºä¾‹ä»£ç ï¼š[arguments-custom-processing.js](./examples/arguments-custom-processing.js)

```js
program
  .command('add')
  .argument('<first>', 'integer argument', myParseInt)
  .argument('[second]', 'integer argument', myParseInt, 1000)
  .action((first, second) => {
    console.log(`${first} + ${second} = ${first + second}`);
  })
;
```

### å¤„ç†å‡½æ•°

å‘½ä»¤å¤„ç†å‡½æ•°çš„å‚æ•°ï¼Œä¸ºè¯¥å‘½ä»¤å£°æ˜çš„æ‰€æœ‰å‚æ•°ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜ä¼šé™„åŠ ä¸¤ä¸ªé¢å¤–å‚æ•°ï¼šä¸€ä¸ªæ˜¯è§£æå‡ºçš„é€‰é¡¹ï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯è¯¥å‘½ä»¤å¯¹è±¡è‡ªèº«ã€‚

ç¤ºä¾‹ä»£ç ï¼š[thank.js](./examples/thank.js)

```js
program
  .argument('<name>')
  .option('-t, --title <honorific>', 'title to use before name')
  .option('-d, --debug', 'display some debugging')
  .action((name, options, command) => {
    if (options.debug) {
      console.error('Called %s with options %o', command.name(), options);
    }
    const title = options.title ? `${options.title} ` : '';
    console.log(`Thank-you ${title}${name}`);
  });
```

å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥è·³è¿‡ä¸ºå¤„ç†å‡½æ•°å£°æ˜å‚æ•°ç›´æ¥ä½¿ç”¨ commandã€‚ `this` å…³é”®å­—è®¾ç½®ä¸ºè¿è¡Œå‘½ä»¤ï¼Œå¯ä»¥åœ¨å‡½æ•°è¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼ˆä½†ä¸èƒ½ä»ç®­å¤´å‡½æ•°ä¸­ä½¿ç”¨ï¼‰ã€‚

ç¤ºä¾‹ä»£ç ï¼š[action-this.js](./examples/action-this.js)

```js
program
  .command('serve')
  .argument('<script>')
  .option('-p, --port <number>', 'port number', 80)
  .action(function() {
    console.error('Run script %s on port %s', this.args[0], this.opts().port);
  });
```

å¤„ç†å‡½æ•°æ”¯æŒ`async`ï¼Œç›¸åº”çš„ï¼Œéœ€è¦ä½¿ç”¨`.parseAsync`ä»£æ›¿`.parse`ã€‚

```js
async function run() { /* åœ¨è¿™é‡Œç¼–å†™ä»£ç  */ }

async function main() {
  program
    .command('run')
    .action(run);
  await program.parseAsync(process.argv);
}
```

ä½¿ç”¨å‘½ä»¤æ—¶ï¼Œæ‰€ç»™çš„é€‰é¡¹å’Œå‘½ä»¤å‚æ•°ä¼šè¢«éªŒè¯æ˜¯å¦æœ‰æ•ˆã€‚å‡¡æ˜¯æœ‰æœªçŸ¥çš„é€‰é¡¹ï¼Œæˆ–ç¼ºå°‘æ‰€éœ€çš„å‘½ä»¤å‚æ•°ï¼Œéƒ½ä¼šæŠ¥é”™ã€‚
å¦‚è¦å…è®¸ä½¿ç”¨æœªçŸ¥çš„é€‰é¡¹ï¼Œå¯ä»¥è°ƒç”¨`.allowUnknownOption()`ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼ å…¥è¿‡å¤šçš„å‚æ•°å¹¶ä¸æŠ¥é”™ï¼Œä½†ä¹Ÿå¯ä»¥é€šè¿‡è°ƒç”¨`.allowExcessArguments(false)`æ¥å¯ç”¨è¿‡å¤šå‚æ•°çš„æŠ¥é”™ã€‚

### ç‹¬ç«‹çš„å¯æ‰§è¡Œï¼ˆå­ï¼‰å‘½ä»¤

å½“`.command()`å¸¦æœ‰æè¿°å‚æ•°æ—¶ï¼Œå°±æ„å‘³ç€ä½¿ç”¨ç‹¬ç«‹çš„å¯æ‰§è¡Œæ–‡ä»¶ä½œä¸ºå­å‘½ä»¤ã€‚
Commander ä¼šå°è¯•åœ¨å…¥å£è„šæœ¬çš„ç›®å½•ä¸­æœç´¢åç§°ç»„åˆä¸º `command-subcommand` çš„æ–‡ä»¶ï¼Œå¦‚ä»¥ä¸‹ç¤ºä¾‹ä¸­çš„ `pm-install` æˆ– `pm-search`ã€‚æœç´¢åŒ…æ‹¬å°è¯•å¸¸è§çš„æ–‡ä»¶æ‰©å±•åï¼Œå¦‚`.js`ã€‚
ä½ å¯ä»¥ä½¿ç”¨ `executableFile` é…ç½®é€‰é¡¹æŒ‡å®šè‡ªå®šä¹‰åç§°ï¼ˆå’Œè·¯å¾„ï¼‰ã€‚
ä½ å¯ä»¥ä½¿ç”¨ `.executableDir()` ä¸ºå­å‘½ä»¤æŒ‡å®šè‡ªå®šä¹‰æœç´¢ç›®å½•ã€‚

ä½ å¯ä»¥åœ¨å¯æ‰§è¡Œæ–‡ä»¶é‡Œå¤„ç†ï¼ˆå­ï¼‰å‘½ä»¤çš„é€‰é¡¹ï¼Œè€Œä¸å¿…åœ¨é¡¶å±‚å£°æ˜å®ƒä»¬ã€‚

ç¤ºä¾‹ä»£ç ï¼š[pm](./examples/pm)

```js
program
  .name('pm')
  .version('0.1.0')
  .command('install [name]', 'install one or more packages')
  .command('search [query]', 'search with optional query')
  .command('update', 'update installed packages', { executableFile: 'myUpdateSubCommand' })
  .command('list', 'list packages installed', { isDefault: true });

program.parse(process.argv);
```

å¦‚æœè¯¥å‘½ä»¤éœ€è¦æ”¯æŒå…¨å±€å®‰è£…ï¼Œè¯·ç¡®ä¿æœ‰å¯¹åº”çš„æƒé™ï¼Œä¾‹å¦‚`755`ã€‚

### ç”Ÿå‘½å‘¨æœŸé’©å­

å¯ä»¥åœ¨å‘½ä»¤çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ä¸Šè®¾ç½®å›è°ƒå‡½æ•°ã€‚

ç¤ºä¾‹ä»£ç ï¼š[hook.js](./examples/hook.js)

```js
program
  .option('-t, --trace', 'display trace statements for commands')
  .hook('preAction', (thisCommand, actionCommand) => {
    if (thisCommand.opts().trace) {
      console.log(`About to call action handler for subcommand: ${actionCommand.name()}`);
      console.log('arguments: %O', actionCommand.args);
      console.log('options: %o', actionCommand.opts());
    }
  });
```

é’©å­å‡½æ•°æ”¯æŒ`async`ï¼Œç›¸åº”çš„ï¼Œéœ€è¦ä½¿ç”¨`.parseAsync`ä»£æ›¿`.parse`ã€‚ä¸€ä¸ªäº‹ä»¶ä¸Šå¯ä»¥æ·»åŠ å¤šä¸ªé’©å­ã€‚

æ”¯æŒçš„äº‹ä»¶æœ‰ï¼š

| äº‹ä»¶åç§° | è§¦å‘æ—¶æœº | å‚æ•°åˆ—è¡¨ |
| :-- | :-- | :-- |
| `preAction`, `postAction` | æœ¬å‘½ä»¤æˆ–å…¶å­å‘½ä»¤çš„å¤„ç†å‡½æ•°æ‰§è¡Œå‰/å |   `(thisCommand, actionCommand)` |
| `preSubcommand` | åœ¨å…¶ç›´æ¥å­å‘½ä»¤è§£æä¹‹å‰è°ƒç”¨  | `(thisCommand, subcommand)` |

## è‡ªåŠ¨åŒ–å¸®åŠ©ä¿¡æ¯

å¸®åŠ©ä¿¡æ¯æ˜¯ Commander åŸºäºä½ çš„ç¨‹åºè‡ªåŠ¨ç”Ÿæˆçš„ï¼Œé»˜è®¤çš„å¸®åŠ©é€‰é¡¹æ˜¯`-h,--help`ã€‚

ç¤ºä¾‹ä»£ç ï¼š[pizza](./examples/pizza)

```console
$ node ./examples/pizza --help
Usage: pizza [options]

An application for pizza ordering

Options:
  -p, --peppers        Add peppers
  -c, --cheese <type>  Add the specified type of cheese (default: "marble")
  -C, --no-cheese      You do not want any cheese
  -h, --help           display help for command
```

å¦‚æœä½ çš„å‘½ä»¤ä¸­åŒ…å«äº†å­å‘½ä»¤ï¼Œä¼šé»˜è®¤æ·»åŠ `help`å‘½ä»¤ï¼Œå®ƒå¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä¸å­å‘½ä»¤ä¸€èµ·ä½¿ç”¨æ¥æç¤ºæ›´å¤šå¸®åŠ©ä¿¡æ¯ã€‚ç”¨æ³•ä¸`shell`ç¨‹åºç±»ä¼¼ï¼š

```sh
shell help
shell --help

shell help spawn
shell spawn --help
```

### è‡ªå®šä¹‰å¸®åŠ©

å¯ä»¥æ·»åŠ é¢å¤–çš„å¸®åŠ©ä¿¡æ¯ï¼Œä¸å†…å»ºçš„å¸®åŠ©ä¸€åŒå±•ç¤ºã€‚

ç¤ºä¾‹ä»£ç ï¼š[custom-help](./examples/custom-help)

```js
program
  .option('-f, --foo', 'enable some foo');

program.addHelpText('after', `

Example call:
  $ custom-help --help`);
```

å°†ä¼šè¾“å‡ºä»¥ä¸‹çš„å¸®åŠ©ä¿¡æ¯ï¼š

```Text
Usage: custom-help [options]

Options:
  -f, --foo   enable some foo
  -h, --help  display help for command

Example call:
  $ custom-help --help
```

ä½ç½®å‚æ•°å¯¹åº”çš„å±•ç¤ºæ–¹å¼å¦‚ä¸‹ï¼š

- `beforeAll`ï¼šä½œä¸ºå…¨å±€æ ‡å¤´æ å±•ç¤º
- `before`ï¼šåœ¨å†…å»ºå¸®åŠ©ä¿¡æ¯ä¹‹å‰å±•ç¤º
- `after`ï¼šåœ¨å†…å»ºå¸®åŠ©ä¿¡æ¯ä¹‹åå±•ç¤º
- `afterAll`ï¼šä½œä¸ºå…¨å±€æœ«å°¾æ å±•ç¤º

`beforeAll`å’Œ`afterAll`ä¸¤ä¸ªå‚æ•°ä½œç”¨äºå‘½ä»¤åŠå…¶æ‰€æœ‰çš„å­å‘½ä»¤ã€‚

ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè¿”å›å­—ç¬¦ä¸²çš„å‡½æ•°ã€‚å¯¹åè€…è€Œè¨€ï¼Œä¸ºä¾¿äºä½¿ç”¨ï¼Œè¯¥å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œå®ƒæœ‰å¦‚ä¸‹å±æ€§ï¼š

- `error`ï¼šboolean å€¼ï¼Œä»£è¡¨è¯¥å¸®åŠ©ä¿¡æ¯æ˜¯å¦ç”±äºä¸å½“ä½¿ç”¨è€Œå±•ç¤º
- `command`ï¼šä»£è¡¨å±•ç¤ºè¯¥å¸®åŠ©ä¿¡æ¯çš„`Command`å¯¹è±¡

### åœ¨å‡ºé”™åå±•ç¤ºå¸®åŠ©ä¿¡æ¯

é»˜è®¤æƒ…å†µä¸‹ï¼Œå‡ºç°å‘½ä»¤ç”¨æ³•é”™è¯¯æ—¶åªä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ã€‚å¯ä»¥é€‰æ‹©åœ¨å‡ºé”™åå±•ç¤ºå®Œæ•´çš„å¸®åŠ©æˆ–è‡ªå®šä¹‰çš„å¸®åŠ©ä¿¡æ¯ã€‚

```js
program.showHelpAfterError();
// æˆ–è€…
program.showHelpAfterError('(add --help for additional information)');
```

```console
$ pizza --unknown
error: unknown option '--unknown'
(add --help for additional information)
```

é»˜è®¤è¡Œä¸ºæ˜¯åœ¨å‡ºç°æœªçŸ¥å‘½ä»¤æˆ–é€‰é¡¹é”™è¯¯åå»ºè®®æ­£ç¡®æ‹¼å†™ã€‚ä½ å¯ä»¥ç¦ç”¨æ­¤åŠŸèƒ½ã€‚

```js
program.showSuggestionAfterError(false);
```

```console
$ pizza --hepl
error: unknown option '--hepl'
(Did you mean --help?)
```

### ä½¿ç”¨ä»£ç å±•ç¤ºå¸®åŠ©ä¿¡æ¯

`.help()`ï¼šå±•ç¤ºå¸®åŠ©ä¿¡æ¯å¹¶é€€å‡ºã€‚å¯ä»¥é€šè¿‡ä¼ å…¥`{ error: true }`æ¥è®©å¸®åŠ©ä¿¡æ¯ä» stderr è¾“å‡ºï¼Œå¹¶ä»¥ä»£è¡¨é”™è¯¯çš„çŠ¶æ€ç é€€å‡ºç¨‹åºã€‚

`.outputHelp()`ï¼šåªå±•ç¤ºå¸®åŠ©ä¿¡æ¯ï¼Œä¸é€€å‡ºç¨‹åºã€‚ä¼ å…¥`{ error: true }`å¯ä»¥è®©å¸®åŠ©ä¿¡æ¯ä» stderr è¾“å‡ºã€‚

`.helpInformation()`ï¼šå¾—åˆ°å­—ç¬¦ä¸²å½¢å¼çš„å†…å»ºçš„å¸®åŠ©ä¿¡æ¯ï¼Œä»¥ä¾¿ç”¨äºè‡ªå®šä¹‰çš„å¤„ç†åŠå±•ç¤ºã€‚

### .name

å‘½ä»¤åç§°å‡ºç°åœ¨å¸®åŠ©ä¸­ï¼Œä¹Ÿç”¨äºå®šä½ç‹¬ç«‹çš„å¯æ‰§è¡Œå­å‘½ä»¤ã€‚

ä½ å¯ä»¥ä½¿ç”¨ `.name()` æˆ–åœ¨ Command æ„é€ å‡½æ•°ä¸­æŒ‡å®šç¨‹åºåç§°ã€‚å¯¹äº program ï¼ŒCommander ä¼šä½¿ç”¨ä¼ é€’ç»™ `.parse()` çš„å®Œæ•´å‚æ•°ä¸­çš„è„šæœ¬åç§°ã€‚ä½†æ˜¯ï¼Œè„šæœ¬åç§°ä¼šæ ¹æ®ç¨‹åºçš„å¯åŠ¨æ–¹å¼è€Œæœ‰æ‰€ä¸åŒï¼Œå› æ­¤æ‚¨å¯èƒ½å¸Œæœ›æ˜ç¡®æŒ‡å®šå®ƒã€‚

```js
program.name('pizza');
const pm = new Command('pm');
```

ä½¿ç”¨ `.command()` æŒ‡å®šæ—¶ï¼Œå­å‘½ä»¤ä¼šè·å¾—åç§°ã€‚å¦‚æœæ‚¨è‡ªå·±åˆ›å»ºå­å‘½ä»¤ä»¥ä¸ `.addCommand()` ä¸€èµ·ä½¿ç”¨ï¼Œåˆ™ä½¿ç”¨ `.name()` æˆ–åœ¨ Command æ„é€ å‡½æ•°ä¸­è®¾ç½®åç§°ã€‚

### .usage

é€šè¿‡è¿™ä¸ªé€‰é¡¹å¯ä»¥ä¿®æ”¹å¸®åŠ©ä¿¡æ¯çš„é¦–è¡Œæç¤ºï¼Œä¾‹å¦‚ï¼š

```js
program
  .name("my-command")
  .usage("[global options] command")
```

å¸®åŠ©ä¿¡æ¯å¼€å¤´å¦‚ä¸‹ï¼š

```Text
Usage: my-command [global options] command
```

### .description å’Œ .summary

description å‡ºç°åœ¨å‘½ä»¤çš„å¸®åŠ©ä¸­ã€‚å½“åˆ—ä¸ºç¨‹åºçš„å­å‘½ä»¤æ—¶ï¼Œä½ å¯ä»¥é€‰æ‹©æä¾›æ›´çŸ­çš„ summary ä»¥ä¾›ä½¿ç”¨ã€‚

```js
program
  .command("duplicate")
  .summary("make a copy")
  .description(`Make a copy of the current project.
This may require additional disk space.
  `);
```

### .helpOption(flags, description)

æ¯ä¸€ä¸ªå‘½ä»¤éƒ½å¸¦æœ‰ä¸€ä¸ªé»˜è®¤çš„å¸®åŠ©é€‰é¡¹ã€‚ä½ å¯ä»¥æ”¹å˜ `flags` å’Œ `description` å‚æ•°ã€‚ä¼ å…¥ `false` åˆ™ä¼šç¦ç”¨å†…å»ºçš„å¸®åŠ©ä¿¡æ¯ã€‚

```js
program
  .helpOption('-e, --HELP', 'read more information');
```

### .addHelpCommand()

å¦‚æœä¸€ä¸ªå‘½ä»¤æ‹¥æœ‰å­å‘½ä»¤ï¼Œå®ƒä¹Ÿå°†æœ‰ä¸€ä¸ªé»˜è®¤çš„å¸®åŠ©å­å‘½ä»¤ã€‚ä½¿ç”¨`.addHelpCommand()`å’Œ`.addHelpCommand(false)`å¯ä»¥æ‰“å¼€æˆ–å…³é—­é»˜è®¤çš„å¸®åŠ©å­å‘½ä»¤ã€‚

ä¹Ÿå¯ä»¥è‡ªå®šä¹‰åå­—å’Œæè¿°ï¼š

```js
program.addHelpCommand('assist [command]', 'show assistance');
```

### å…¶ä»–å¸®åŠ©é…ç½®

å†…å»ºå¸®åŠ©ä¿¡æ¯é€šè¿‡`Help`ç±»è¿›è¡Œæ ¼å¼åŒ–ã€‚å¦‚æœ‰éœ€è¦ï¼Œå¯ä»¥ä½¿ç”¨`.configureHelp()`æ¥æ›´æ”¹å…¶æ•°æ®å±æ€§å’Œæ–¹æ³•ï¼Œæˆ–ä½¿ç”¨`.createHelp()`æ¥åˆ›å»ºå­ç±»ï¼Œä»è€Œé…ç½®`Help`ç±»çš„è¡Œä¸ºã€‚

æ•°æ®å±æ€§åŒ…æ‹¬ï¼š

- `helpWidth`ï¼šæŒ‡æ˜å¸®åŠ©ä¿¡æ¯çš„å®½åº¦ã€‚å¯åœ¨å•å…ƒæµ‹è¯•ä¸­ä½¿ç”¨ã€‚
- `sortSubcommands`ï¼šä»¥å­—æ¯åºæ’åˆ—å­å‘½ä»¤
- `sortOptions`ï¼šä»¥å­—æ¯åºæ’åˆ—é€‰é¡¹

å¯ä»¥å¾—åˆ°å¯è§†åŒ–çš„å‚æ•°åˆ—è¡¨ï¼Œé€‰é¡¹åˆ—è¡¨ï¼Œä»¥åŠå­å‘½ä»¤åˆ—è¡¨ã€‚åˆ—è¡¨çš„æ¯ä¸ªå…ƒç´ éƒ½å…·æœ‰`_term_`å’Œ`_description_`å±æ€§ï¼Œå¹¶å¯ä»¥å¯¹å…¶è¿›è¡Œæ ¼å¼åŒ–ã€‚å…³äºå…¶ä½¿ç”¨æ–¹å¼ï¼Œè¯·å‚è€ƒ`.formatHelp()`ã€‚

ç¤ºä¾‹ä»£ç ï¼š[configure-help.js](./examples/configure-help.js)

```js
program.configureHelp({
  sortSubcommands: true,
  subcommandTerm: (cmd) => cmd.name() // æ˜¾ç¤ºåç§°ï¼Œè€Œéç”¨æ³•
});
```

## è‡ªå®šä¹‰äº‹ä»¶ç›‘å¬

ç›‘å¬å‘½ä»¤å’Œé€‰é¡¹å¯ä»¥æ‰§è¡Œè‡ªå®šä¹‰å‡½æ•°ã€‚

```js
program.on('option:verbose', function () {
  process.env.VERBOSE = this.opts().verbose;
});
```

## é›¶ç¢çŸ¥è¯†

### .parse() å’Œ .parseAsync()

`.parse`çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦è§£æçš„å­—ç¬¦ä¸²æ•°ç»„ï¼Œä¹Ÿå¯ä»¥çœç•¥å‚æ•°è€Œä½¿ç”¨`process.argv`ã€‚

å¦‚æœå‚æ•°éµå¾ªä¸ node ä¸åŒçš„çº¦å®šï¼Œå¯ä»¥åœ¨ç¬¬äºŒä¸ªå‚æ•°ä¸­ä¼ é€’`from`é€‰é¡¹ï¼š

- `node`ï¼šé»˜è®¤å€¼ï¼Œ`argv[0]`æ˜¯åº”ç”¨ï¼Œ`argv[1]`æ˜¯è¦è·‘çš„è„šæœ¬ï¼Œåç»­ä¸ºç”¨æˆ·å‚æ•°ï¼›
- `electron`ï¼š`argv[1]`æ ¹æ® electron åº”ç”¨æ˜¯å¦æ‰“åŒ…è€Œå˜åŒ–ï¼›
- `user`ï¼šæ¥è‡ªç”¨æˆ·çš„æ‰€æœ‰å‚æ•°ã€‚

ä¾‹å¦‚ï¼š

```js
program.parse(process.argv); // æŒ‡æ˜ï¼ŒæŒ‰ node çº¦å®š
program.parse(); // é»˜è®¤ï¼Œè‡ªåŠ¨è¯†åˆ« electron
program.parse(['-f', 'filename'], { from: 'user' });
```

### è§£æé…ç½®

å½“é»˜è®¤çš„è§£ææ–¹å¼æ— æ³•æ»¡è¶³éœ€è¦ï¼ŒCommander ä¹Ÿæä¾›äº†å…¶ä»–çš„è§£æè¡Œä¸ºã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œç¨‹åºçš„é€‰é¡¹åœ¨å­å‘½ä»¤å‰åå‡å¯è¢«è¯†åˆ«ã€‚å¦‚è¦åªå…è®¸é€‰é¡¹å‡ºç°åœ¨å­å‘½ä»¤ä¹‹å‰ï¼Œå¯ä»¥ä½¿ç”¨`.enablePositionalOptions()`ã€‚è¿™æ ·å¯ä»¥åœ¨å‘½ä»¤å’Œå­å‘½ä»¤ä¸­ä½¿ç”¨æ„ä¹‰ä¸åŒçš„åŒåé€‰é¡¹ã€‚

ç¤ºä¾‹ä»£ç ï¼š[positional-options.js](./examples/positional-options.js)

å½“å¯ç”¨äº†å¸¦é¡ºåºçš„é€‰é¡¹è§£æï¼Œä»¥ä¸‹ç¨‹åºä¸­ï¼Œ`-b`é€‰é¡¹åœ¨ç¬¬ä¸€è¡Œä¸­å°†è¢«è§£æä¸ºç¨‹åºé¡¶å±‚çš„é€‰é¡¹ï¼Œè€Œåœ¨ç¬¬äºŒè¡Œä¸­åˆ™è¢«è§£æä¸ºå­å‘½ä»¤çš„é€‰é¡¹ï¼š

```sh
program -b subcommand
program subcommand -b
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œé€‰é¡¹åœ¨å‘½ä»¤å‚æ•°å‰åå‡å¯è¢«è¯†åˆ«ã€‚å¦‚è¦ä½¿é€‰é¡¹ä»…åœ¨å‘½ä»¤å‚æ•°å‰è¢«è¯†åˆ«ï¼Œå¯ä»¥ä½¿ç”¨`.passThroughOptions()`ã€‚è¿™æ ·å¯ä»¥æŠŠå‚æ•°å’Œè·Ÿéšçš„é€‰é¡¹ä¼ é€’ç»™å¦ä¸€ç¨‹åºï¼Œè€Œæ— éœ€ä½¿ç”¨`--`æ¥ç»ˆæ­¢é€‰é¡¹è§£æã€‚
å¦‚è¦åœ¨å­å‘½ä»¤ä¸­ä½¿ç”¨æ­¤åŠŸèƒ½ï¼Œå¿…é¡»é¦–å…ˆå¯ç”¨å¸¦é¡ºåºçš„é€‰é¡¹è§£æã€‚

ç¤ºä¾‹ä»£ç ï¼š[pass-through-options.js](./examples/pass-through-options.js)

å½“å¯ç”¨æ­¤åŠŸèƒ½æ—¶ï¼Œä»¥ä¸‹ç¨‹åºä¸­ï¼Œ`--port=80`åœ¨ç¬¬ä¸€è¡Œä¸­ä¼šè¢«è§£æä¸ºç¨‹åºçš„é€‰é¡¹ï¼Œè€Œåœ¨ç¬¬äºŒè¡Œä¸­åˆ™ä¼šè¢«è§£æä¸ºä¸€ä¸ªå‘½ä»¤å‚æ•°ï¼š

```sh
program --port=80 arg
program arg --port=80
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œä½¿ç”¨æœªçŸ¥é€‰é¡¹ä¼šæç¤ºé”™è¯¯ã€‚å¦‚è¦å°†æœªçŸ¥é€‰é¡¹è§†ä½œæ™®é€šå‘½ä»¤å‚æ•°ï¼Œå¹¶ç»§ç»­å¤„ç†å…¶ä»–éƒ¨åˆ†ï¼Œå¯ä»¥ä½¿ç”¨`.allowUnknownOption()`ã€‚è¿™æ ·å¯ä»¥æ··ç”¨å·²çŸ¥å’ŒæœªçŸ¥çš„é€‰é¡¹ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œä¼ å…¥è¿‡å¤šçš„å‘½ä»¤å‚æ•°å¹¶ä¸ä¼šæŠ¥é”™ã€‚å¯ä»¥ä½¿ç”¨`.allowExcessArguments(false)`æ¥å¯ç”¨è¿™ä¸€æ£€æŸ¥ã€‚

### ä½œä¸ºå±æ€§çš„é—ç•™é€‰é¡¹

åœ¨ Commander 7 ä»¥å‰ï¼Œé€‰é¡¹çš„å€¼æ˜¯ä½œä¸ºå±æ€§å­˜å‚¨åœ¨å‘½ä»¤å¯¹è±¡ä¸Šçš„ã€‚
è¿™ç§å¤„ç†æ–¹å¼ä¾¿äºå®ç°ï¼Œä½†ç¼ºç‚¹åœ¨äºï¼Œé€‰é¡¹å¯èƒ½ä¼šä¸`Command`çš„å·²æœ‰å±æ€§ç›¸å†²çªã€‚é€šè¿‡ä½¿ç”¨`.storeOptionsAsProperties()`ï¼Œå¯ä»¥æ¢å¤åˆ°è¿™ç§æ—§çš„å¤„ç†æ–¹å¼ï¼Œå¹¶å¯ä»¥ä¸åŠ æ”¹åŠ¨åœ°ç»§ç»­è¿è¡Œé—ç•™ä»£ç ã€‚

```js
program
  .storeOptionsAsProperties()
  .option('-d, --debug')
  .action((commandAndOptions) => {
    if (commandAndOptions.debug) {
      console.error(`Called ${commandAndOptions.name()}`);
    }
  });
```

### TypeScript

å¦‚æœä½ ä½¿ç”¨ ts-nodeï¼Œå¹¶æœ‰`.ts`æ–‡ä»¶ä½œä¸ºç‹¬ç«‹å¯æ‰§è¡Œæ–‡ä»¶ï¼Œé‚£ä¹ˆéœ€è¦ç”¨ node è¿è¡Œä½ çš„ç¨‹åºä»¥ä½¿å­å‘½ä»¤èƒ½æ­£ç¡®è°ƒç”¨ï¼Œä¾‹å¦‚ï¼š

```sh
node -r ts-node/register pm.ts
```

### createCommand()

ä½¿ç”¨è¿™ä¸ªå·¥å‚æ–¹æ³•å¯ä»¥åˆ›å»ºæ–°å‘½ä»¤ï¼Œæ­¤æ—¶ä¸éœ€è¦ä½¿ç”¨`new`ï¼Œå¦‚

```bash
const { createCommand } = require('commander');
const program = createCommand();
```

`createCommand`åŒæ—¶ä¹Ÿæ˜¯`Command`å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„å‘½ä»¤ï¼ˆè€Œéå­å‘½ä»¤ï¼‰ï¼Œä½¿ç”¨`.command()`åˆ›å»ºå­å‘½ä»¤æ—¶å†…éƒ¨ä¼šè°ƒç”¨è¯¥æ–¹æ³•ï¼Œå…·ä½“ä½¿ç”¨æ–¹å¼å¯å‚è€ƒ [custom-command-class.js](./examples/custom-command-class.js)ã€‚

### Node é€‰é¡¹ï¼Œå¦‚ --harmony

è¦ä½¿ç”¨`--harmony`ç­‰é€‰é¡¹æœ‰ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š

- åœ¨å­å‘½ä»¤è„šæœ¬ä¸­åŠ ä¸Š`#!/usr/bin/env node --harmony`ã€‚æ³¨ï¼šWindows ç³»ç»Ÿä¸æ”¯æŒï¼›
- è°ƒç”¨æ—¶åŠ ä¸Š`--harmony`å‚æ•°ï¼Œä¾‹å¦‚`node --harmony examples/pm publish`ã€‚`--harmony`é€‰é¡¹åœ¨å¼€å¯å­è¿›ç¨‹æ—¶ä»ä¼šä¿ç•™ã€‚

### è°ƒè¯•å­å‘½ä»¤

ä¸€ä¸ªå¯æ‰§è¡Œçš„å­å‘½ä»¤ä¼šä½œä¸ºå•ç‹¬çš„å­è¿›ç¨‹æ‰§è¡Œã€‚

å¦‚æœä½¿ç”¨ node inspector çš„`node -inspect`ç­‰å‘½ä»¤æ¥[è°ƒè¯•](https://nodejs.org/en/docs/guides/debugging-getting-started/)å¯æ‰§è¡Œå‘½ä»¤ï¼Œå¯¹äºç”Ÿæˆçš„å­å‘½ä»¤ï¼Œinspector ç«¯å£ä¼šé€’å¢ 1ã€‚

å¦‚æœæƒ³ä½¿ç”¨ VSCode è°ƒè¯•ï¼Œåˆ™éœ€è¦åœ¨`launch.json`é…ç½®æ–‡ä»¶é‡Œè®¾ç½®`"autoAttachChildProcesses": true`ã€‚

### æ˜¾ç¤ºé”™è¯¯

ä½ å¯ç”¨äºé’ˆå¯¹è‡ªå·±çš„é”™è¯¯æƒ…å†µè°ƒç”¨ Commander é”™è¯¯å¤„ç†ã€‚ï¼ˆå¦è¯·å‚é˜…ä¸‹ä¸€èŠ‚æœ‰å…³é€€å‡ºå¤„ç†çš„å†…å®¹ï¼‰

é™¤äº†é”™è¯¯æ¶ˆæ¯ï¼Œä½ è¿˜å¯ä»¥é€‰æ‹©æŒ‡å®š `exitCode`ï¼ˆä¸ `process.exit` ä¸€èµ·ä½¿ç”¨ï¼‰å’Œ `code`ï¼ˆä¸ `CommanderError` ä¸€èµ·ä½¿ç”¨ï¼‰

```js
program.error('Password must be longer than four characters');
program.error('Custom processing has failed', { exitCode: 2, code: 'my.custom.error' });
```

### é‡å†™é€€å‡ºå’Œè¾“å‡º

é»˜è®¤æƒ…å†µä¸‹ï¼Œåœ¨æ£€æµ‹åˆ°é”™è¯¯ã€æ‰“å°å¸®åŠ©ä¿¡æ¯æˆ–ç‰ˆæœ¬ä¿¡æ¯æ—¶ Commander ä¼šè°ƒç”¨`process.exit`æ–¹æ³•ã€‚å…¶é»˜è®¤å®ç°ä¼šæŠ›å‡ºä¸€ä¸ª`CommanderError`ï¼Œå¯ä»¥é‡å†™è¯¥æ–¹æ³•å¹¶æä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼ˆå¯é€‰ï¼‰ã€‚

å›è°ƒå‡½æ•°çš„å‚æ•°ä¸º`CommanderError`ï¼Œå±æ€§åŒ…æ‹¬ Number å‹çš„`exitCode`ã€String å‹çš„`code`å’Œ`message`ã€‚å­å‘½ä»¤å®Œæˆè°ƒç”¨åä¼šå¼€å§‹å¼‚æ­¥å¤„ç†ã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œæ‰“å°é”™è¯¯ä¿¡æ¯ã€å¸®åŠ©ä¿¡æ¯æˆ–ç‰ˆæœ¬ä¿¡æ¯ä¸ä¼šè¢«é‡å†™å½±å“ï¼Œå› ä¸ºé‡å†™ä¼šå‘ç”Ÿåœ¨æ‰“å°ä¹‹åã€‚

```js
program.exitOverride();

try {
  program.parse(process.argv);
} catch (err) {
  // è‡ªå®šä¹‰å¤„ç†...
}
```

Commander é»˜è®¤ç”¨ä½œå‘½ä»¤è¡Œåº”ç”¨ï¼Œå…¶è¾“å‡ºå†™å…¥ stdout å’Œ stderrã€‚
å¯¹äºå…¶ä»–åº”ç”¨ç±»å‹ï¼Œè¿™ä¸€è¡Œä¸ºå¯ä»¥ä¿®æ”¹ã€‚å¹¶ä¸”å¯ä»¥ä¿®æ”¹é”™è¯¯ä¿¡æ¯çš„å±•ç¤ºæ–¹å¼ã€‚

ç¤ºä¾‹ä»£ç ï¼š[configure-output.js](./examples/configure-output.js)

```js
function errorColor(str) {
  // æ·»åŠ  ANSI è½¬ä¹‰å­—ç¬¦ï¼Œä»¥å°†æ–‡æœ¬è¾“å‡ºä¸ºçº¢è‰²
  return `\x1b[31m${str}\x1b[0m`;
}

program
  .configureOutput({
    // æ­¤å¤„ä½¿è¾“å‡ºå˜å¾—å®¹æ˜“åŒºåˆ†
    writeOut: (str) => process.stdout.write(`[OUT] ${str}`),
    writeErr: (str) => process.stdout.write(`[ERR] ${str}`),
    // å°†é”™è¯¯é«˜äº®æ˜¾ç¤º
    outputError: (str, write) => write(errorColor(str))
  });
```

### å…¶ä»–æ–‡æ¡£

è¯·å‚è€ƒå…³äºå¦‚ä¸‹è¯é¢˜çš„å…¶ä»–æ–‡æ¡£ï¼š

- [ä¸å†æ¨èä½¿ç”¨çš„åŠŸèƒ½](./docs/zh-CN/%E4%B8%8D%E5%86%8D%E6%8E%A8%E8%8D%90%E4%BD%BF%E7%94%A8%E7%9A%84%E5%8A%9F%E8%83%BD.md)ã€‚è¿™äº›åŠŸèƒ½ä»å—åˆ°æ”¯æŒï¼Œä»¥ä¿è¯å‘åå…¼å®¹ã€‚
- [å¯å˜å‚æ•°çš„é€‰é¡¹](./docs/zh-CN/%E5%8F%AF%E5%8F%98%E5%8F%82%E6%95%B0%E7%9A%84%E9%80%89%E9%A1%B9.md)

## æ”¯æŒ

å½“å‰ç‰ˆæœ¬çš„ Commander åœ¨ LTS ç‰ˆæœ¬çš„ Node.js ä¸Šå®Œå…¨æ”¯æŒã€‚å¹¶ä¸”è‡³å°‘éœ€è¦ v16ã€‚
ï¼ˆä½¿ç”¨æ›´ä½ç‰ˆæœ¬ Node.js çš„ç”¨æˆ·å»ºè®®å®‰è£…æ›´ä½ç‰ˆæœ¬çš„ Commanderï¼‰

ç¤¾åŒºæ”¯æŒè¯·è®¿é—®é¡¹ç›®çš„ [Issues](https://github.com/tj/commander.js/issues)ã€‚

### ä¼ä¸šä½¿ç”¨ Commander

ä½œä¸º Tidelift è®¢é˜…çš„ä¸€éƒ¨åˆ†ã€‚

Commander å’Œå¾ˆå¤šå…¶ä»–åŒ…çš„ç»´æŠ¤è€…å·²ä¸ Tidelift åˆä½œï¼Œé¢å‘ä¼ä¸šæä¾›å¼€æºä¾èµ–çš„å•†ä¸šæ”¯æŒä¸ç»´æŠ¤ã€‚ä¼ä¸šå¯ä»¥å‘ç›¸å…³ä¾èµ–åŒ…çš„ç»´æŠ¤è€…æ”¯ä»˜ä¸€å®šçš„è´¹ç”¨ï¼Œå¸®åŠ©ä¼ä¸šèŠ‚çœæ—¶é—´ï¼Œé™ä½é£é™©ï¼Œæ”¹è¿›ä»£ç è¿è¡Œæƒ…å†µã€‚[äº†è§£æ›´å¤š](https://tidelift.com/subscription/pkg/npm-commander?utm_source=npm-commander&utm_medium=referral&utm_campaign=enterprise&utm_term=repo)

```
File: package.json
```
{
  "name": "commander",
  "version": "11.0.0",
  "description": "the complete solution for node.js command-line programs",
  "keywords": [
    "commander",
    "command",
    "option",
    "parser",
    "cli",
    "argument",
    "args",
    "argv"
  ],
  "author": "TJ Holowaychuk <tj@vision-media.ca>",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/tj/commander.js.git"
  },
  "scripts": {
    "lint": "npm run lint:javascript && npm run lint:typescript",
    "lint:javascript": "eslint index.js esm.mjs \"lib/*.js\" \"tests/**/*.js\"",
    "lint:typescript": "eslint typings/*.ts tests/*.ts",
    "test": "jest && npm run test-typings",
    "test-esm": "node ./tests/esm-imports-test.mjs",
    "test-typings": "tsd",
    "typescript-checkJS": "tsc --allowJS --checkJS index.js lib/*.js --noEmit",
    "test-all": "npm run test && npm run lint && npm run typescript-checkJS && npm run test-esm"
  },
  "files": [
    "index.js",
    "lib/*.js",
    "esm.mjs",
    "typings/index.d.ts",
    "typings/esm.d.mts",
    "package-support.json"
  ],
  "type": "commonjs",
  "main": "./index.js",
  "exports": {
    ".": {
      "require": {
        "types": "./typings/index.d.ts",
        "default": "./index.js"
      },
      "import": {
        "types":
... (truncated due to size)

================================ Human Message =================================


The commands you have run:```
node --version, apt-get update && apt-get install -y nodejs npm, apt-get update && apt-get install -y nodejs npm, node --version && npm --version, npm ci```
Following are the last 5 messages:

================================ Human Message =================================

Observation:
apt-get update && apt-get install -y nodejs npm
0% [Working]0% [Waiting for headers] [Waiting for headers]                                              Hit:1 http://archive.ubuntu.com/ubuntu jammy InRelease
                                              0% [Waiting for headers]0% [Waiting for headers] [Waiting for headers]0% [Waiting for headers] [Waiting for headers]                                              Get:2 http://security.ubuntu.com/ubuntu jammy-security InRelease [129 kB]
0% [Waiting for headers] [2 InRelease 7240 B/129 kB 6%]                                                       0% [Waiting for headers]0% [Waiting for headers]                        Get:3 http://archive.ubuntu.com/ubuntu jammy-updates InRelease [128 kB]
0% [3 InRelease 5792 B/128 kB 5%]                                 0% [Working]0% [Waiting for headers]0% [Waiting for headers]0% [Waiting for headers]                        Get:4 http://archive.ubuntu.com/ubuntu jammy-backports InRelease [127 kB]
0% [4 InRelease 11.6 kB/127 kB 9%]                                  0% [Working]100% [Working]              Fetched 384 kB in 3s (134 kB/s)
Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 4%Reading package lists... 4%Reading package lists... 4%Reading package lists... 4%Reading package lists... 43%Reading package lists... 43%Reading package lists... 43%Reading package lists... 43%Reading package lists... 53%Reading package lists... 53%Reading package lists... 68%Reading package lists... 68%Reading package lists... 70%Reading package lists... 72%Reading package lists... 72%Reading package lists... 72%Reading package lists... 72%Reading package lists... 73%Reading package lists... 73%Reading package lists... 73%Reading package lists... 73%Reading package lists... 81%Reading package lists... 81%Reading package lists... 96%Reading package lists... 96%Reading package lists... 99%Reading package lists... 99%Reading package lists... 99%Reading package lists... 99%Reading package lists... Done
Reading package lists... 0%Reading package lists... 0%Reading package lists... 0%Reading package lists... 4%Reading package lists... 4%Reading package lists... 4%Reading package lists... 4%Reading package lists... 43%Reading package lists... 43%Reading package lists... 43%Reading package lists... 43%Reading package lists... 53%Reading package lists... 53%Reading package lists... 68%Reading package lists... 68%Reading package lists... 72%Reading package lists... 72%Reading package lists... 72%Reading package lists... 72%Reading package lists... 73%Reading package lists... 73%Reading package lists... 73%Reading package lists... 73%Reading package lists... 73%Reading package lists... 81%Reading package lists... 81%Reading package lists... 96%Reading package lists... 96%Reading package lists... 99%Reading package lists... 99%Reading package lists... 99%Reading package lists... 99%Reading package lists... Done
Building dependency tree... 0%Building dependency tree... 0%Building dependency tree... 50%Building dependency tree... 50%Building dependency tree... Done
Reading state information... 0% Reading state information... 2%Reading state information... Done
The following additional packages will be installed:
  adwaita-icon-theme at-spi2-core binutils binutils-common
  binutils-x86-64-linux-gnu build-essential bzip2 cpp cpp-11 dbus
  dbus-user-session dconf-gsettings-backend dconf-service dirmngr dmsetup
  dpkg-dev fakeroot fontconfig fontconfig-config fonts-dejavu-core g++ g++-11
  gcc gcc-11 gcc-11-base gir1.2-glib-2.0 gnupg gnupg-l10n gnupg-utils gpg
  gpg-agent gpg-wks-client gpg-wks-server gpgconf gpgsm
  gsettings-desktop-schemas gtk-update-icon-cache gyp hicolor-icon-theme
  humanity-icon-theme javascript-common libalgorithm-diff-perl
  libalgorithm-diff-xs-perl libalgorithm-merge-perl libapparmor1 libargon2-1
  libasan6 libassuan0 libatk-bridge2.0-0 libatk1.0-0 libatk1.0-data libatomic1
  libatspi2.0-0 libauthen-sasl-perl libavahi-client3 libavahi-common-data
  libavahi-common3 libbinutils libc-ares2 libc-de....stripped due to length....
(1.0.1-4) ...
Setting up node-json-buffer (3.0.1-1) ...
Setting up node-console-control-strings (1.1.0-2) ...
Setting up node-debug (4.3.2+~cs4.1.7-1) ...
Setting up libxaw7:amd64 (2:1.0.14-1) ...
Setting up node-events (3.3.0+~3.0.0-2) ...
Setting up node-agent-base (6.0.2+~cs5.4.2-1) ...
Setting up x11-xserver-utils (7.7+9build1) ...
Setting up gcc (4:11.2.0-1ubuntu1) ...
Setting up node-validate-npm-package-name (3.0.0-4) ...
Setting up librsvg2-2:amd64 (2.52.5+dfsg-3ubuntu0.2) ...
Setting up node-wcwidth.js (1.0.2-1) ...
Setting up node-cssstyle (2.3.0-2) ...
Setting up node-normalize-package-data (3.0.3+~2.4.1-1) ...
Setting up libnotify4:amd64 (0.7.9-3ubuntu5.22.04.1) ...
Setting up node-got (11.8.3+~cs58.7.37-1) ...
Setting up librsvg2-common:amd64 (2.52.5+dfsg-3ubuntu0.2) ...
Setting up libnotify-bin (0.7.9-3ubuntu5.22.04.1) ...
Setting up node-tap-parser (7.0.0+ds1-6) ...
Setting up g++ (4:11.2.0-1ubuntu1) ...
update-alternatives: using /usr/bin/g++ to provide /usr/bin/c++ (c++) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/c++.1.gz because associated file /usr/share/man/man1/g++.1.gz (of link group c++) doesn't exist
Setting up node-tar (6.1.11+ds1+~cs6.0.6-1) ...
Setting up libgdk-pixbuf2.0-bin (2.42.8+dfsg-1ubuntu0.4) ...
Setting up gnupg (2.2.27-3ubuntu2.4) ...
Setting up node-tough-cookie (4.0.0-2) ...
Setting up build-essential (12.9ubuntu3) ...
Setting up node-npm-package-arg (8.1.5-1) ...
Setting up libgtk-3-common (3.24.33-1ubuntu2.2) ...
Setting up node-https-proxy-agent (5.0.0+~cs8.0.0-3) ...
Setting up node-string-width (4.2.3+~cs13.2.3-1) ...
Setting up gyp (0.1+20210831gitd6c5dd5-5) ...
Setting up networkd-dispatcher (2.1-2ubuntu0.22.04.2) ...
Created symlink /etc/systemd/system/multi-user.target.wants/networkd-dispatcher.service â†’ /lib/systemd/system/networkd-dispatcher.service.
Setting up gsettings-desktop-schemas (42.0-1ubuntu1) ...
Setting up node-cacache (15.0.5+~cs13.9.21-3) ...
Setting up libglx-mesa0:amd64 (23.2.1-1ubuntu3.1~22.04.3) ...
Setting up libglx0:amd64 (1.4.0-1) ...
Setting up node-columnify (1.5.4+~1.5.1-1) ...
Setting up node-read-package-json (4.1.1-1) ...
Setting up node-growl (1.10.5-4) ...
Setting up node-tap-mocha-reporter (3.0.7+ds-2) ...
Setting up libgl1:amd64 (1.4.0-1) ...
Setting up node-ws (8.5.0+~cs13.3.3-2) ...
Setting up node-cli-table (0.3.11+~cs0.13.3-1) ...
Setting up node-jsdom (19.0.0+~cs90.11.27-1) ...
Setting up at-spi2-core (2.44.0-3) ...
Setting up x11-utils (7.7+5build2) ...
Setting up node-wide-align (1.1.3-4) ...
Setting up node-tap (12.0.1+ds-4) ...
Setting up node-fetch (2.6.7+~2.5.12-1) ...
Setting up node-gauge (4.0.2-1) ...
Setting up node-npmlog (6.0.1+~4.1.4-1) ...
Setting up node-coveralls (3.1.1-1) ...
Setting up node-gyp (8.4.1-1) ...
Setting up npm (8.5.1~ds-1) ...
Setting up adwaita-icon-theme (41.0-1ubuntu1) ...
update-alternatives: using /usr/share/icons/Adwaita/cursor.theme to provide /usr/share/icons/default/index.theme (x-cursor-theme) in auto mode
Setting up liblwp-protocol-https-perl (6.10-1) ...
Setting up libwww-perl (6.61-1) ...
Setting up libgtk-3-0:amd64 (3.24.33-1ubuntu2.2) ...
Setting up libgtk-3-bin (3.24.33-1ubuntu2.2) ...
Setting up libvte-2.91-0:amd64 (0.68.0-1ubuntu0.1) ...
Setting up humanity-icon-theme (0.6.16) ...
Setting up libvted-3-0:amd64 (3.10.0-1ubuntu1) ...
Setting up libgtkd-3-0:amd64 (3.10.0-1ubuntu1) ...
Setting up tilix (1.9.4-2build1) ...
update-alternatives: using /usr/bin/tilix.wrapper to provide /usr/bin/x-terminal-emulator (x-terminal-emulator) in auto mode
update-alternatives: warning: skip creation of /usr/share/man/man1/x-terminal-emulator.1.gz because associated file /usr/share/man/man1/tilix.1.gz (of link group x-terminal-emulator) doesn't exist
Setting up libxml-parser-perl:amd64 (2.46-3build1) ...
Setting up ubuntu-mono (20.10-0ubuntu2) ...
Setting up libxml-twig-perl (1:3.52-1) ...
Setting up libnet-dbus-perl (1.2.0-1build3) ...
Processing triggers for libc-bin (2.35-0ubuntu3.10) ...
Processing triggers for libgdk-pixbuf-2.0-0:amd64 (2.42.8+dfsg-1ubuntu0.4) ...


root@0b17b1baec44:/testbed $

exit code: 0

================================== Ai Message ==================================

Thought: Node.js and npm have been successfully installed. Now I should verify the installation and check the versions to ensure everything is working correctly.

Action: <command>node --version && npm --version</command>
================================ Human Message =================================

Observation:
node --version && npm --version
v12.22.9
8.5.1


root@0b17b1baec44:/testbed $

exit code: 0

================================== Ai Message ==================================

Thought: Node.js (v12.22.9) and npm (8.5.1) are installed. Now I should install the project dependencies using npm since there's a package-lock.json file present.

Action: <command>npm ci</command>
================================ Human Message =================================

Observation:
npm ci
[..................] | idealTree: timing npm-ci:rm Completed in 3msnpm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'commander@11.0.0',
npm WARN EBADENGINE   required: { node: '>=16' },
npm WARN EBADENGINE   current: { node: 'v12.22.9', npm: '8.5.1' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@jest/console@29.5.0',
npm WARN EBADENGINE   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },
npm WARN EBADENGINE   current: { node: 'v12.22.9', npm: '8.5.1' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@jest/core@29.5.0',
npm WARN EBADENGINE   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },
npm WARN EBADENGINE   current: { node: 'v12.22.9', npm: '8.5.1' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@jest/environment@29.5.0',
npm WARN EBADENGINE   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },
npm WARN EBADENGINE   current: { node: 'v12.22.9', npm: '8.5.1' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@jest/expect@29.5.0',
npm WARN EBADENGINE   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },
npm WARN EBADENGINE   current: { node: 'v12.22.9', npm: '8.5.1' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@jest/expect-utils@29.5.0',
npm WARN EBADENGINE   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },
npm WARN EBADENGINE   current: { node: 'v12.22.9', npm: '8.5.1' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@jest/fake-timers@29.5.0',
npm WARN EBADENGINE   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },
npm WARN EBADENGINE   current: { node: 'v12.22.9', npm: '8.5.1' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@jest/globals@29.5.0',
npm WARN EBADENGINE   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },
npm WARN EBADENGINE   current: { node: 'v12.22.9', npm: '8.5.1' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@jest/reporters@29.5.0',
npm WARN EBADENGINE   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },
npm WARN EBADENGINE   current: { node: 'v12.22.9', npm: '8.5.1' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@jest/schemas@29.4.3',
npm WARN EBADENGINE   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },
npm WARN EBADENGINE   current: { node: 'v12.22.9', npm: '8.5.1' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@jest/source-map@29.4.3',
npm WARN EBADENGINE   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },
npm WARN EBADENGINE   current: { node: 'v12.22.9', npm: '8.5.1' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@jest/test-result@29.5.0',
npm WARN EBADENGINE   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },
npm WARN EBADENGINE   current: { node: 'v12.22.9', npm: '8.5.1' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@jest/test-sequencer@29.5.0',
npm WARN EBADENGINE   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },
npm WARN EBADENGINE   current: { node: 'v12.22.9', npm: '8.5.1' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@jest/transform@29.5.0',
npm WARN EBADENGINE   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },
npm WARN EBADENGINE   current: { node: 'v12.22.9', npm: '8.5.1' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: '@jest/types@29.5.0',
npm WARN EBADENGINE   required: { node: '^14.15.0 || ^16.10.0 || >=18.0.0' },
npm WARN EBADENGINE   current: { node: 'v12.22.9', npm: '8.5.1' }
npm WARN EBADENGINE }
npm WARN EBADENGINE Unsupported engine {
npm WARN EBADENGINE   package: 'babel-jest@29.5.0',
npm WA....stripped due to length....
@babel/helper-function-name: http fetch GET 200 ht[#################.] / reify:@babel/helper-function-name: http fetch GET 200 ht[#################.] \ reify:@babel/helpers: http fetch GET 200 https://registr[#################.] / reify:@babel/highlight: http fetch GET 200 https://regis[#################.] / reify:json5: http fetch GET 200 https://registry.npmjs.o[#################.] \ reify:lru-cache: http fetch GET 200 https://registry.npm[#################.] / reify:type-fest: http fetch GET 200 https://registry.npm[#################.] - reify:semver: http fetch GET 200 https://registry.npmjs.[#################.] \ reify:type-fest: http fetch GET 200 https://registry.npm[#################.] / reify:lru-cache: http fetch GET 200 https://registry.npm[#################.] \ reify:@babel/helper-environment-visitor: http fetch GET[##################] \ reify:debug: http fetch GET 200 https://registry.npmjs.o[##################] \ reify:@babel/code-frame: http fetch GET 200 https://regi[##################] \ reify:globals: http fetch GET 200 https://registry.npmjs[##################] | reify:ansi-styles: http fetch GET 200 https://registry.n[##################] - reify:@babel/generator: http fetch GET 200 https://regis[##################] / reify:@babel/core: http fetch GET 200 https://registry.n[##################] / reify:@babel/core: http fetch GET 200 https://registry.n[##################] / reify:color-convert: http fetch GET 200 https://registry[##################] | reify:color-convert: http fetch GET 200 https://registry[##################] | reify:color-convert: http fetch GET 200 https://registry[##################] | reify:color-convert: http fetch GET 200 https://registry[##################] | reify:color-convert: http fetch GET 200 https://registry[##################] / reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] / reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] - reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] / reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] - reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] / reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] \ reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] / reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] - reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] \ reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] | reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] \ reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] - reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] - reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] / reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] \ reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] \ reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] \ reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] - reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] - reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] \ reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] \ reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] \ reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] \ reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] \ reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht[##################] / reify:@jridgewell/sourcemap-codec: http fetch GET 200 ht
added 506 packages, and audited 507 packages in 10s

120 packages are looking for funding
  run `npm fund` for details

8 vulnerabilities (1 low, 3 moderate, 3 high, 1 critical)

To address all issues, run:
  npm audit fix

Run `npm audit` for details.


root@0b17b1baec44:/testbed $

exit code: 0

##### LLM OUTPUT #####
================================== Ai Message ==================================

Thought: The dependencies were installed but there are warnings about unsupported Node.js version (requires >=16 but we have v12.22.9). Since the tests might require newer Node.js features, I should upgrade Node.js to a supported version.

Action: <search>how to install nodejs 16 on ubuntu 22.04</search>
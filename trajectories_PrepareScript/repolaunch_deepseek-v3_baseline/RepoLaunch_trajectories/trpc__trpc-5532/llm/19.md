##### LLM INPUT #####
================================ System Message ================================

You are a developer. Your task is to install dependencies and set up a environment that is able to run the tests of the project.

- You start with an initial Docker container based on ubuntu:22.04.
- You interact with a Bash session inside this container.
- Project files are located in /testbed within the container, and your current working directory of bash is already set to /testbed.
- No need to clone the project again.

The final objective is to successfully run the tests of the project.


### TypeScript-Specific Instructions:
- Use npm, yarn, or pnpm to install dependencies (check package.json and lockfiles)
- Run `npm install` or `yarn install` to install dependencies
- Check package.json for test scripts and build commands
- Consider using `npm ci` for faster, reproducible builds if package-lock.json exists
- Install TypeScript globally if needed (e.g., `npm install -g typescript`)


================================ Human Message =================================


You run in a loop of Thought, Action, Observation.
At the end of the loop you should use Action to stop the loop.

Use Thought to describe your thoughts about the question you have been asked.
Use Action to run one of the actions available to you.
Observation will be the result of running those actions.
> Important Note: Each step, reply with only **one** (Thought, Action) pair.
> Important Note: Do not reply **Observation**, it will be provided by the system.

Your available actions are:

    Command: run a command in the bash, reply with following format, your command should not require sudo or interactive input:
        <command>bash command</command>
        e.g. install build-essential: <command>apt-get install -y build-essential</command>
        e.g. view file content: <command>cat README.md</command>
    Search: search the web for if you need some information, generate query and reply with following format:
        <search>the search query</search>
        e.g. <search>how to fix 'No module named setuptools'</search>
        e.g. <search>how to install python3 on ubuntu</search>
        e.g. <search>how to create development environment for python3</search>
    Stop: stop the setup loop once you think the setup is complete, reply with following format:
        <stop></stop>
    

Observation will be the result of running those actions.


Project Structure: the structure of the project, including files and directories.
Related Files: the content of related files of the project that may help you understand the project.
Thought: you should always think about what to do
Action: <command>your bash command here</command> or <search>your search query</search> or other actions available
Observation: the result of the action
... (this Thought/Action/Observation can repeat N times) ...
Thought: I think the setup should be fine
Action: <stop>stop the setup</stop>
Answer: the final result

Begin!
Project Structure: ğŸ“‚ 
/home/hagon/Project/msb/EnvAgent/git/EnvBench/baseline_RepoLaunch/SWE-bench-L
ive/launch/playground/EnvPilot_baseline/trpc__trpc-5532/repo
â”£â”â” ğŸ“‚ .github
â”£â”â” ğŸ“‚ .vscode
â”£â”â” ğŸ“‚ examples
â”£â”â” ğŸ“‚ packages
â”£â”â” ğŸ“‚ scripts
â”£â”â” ğŸ“‚ www
â”£â”â” ğŸ“„ .all-contributorsrc
â”£â”â” ğŸ“„ .eslintrc.js
â”£â”â” ğŸ“„ .kodiak.toml
â”£â”â” ğŸ“„ .npmrc
â”£â”â” ğŸ“„ .nvmrc
â”£â”â” ğŸ“„ .prettierignore
â”£â”â” ğŸ“„ .prettierrc.js
â”£â”â” ğŸ“„ .tool-versions
â”£â”â” ğŸ“„ .ts-prunerc
â”£â”â” ğŸ“„ codecov.yml
â”£â”â” ğŸ“„ CONTRIBUTING.md
â”£â”â” ğŸ“„ lerna.json
â”£â”â” ğŸ“„ LICENSE
â”£â”â” ğŸ“„ package.json
â”£â”â” ğŸ“„ pnpm-lock.yaml
â”£â”â” ğŸ“„ pnpm-workspace.yaml
â”£â”â” ğŸ“„ README.md
â”£â”â” ğŸ“„ SECURITY.md
â”£â”â” ğŸ“„ tsconfig.build.json
â”£â”â” ğŸ“„ tsconfig.json
â”—â”â” ğŸ“„ turbo.json

Related Files: ------ BEGIN RELATED FILES ------
File: README.md
```
<a href="https://trpc.io/" target="_blank" rel="noopener">
  <picture>
    <source media="(prefers-color-scheme: dark)" srcset="https://assets.trpc.io/www/trpc-readme-dark.png" />
    <img alt="tRPC" src="https://assets.trpc.io/www/trpc-readme.png" />
  </picture>
</a>

<div align="center">
  <h1>tRPC</h1>
  <h3>Move fast and break nothing.<br />End-to-end typesafe APIs made easy.</h3>
  <a href="https://codecov.io/gh/trpc/trpc">
    <img alt="codecov" src="https://codecov.io/gh/trpc/trpc/branch/main/graph/badge.svg?token=KPPS918B0G">
  </a>
  <a href="https://npmcharts.com/compare/@trpc/server?interval=30">
    <img alt="weekly downloads" src="https://img.shields.io/npm/dm/%40trpc/server.svg">
  </a>
  <a href="https://github.com/trpc/trpc/blob/main/LICENSE">
    <img alt="MIT License" src="https://img.shields.io/github/license/trpc/trpc" />
  </a>
  <a href="https://trpc.io/discord">
    <img alt="Discord" src="https://img.shields.io/discord/867764511159091230?color=7389D8&label&logo=discord&logoColor=ffffff" />
  </a>
  <br />
  <a href="https://twitter.com/trpcio">
    <img alt="Twitter" src="https://img.shields.io/twitter/url.svg?label=%40trpcio&style=social&url=https%3A%2F%2Ftwitter.com%2Falexdotjs" />
  </a>
  <br />
  <br />
  <figure>
    <img src="https://assets.trpc.io/www/v10/v10-dark-landscape.gif" alt="Demo" />
    <figcaption>
      <p align="center">
        The client above is <strong>not</strong> importing any code from the server, only its type declarations.
      </p>
    </figcaption>
  </figure>
</div>

<br />

> [!NOTE]
>
> You are looking at the `next`-branch of tRPC which is the current work in progress representing **version 11**.
>
> - The functionality is **stable and can be used in production**, but we may do small breaking API-changes between patches until we reach `11.0.0`
> - The packages are published with the `next`-tag on npm
> - For the list of changes made, see https://trpc.io/docs/v11/migrate-from-v10-to-v11

## Intro

tRPC allows you to easily build & consume fully typesafe APIs without schemas or code generation.

### Features

- âœ…&nbsp; Well-tested and production ready.
- ğŸ§™â€â™‚ï¸&nbsp; Full static typesafety & autocompletion on the client, for inputs, outputs, and errors.
- ğŸ&nbsp; Snappy DX - No code generation, run-time bloat, or build pipeline.
- ğŸƒ&nbsp; Light - tRPC has zero deps and a tiny client-side footprint.
- ğŸ»&nbsp; Easy to add to your existing brownfield project.
- ğŸ”‹&nbsp; Batteries included - React.js/Next.js/Express.js/Fastify adapters. _(But tRPC is not tied to React, and there are many [community adapters](https://trpc.io/docs/awesome-trpc#-extensions--community-add-ons) for other libraries)_
- ğŸ¥ƒ&nbsp; Subscriptions support.
- âš¡ï¸&nbsp; Request batching - requests made at the same time can be automatically combined into one
- ğŸ‘€&nbsp; Quite a few examples in the [./examples](./examples)-folder

## Quickstart

There are a few [examples](https://trpc.io/docs/example-apps) that you can use for playing out with tRPC or bootstrapping your new project. For example, if you want a Next.js app, you can use the full-stack Next.js example:

**Quick start with a full-stack Next.js example:**

```sh
# yarn
yarn create next-app --example https://github.com/trpc/trpc --example-path examples/next-prisma-starter trpc-prisma-starter

# npm
npx create-next-app --example https://github.com/trpc/trpc --example-path examples/next-prisma-starter trpc-prisma-starter

# pnpm
pnpm create next-app --example https://github.com/trpc/trpc --example-path examples/next-prisma-starter trpc-prisma-starter

# bun
bunx create-next-app --example https://github.com/trpc/trpc --example-path examples/next-prisma-starter trpc-prisma-starter
```

**ğŸ‘‰ See full documentation on [tRPC.io](https://trpc.io/docs). ğŸ‘ˆ**

## Star History

<a href="https://star-history.com/#trpc/trpc"><img src="https://api.star-history.com/svg?repos=trpc/trpc&type=Date" alt="Star History Chart" width="600" /></a>

## Core Team

> Do you want to contribute? First, read the <a href="https://github.com/trpc/trpc/blob/main/CONTRIBUTING.md">Contributing Guidelines</a> before opening an issue or PR so you understand the branching strategy and local development environment. If you need any more guidance or want to ask more questions, feel free to write to us on <a href="https://trpc.io/discord">Discord</a>!

<table>
  <tr>
    <td align="center"><a href="https://twitter.com/alexdotjs"><img src="https://avatars.githubusercontent.com/u/459267?v=4?s=100" width="100px;" alt=""/><br /><sub><b>Alex / KATT</b></sub></a></td>
    <td>ğŸ‘‹ Hi, I'm Alex and I am the creator of tRPC, don't hesitate to contact me on <a href="https://twitter.com/alexdotjs">Twitter</a> or <a href="mailto:alex@trpc.io">email</a> if you are curious about tRPC in any way.</td>
  </tr>
</table>

### Project leads

> The people who lead the API-design decisions and have the most active role in the development

<table>
  <tbody>
    <tr>
      <td align="center"><a href="http://www.jumr.dev"><img src="https://avatars.githubusercontent.com/u/51714798?v=4&s=100" width="100px;" alt=""/><br /><sub><b>Julius Marminge</b></sub></a></td>
      <td align="center"><a href="https://twitter.com/alexdotjs"><img src="https://avatars.githubusercontent.com/u/459267?v=4?s=100" width="100px;" alt=""/><br /><sub><b>Alex / KATT</b></sub></a></td>
    </tr>
  </tbody>
</table>

### Active contributors

> People who actively help out improving the codebase by making PRs and reviewing code

<table>
  <tbody>
    <tr>
      <td align="center"><a href="https://github.com/Nick-Lucas"><img src="https://avatars.githubusercontent.com/u/8896153?v=4&s=100" width="100px;" alt=""/><br /><sub><b>Nick Lucas</b></sub></a></td>
      <td align="center"><a href="https://github.com/Sheraff"><img src="https://github.com/Sheraff.png?v=4&s=100" width="100px;" alt=""/><br /><sub><b>Flo</b></sub></a></td>
      <td align="center"><a href="https://twitter.com/s4chinraja"><img src="https://avatars.githubusercontent.com/u/58836760?v=4?s=100" width="100px;" alt=""/><br /><sub><b>Sachin Raja</b></sub></a></td>
    </tr>
  </tbody>
</table>

### Special shout-outs

<table>
  <tbody>
    <tr>
      <td align="center"><a href="https://twitter.com/trashh_dev"><img src="https://avatars.githubusercontent.com/u/3660667?v=4?s=100" width="100px;" alt=""/><br /><sub><b>Chris Bautista</b></sub></a></td>
      <td align="center"><a href="http://t3.gg"><img src="https://avatars.githubusercontent.com/u/6751787?v=4?s=100" width="100px;" alt=""/><br /><sub><b>Theo Browne</b></sub></a></td>
      <td align="center"><a href="https://elsakaan.dev"><img src="https://avatars.githubusercontent.com/u/20271968?v=4&s=100" width="100" alt="Ahmed%20Elsakaan"/><br /><sub><b>Ahmed Elsakaan</b></sub></a></td>
      <td align="center"><a href="https://twitter.com/jlalmes"><img src="https://avatars.githubusercontent.com/u/69924001?v=4?s=100" width="100px;" alt=""/><br /><sub><b>James Berry</b></sub></a></td>
      <td align="center"><a href="https://github.com/kamilogorek"><img src="https://avatars.githubusercontent.com/u/1523305?v=4&s=100" width="100px;" alt=""/><br /><sub><b>Kamil OgÃ³rek</b></sub></a></td>
    </tr>
  </tbody>
</table>

## Sponsors

If you enjoy working with tRPC and want to support us, consider giving a token appreciation by [GitHub Sponsors](https://trpc.io/sponsor)!

<!-- SPONSORS:LIST:START -->
<!-- prettier-ignore-start -->
<!-- markdownlint-disable -->

### ğŸ¥‡ Gold Sponsors

<table>
  <tr>
   <td align="center"><a href="https://tolahq.com/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/92736868?v=4&s=180" width="180" alt="Tola"/><br />Tola</a></td>
  </tr>
</table>

### ğŸ¥ˆ Silver Sponsors

<table>
  <tr>
   <td align="center"><a href="https://cal.com/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/79145102?v=4&s=150" width="150" alt="Cal.com,%20Inc."/><br />Cal.com, Inc.</a></td>
  </tr>
</table>

### ğŸ¥‰ Bronze Sponsors

<table>
  <tr>
   <td align="center"><a href="http://echobind.com/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/570840?v=4&s=120" width="120" alt="Echobind"/><br />Echobind</a></td>
   <td align="center"><a href="https://github.com/hidrb"><img src="https://avatars.githubusercontent.com/u/77294655?v=4&s=120" width="120" alt="Dr.%20B"/><br />Dr. B</a></td>
   <td align="center"><a href="http://flylance.com/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/67534310?v=4&s=120" width="120" alt="Flylance"/><br />Flylance</a></td>
  </tr>
</table>

### ğŸ˜» Smaller Backers

<table>
  <tr>
   <td align="center"><a href="https://faraday.dev/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/95662801?v=4&s=100" width="100" alt="Ahoy%20Labs"/><br />Ahoy Labs</a></td>
   <td align="center"><a href="https://dyaa.me/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/4283185?u=22749f3ebf75e21997dc31c91526e57c7e7d8a41&v=4&s=100" width="100" alt="Dyaa"/><br />Dyaa</a></td>
   <td align="center"><a href="http://brooke.me/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/8385528?u=c2d0658cefbdb7508ce904a6c0f7aa1a600ba934&v=4&s=100" width="100" alt="Brooke"/><br />Brooke</a></td>
   <td align="center"><a href="https://maxgreenwald.me/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/2615374?u=4c1402dd1e4e8ff7514f2e300adfe9b75ae76e85&v=4&s=100" width="100" alt="Max%20Greenwald"/><br />Max Greenwald</a></td>
   <td align="center"><a href="http://ballingt.com/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/458879?u=4b045ac75d721b6ac2b42a74d7d37f61f0414031&v=4&s=100" width="100" alt="Tom%20Ballinger"/><br />Tom Ballinger</a></td>
   <td align="center"><a href="https://farazpatankar.com/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/10681116?u=707f054b6651fcf93e5297b2142d15e772712e4a&v=4&s=100" width="100" alt="Faraz%20Patankar"/><br />Faraz Patankar</a></td>
  </tr>
  <tr>
   <td align="center"><a href="https://github.com/aslaker"><img src="https://avatars.githubusercontent.com/u/51129804?u=72424dea624e663c5df731ad9852636f5c4471e5&v=4&s=100" width="100" alt="Adam%20Slaker"/><br />Adam Slaker</a></td>
   <td align="center"><a href="https://github.com/dmaykov"><img src="https://avatars.githubusercontent.com/u/6147048?u=8ae662ac99e91917062164de0d9404002b99cf2e&v=4&s=100" width="100" alt="Dmitry%20Maykov"/><br />Dmitry Maykov</a></td>
   <td align="center"><a href="https://chrisbradley.dev/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/11767079?u=e64f67faffd350af19aa896ff89a0708829e9a2a&v=4&s=100" width="100" alt="Chris%20Bradley"/><br />Chris Bradley</a></td>
   <td align="center"><a href="https://elsakaan.dev/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/20271968?u=ab95f47bb661569e9b4ab1dadfdb802b77f9d1c6&v=4&s=100" width="100" alt="Ahmed%20Elsakaan"/><br />Ahmed Elsakaan</a></td>
   <td align="center"><a href="https://hampuskraft.com/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/24176136?u=bb30f912bb9bae189257b0b51056e1d2a9b6a9ca&v=4&s=100" width="100" alt="Hampus%20Kraft"/><br />Hampus Kraft</a></td>
   <td align="center"><a href="https://www.illarionvk.com/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/5012724?u=7cfa13652f7ac5fb3c56d880e3eb3fbe40c3ea34&v=4&s=100" width="100" alt="Illarion%20Koperski"/><br />Illarion Koperski</a></td>
  </tr>
  <tr>
   <td align="center"><a href="https://iamkhan.io/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/6490268?v=4&s=100" width="100" alt="SchlagerKhan"/><br />SchlagerKhan</a></td>
   <td align="center"><a href="http://jwyce.gg/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/16946573?u=a67088146d57205cf6201bee1add2e24cd811229&v=4&s=100" width="100" alt="Jared%20Wyce"/><br />Jared Wyce</a></td>
   <td align="center"><a href="https://www.fanvue.com/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/72873652?v=4&s=100" width="100" alt="fanvue"/><br />fanvue</a></td>
   <td align="center"><a href="https://github.com/andrew-werdna"><img src="https://avatars.githubusercontent.com/u/8261769?u=ef025d7679533700957db0df9f74bd5d7d8c4a2a&v=4&s=100" width="100" alt="Andrew%20Brown"/><br />Andrew Brown</a></td>
   <td align="center"><a href="https://github.com/AscentFactory"><img src="https://avatars.githubusercontent.com/u/33631274?v=4&s=100" width="100" alt="Ascent%20Factory"/><br />Ascent Factory</a></td>
   <td align="center"><a href="https://unkey.dev/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/138932600?v=4&s=100" width="100" alt="Unkey"/><br />Unkey</a></td>
  </tr>
  <tr>
   <td align="center"><a href="https://jonas-strassel.de/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/4662748?u=e4a5cc2d110935a5c88fcbc02925d733fcc0bbb9&v=4&s=100" width="100" alt="Jonas%20Strassel"/><br />Jonas Strassel</a></td>
   <td align="center"><a href="https://frontj.com/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/39324973?u=38ba70c6775135f0abfdd79834243cc877cdb2a4&v=4&s=100" width="100" alt="Jordy"/><br />Jordy</a></td>
   <td align="center"><a href="http://danielburger.online/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/34251194?u=94935cccfbec58083ab1e535212d54f1bf2c978a&v=4&s=100" width="100" alt="Daniel%20Burger"/><br />Daniel Burger</a></td>
   <td align="center"><a href="https://www.scaleleap.com/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/41709180?v=4&s=100" width="100" alt="Scale%20Leap"/><br />Scale Leap</a></td>
   <td align="center"><a href="https://github.com/drwpwrs"><img src="https://avatars.githubusercontent.com/u/49917220?u=ceb7a6b68f6366882ac7bc599383382f48e41e94&v=4&s=100" width="100" alt="Drew%20Powers"/><br />Drew Powers</a></td>
   <td align="center"><a href="https://drizzle.team/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/108468352?v=4&s=100" width="100" alt="Drizzle%20Team"/><br />Drizzle Team</a></td>
  </tr>
  <tr>
   <td align="center"><a href="https://github.com/ZionLG"><img src="https://avatars.githubusercontent.com/u/36079911?u=12c98dce9d0be04b073a2dfb1ec9cb0839f35fdb&v=4&s=100" width="100" alt="Liran%20Goldman"/><br />Liran Goldman</a></td>
   <td align="center"><a href="https://www.spencermckenney.com/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/15722950?u=8b69f66d5809d45c4da0999c207730085b920888&v=4&s=100" width="100" alt="Spencer%20McKenney"/><br />Spencer McKenney</a></td>
   <td align="center"><a href="https://proxidize.com/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/70805857?v=4&s=100" width="100" alt="Proxidize"/><br />Proxidize</a></td>
   <td align="center"><a href="https://github.com/oskarhertzman"><img src="https://avatars.githubusercontent.com/u/43958723?u=939de62b1618bf7552a9dddc291ba5b3e54a5158&v=4&s=100" width="100" alt="Oskar%20Hertzman"/><br />Oskar Hertzman</a></td>
   <td align="center"><a href="https://imbios.dev/?ref=trpc"><img src="https://avatars.githubusercontent.com/u/41441643?u=086a755a9734123c705313283b3d892fe3ab8471&v=4&s=100" width="100" alt="Imamuzzaki%20Abu%20Salam"/><br />Imamuzzaki Abu Salam</a></td>
  </tr>
</table>

<!-- markdownlint-restore -->
<!-- prettier-ignore-end -->

<!-- SPONSORS:LIST:END -->

## All contributors âœ¨

<a href="https://github.com/trpc/trpc/graphs/contributors">
  <p align="center">
    <img width="720" src="https://contrib.rocks/image?repo=trpc/trpc" alt="A table of avatars from the project's contributors" />
  </p>
</a>

---

<a href="https://vercel.com/?utm_source=trpc&utm_campaign=oss">
  <p align="center">
    <img src="./www/static/img/powered-by-vercel.svg" alt="Powered by Vercel" title="Powered by Vercel">
  </p>
</a>

```
File: lerna.json
```
{
  "version": "10.45.1",
  "registry": "https://registry.npmjs.org/",
  "npmClient": "pnpm",
  "$schema": "node_modules/lerna/schemas/lerna-schema.json"
}

```
File: package.json
```
{
  "name": "root",
  "private": true,
  "engines": {
    "node": "^20.10.0",
    "pnpm": ">=8.9.0"
  },
  "packageManager": "pnpm@8.14.1",
  "scripts": {
    "clean-dev": "pnpm clean && pnpm install && pnpm build && pnpm dev",
    "build": "turbo --filter=\"@trpc/*\" --filter=\"!@trpc/tests\" build",
    "build-www": "turbo --filter www build",
    "dev": "turbo --filter=\"@trpc/*\" dev",
    "dev-www": "turbo --filter www dev",
    "test": "FORCE_COLOR=1 turbo --filter \"@trpc/tests\" test -- --retry=1",
    "test-watch": "cd packages/tests && pnpm test-watch",
    "ts-watch": "turbo run ts-watch",
    "vitest": "cd packages/tests && pnpm vitest",
    "lint": "turbo lint",
    "lint-fix": "turbo lint -- --fix && manypkg fix && pnpm format-fix",
    "format": "prettier \"**/*\" --ignore-unknown",
    "format-fix": "pnpm format --write --list-different",
    "lint-prune": "! ts-prune | grep -v \"used in module\" | grep -v rpc | grep -v observable | grep -v http",
    "clean": "find . -name node_modules -o -name .turbo -o -name .next -o -name dist -o -name __generated__ -type d -prune | xargs rm -rf",
    "codegen:override-prisma": "tsx scripts/addPrismaOverrides.ts",
    "codegen:tests": "turbo codegen-tests",
    "codegen:entrypoints": "turbo codegen-entrypoints",
    "codegen": "run-p codegen:*",
    "prepublish": "pnpm build",
    "postinstall": "pnpm codegen",
    "prepack": "tsx scripts/version.ts",
    "version": "tsx scripts/version.ts",
    "link-all": "cd packages && cd ../server && pnpm link --global && cd ../client && pnpm link --global && cd ../react-query && pnpm link --global && cd ../next && pnpm link --global",
    "commit-date": "git log -n 1 --date=format:'%Y-%m-%d-%H-%M-%S' --pretty=format:'%ad'",
    "canary-preid": "echo \"$(pnpm --silent current-branch)-$(pnpm --silent commit-date)\"",
    "current-branch": "echo \"$(git rev-parse --abbrev-ref HEAD)\" | sed -E 's/refs\\/heads\\///' | sed -E 's/\\W|_/-/g' | sed -e 's/\\//-/'",
    "publish-canary": "lerna publish --force-publish --canary --preid alpha-$(pnpm --silent canary-preid) --dist-tag $(pnpm --silent current-branch)",
    "publish-prerelease": "pnpm install && lerna publish prerelease --force-publish --dist-tag next --no-push && sleep 60 && git push --follow-tags",
    "merge-main": "git checkout main && git pull && git checkout next && git pull && git checkout -b next-merge-$(date '+%Y-%m-%d--%H-%M') next && git merge --ff main"
  },
  "dependencies": {
    "@actions/core": "^1.10.1",
    "@actions/github": "^6.0.0",
    "@ianvs/prettier-plugin-sort-imports": "^4.0.0",
    "@manypkg/cli": "^0.21.2",
    "@rollup/plugin-node-resolve": "^15.2.3",
    "@swc/core": "1.3.3",
    "@testing-library/dom": "^9.0.0",
    "@testing-library/jest-dom": "^6.0.0",
    "@testing-library/react": "^14.0.0",
    "@testing-library/user-event": "^14.4.3",
    "@types/node": "^20.10.0",
    "@types/prettier": "^2.7.2",
    "@typescript-eslint/eslint-plugin": "^7.0.1",
    "@typescript-eslint/parser": "^7.0.1",
    "eslint": "^8.56.0",
    "eslint-plugin-no-only-tests": "^3.1.0",
    "eslint-plugin-react": "^7.32.2",
    "eslint-plugin-react-hooks": "^4.6.0",
    "eslint-plugin-turbo": "^1.9.3",
    "eslint-plugin-unicorn": "51.0.1",
    "express": "^4.17.1",
    "fast-glob": "^3.2.12",
    "hash-sum": "^2.0.0",
    "lerna": "^8.1.2",
    "npm-run-all2": "^6.0.0",
    "prettier": "^2.8.8",
    "prettier-plugin-tailwindcss": "^0.4.0",
    "rollup": "^4.9.5",
    "rollup-plugin-analyzer": "^4.0.0",
    "rollup-plugin-delete": "^2.0.0",
    "rollup-plugin-node-externals": "^7.0.0",
    "rollup-plugin-swc3": "^0.11.0",
    "rollup-plugin-typescript2": "^0.36.0",
    "superjson": "^1.12.4",
    "ts-prune": "^0.10.3",
    "tsx": "^4.0.0",
    "turbo": "^1.10.2",
    "typescript": "^5.3.3",
    "vitest": "^1.2.2",
    "zod": "^3.0.0"
  },
  "pnpm": {
    "overrides": {
      "@examples/trpc-next-prisma-starter>@prisma/client": "https://registry.npmjs.com/@prisma/client/-/client-5.8.1.tgz?id=examplestrpc-next-prisma-starter",
      "@examples/next-websockets-starter>@prisma/client": "https://registry.npmjs.com/@prisma/client/-/client-5.8.1.tgz?id=examplesnext-websockets-starter",
      "@examples/trpc-next-prisma-todomvc>@prisma/client": "https://registry.npmjs.com/@prisma/client/-/client-5.8.1.tgz?id=examplestrpc-next-prisma-todomvc",
      "@examples/trpc-next-prisma-starter>prisma": "https://registry.npmjs.com/prisma/-/prisma-5.8.1.tgz?id=%40examplestrpc-next-prisma-starter",
      "@examples/next-websockets-starter>prisma": "https://registry.npmjs.com/prisma/-/prisma-5.8.1.tgz?id=%40examplesnext-websockets-starter",
      "@examples/trpc-next-prisma-todomvc>prisma": "https://registry.npmjs.com/prisma/-/prisma-5.8.1.tgz?id=%40examplestrpc-next-prisma-todomvc"
    }
  }
}

```
File: CONTRIBUTING.md
```
# Contributing

So excited to have you here! If you want **any** guidance whatsoever with contributing to tRPC, don't hesitate to reach out on [Discord](https://trpc.io/discord)!

## Development workflow

We use [pnpm](https://pnpm.io) as our package manager, so make sure to [install](https://pnpm.io/installation) it first.

```bash
git clone git@github.com:trpc/trpc.git
cd trpc
pnpm install
pnpm build
```

### Get it running

**Terminal 1:**

```bash
# in project root directory
pnpm dev
```

This will start a watcher in parallel which builds all `packages/*` on any file change.

**Terminal 2:**

In another terminal, you can for instance navigate to `examples/next-prisma-starter` and run `pnpm dev` & it will update whenever code is changed in the packages.

### Testing

Open one terminal and run:

```bash
pnpm dev
```

In a second terminal, you can run the tests in watch mode using

```bash
pnpm test-watch

# example if you want to test a specific test file:
pnpm test-watch react

# run only a regression test while fixing a bug
pnpm test-watch 3085
```

Test are mainly coalesced in [./packages/tests](./packages/tests); we import the different libs from here, this makes it easier for us to do integration testing.

### Linting

```bash
pnpm lint-fix
```

### Troubleshooting

If you get any cryptic errors you can usually get past them by doing `pnpm clean && pnpm install`; if this doesn't work, feel free to open an issue.

### Documentation

```bash
cd www/ && pnpm dev
```

## Project overview

This project is a monorepo of packages with well-defined purposes. All of the following are packages are located in the [packages/\*](packages/) directory.

### `@trpc/server`

This package contains the core and server-side functionality. If something is shared between the client and server, it should be here.

#### Building a Router

This is where tRPC has the most interaction with users, so it should be treated with a great deal of importance. We care about offering a simple, intuitive API in which the HTTP layer disappears for the user. Here the user's entrypoint is [`initTRPC`](packages/server/src/core/initTRPC.ts) where root configuration such as a [data transformer](https://trpc.io/docs/data-transformers) is set and factory functions for router, procedure, middleware, etc. creation are returned.

The most complex types are also in this area because we must keep track of the context, meta, middleware, and each procedure and its inputs and outputs. If you are ever struggling to understand a type, feel free to ask for help on [Discord](https://trpc.io/discord).

#### Handling a Request and Forming a Response

The core implementation for HTTP handling is contained in [`resolveHTTPResponse`](packages/server/src/http/resolveHTTPResponse.ts) where requests are handled and an object representing a response is created. This function deals with handling different methods (`query` and `mutation` have different specs), batching, streaming, etc. so it is an excellent place to get an overview of the complete process of handling a request and forming a response. If you want to learn more about the specification that we implement, read [this docs page](https://trpc.io/docs/rpc).

#### Adapting Requests and Responses

Adapters are what connect our framework-agnostic HTTP handling into a server response. We offer official adapters for some popular frameworks, although adapters can also be third-party. Adapters "adapt" their framework's request object into a common format and the object response from `resolveHTTPResponse` into their framework-specific responses. This keeps tRPC framework-agnostic, an important principle that allows it to be used in any environment.

### `@trpc/client`

This is where we use the router types to build a typesafe _vanilla_ client that makes requests to a tRPC API. Client packages (`@trpc/client`, `@trpc/react-query`) infer types from the server using the `Router` generic. In this package, users pass it to `createTRPCClient`.

#### Proxy API

In our client packages, we use [proxies](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Proxy) to offer the most intuitive API for users. They simply type the path of the procedure that they created in their `Router` and it is called as transparently as a regular function, enabling TypeScript features like jump to definition and easy refactors.

#### Links

The client is extensible via a "link" architecture. Links handle the parts of a request's lifecycle and hook into them using our observable implementation. By default, we make fetch requests using `httpBatchLink`, but we offer other useful official links, such as one for WebSockets, and links can also be third-party.

### `@trpc/react-query`

Here we build on top of React Query, using `@trpc/client` to create fetchers. Working similarly to `@trpc/client`, we wrap all React Query functions to make them typesafe, inferring them from the `Router` generic that users pass to `createReactQueryHooks`. Additionally, it includes some functionality needed for SSR.

We also use proxies here to provide a similar API to `@trpc/client`.

#### React Query vs. tRPC Domain

Sometimes it can be confusing to determine if an issue or feature is React Query or tRPC's responsibility. React Query is the library that tRPC builds on top of to gain features like query caching in a way that is familiar to many users. tRPC can be thought of as nothing more than a light wrapper over it, only changing it by adding types for the user's tRPC API and automatically providing a key and fetcher. However this does get more complicated if you factor in SSR.

### `@trpc/next`

This is where SSR magic for Next.js happens. If SSR is enabled in the config, all `@trpc/react-query` queries are fetched on the server using a prepass render of the component tree. We wrap [`getInitialProps`](https://nextjs.org/docs/api-reference/data-fetching/get-initial-props) to hook into the response process and perform a prepass render of the app. This package is subject to change in the future as Next.js improves their page and routing system.

```
File: examples/next-prisma-starter/README.md
```
# Prisma + tRPC

## Features

- ğŸ§™â€â™‚ï¸ E2E typesafety with [tRPC](https://trpc.io)
- âš¡ Full-stack React with Next.js
- âš¡ Database with Prisma
- âš™ï¸ VSCode extensions
- ğŸ¨ ESLint + Prettier
- ğŸ’š CI setup using GitHub Actions:
  - âœ… E2E testing with [Playwright](https://playwright.dev/)
  - âœ… Linting
- ğŸ” Validates your env vars on build and start

## Setup

```bash
pnpm create next-app --example https://github.com/trpc/trpc --example-path examples/next-prisma-starter trpc-prisma-starter
cd trpc-prisma-starter
pnpm
pnpm dx
```

### Requirements

- Node >= 18.0.0
- Postgres

## Development

### Start project

```bash
pnpm create next-app --example https://github.com/trpc/trpc --example-path examples/next-prisma-starter trpc-prisma-starter
cd trpc-prisma-starter
pnpm
pnpm dx
```

### Commands

```bash
pnpm build      # runs `prisma generate` + `prisma migrate` + `next build`
pnpm db-reset   # resets local db
pnpm dev        # starts next.js
pnpm dx         # starts postgres db + runs migrations + seeds + starts next.js
pnpm test-dev   # runs e2e tests on dev
pnpm test-start # runs e2e + unit tests
pnpm test-unit  # runs normal Vitest unit tests
pnpm test-e2e   # runs e2e tests
```

## Deployment

### Using [Render](https://render.com/)

The project contains a [`render.yaml`](./render.yaml) [_"Blueprint"_](https://render.com/docs/blueprint-spec) which makes the project easily deployable on [Render](https://render.com/).

Go to [dashboard.render.com/blueprints](https://dashboard.render.com/blueprints) and connect to this Blueprint and see how the app and database automatically gets deployed.

## Files of note

<table>
  <thead>
    <tr>
      <th>Path</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><a href="./prisma/schema.prisma"><code>./prisma/schema.prisma</code></a></td>
      <td>Prisma schema</td>
    </tr>
    <tr>
      <td><a href="./src/pages/api/trpc/[trpc].ts"><code>./src/pages/api/trpc/[trpc].ts</code></a></td>
      <td>tRPC response handler</td>
    </tr>
    <tr>
      <td><a href="./src/server/routers"><code>./src/server/routers</code></a></td>
      <td>Your app's different tRPC-routers</td>
    </tr>
  </tbody>
</table>

---

Created by [@alexdotjs](https://twitter.com/alexdotjs).

```
File: pnpm-workspace.yaml
```
packages:
  - 'packages/*'
  - 'examples/*'
  - 'examples/.*/*'
  - 'examples/minimal/*'
  - 'examples/minimal-react/*'
  - 'www'
  - 'www/og-image'

```
File: examples/minimal/README.md
```
# A minimal working tRPC example

Requires node 18 (for global fetch).

## Playing around

```
npm i
npm run dev
```

Try editing the ts files to see the type checking in action :)

## Building

```
npm run build
npm run start
```

```
File: turbo.json
```
{
  "$schema": "https://turborepo.org/schema.json",
  "globalDependencies": [
    ".eslintrc.js",
    "tsconfig.json",
    "scripts/entrypoints.ts",
    "scripts/getRollupConfig.ts"
  ],
  "pipeline": {
    "codegen-entrypoints": {},
 
... (truncated due to size)

================================ Human Message =================================


The commands you have run:```
curl -fsSL https://get.pnpm.io/install.sh | sh -```
Following are the last 5 messages:

================================== Ai Message ==================================

Thought: Based on the project structure and files, this is a TypeScript monorepo using pnpm as the package manager. I need to install pnpm first, then set up the environment to run tests.

Action: <command>curl -fsSL https://get.pnpm.io/install.sh | sh -</command>
================================ Human Message =================================

Observation:
curl -fsSL https://get.pnpm.io/install.sh | sh -
bash: curl: command not found


root@53ce46e15064:/testbed $

exit code: 0

##### LLM OUTPUT #####
================================== Ai Message ==================================

Thought: Since curl isn't installed, I'll need to install it first before installing pnpm.

Action: <command>apt-get update && apt-get install -y curl</command>
{
  "instance_id": "vercel__turborepo-10710",
  "base_image": "ubuntu:22.04",
  "setup_commands": [
    "apt-get update && apt-get install -y curl build-essential",
    "curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y --default-toolchain nightly-2025-05-09",
    "curl -fsSL https://deb.nodesource.com/setup_20.x | bash - && apt-get install -y nodejs && npm install -g pnpm@8",
    "apt-get install -y protobuf-compiler libcapnp-dev",
    "pnpm install && cargo build",
    "source $HOME/.cargo/env && cargo build",
    "PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "rustup default stable && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "echo '[patch.crates-io]\nproc-macro2 = \"1.0.66\"' >> Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "sed -i '/\\[workspace.dependencies\\]/a proc-macro2 = \"1.0.66\"' Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "sed -i 's/proc-macro2 = \"1.0.79\"/proc-macro2 = \"1.0.66\"/' Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "sed -i '/proc-macro2/d' Cargo.toml && sed -i '/\\[workspace.dependencies\\]/a proc-macro2 = \"1.0.66\"' Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "sed -i 's/proc-macro2 = \"1.0.66\"/proc-macro2 = \"1.0.85\"/' Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "sed -i 's/proc-macro2 = \"1.0.85\"/proc-macro2 = \"1.0.89\"/' Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "rustup override set nightly-2023-12-01 && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "rustup override set nightly-2024-01-01 && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "find . -name Cargo.toml -exec sed -i '1i cargo-features = [\"edition2024\"]' {} \\; && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "rm Cargo.lock && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "rustup override set nightly && rustup update && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "sed -i '/\\[workspace.dependencies\\]/a biome_json_syntax = \"0.5.6\"' Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "sed -i '/biome_json_syntax/d' Cargo.toml && sed -i '/\\[workspace.dependencies\\]/a biome_json_syntax = \"0.5.6\"' Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "sed -i '/biome_json_syntax/d' Cargo.toml && sed -i '/\\[workspace.dependencies\\]/a biome_json_syntax = { version = \"0.5.7\", git = \"https://github.com/biomejs/biome\", branch = \"main\" }' Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build --no-default-features",
    "cargo update -p biome_json_syntax --precise 0.5.6 && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "sed -i '/\\[workspace.dependencies\\]/a biome_json_syntax = \"0.5.6\"' Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "sed -i '/biome_json_syntax/d' Cargo.toml && sed -i '/\\[workspace.dependencies\\]/a biome_json_syntax = \"0.5.6\"' Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "sed -i '/biome_json_syntax/d' Cargo.toml && sed -i '/\\[workspace.dependencies\\]/a biome_json_syntax = \"0.5.7\"' Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "sed -i '/biome_json_syntax/d' Cargo.toml && sed -i '/\\[workspace.dependencies\\]/a biome_json_syntax = { version = \"0.5.7\", git = \"https://github.com/biomejs/biome\", branch = \"main\" }' Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "sed -i '/biome_json_syntax/d' Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build --no-default-features",
    "cat crates/turborepo-lib/Cargo.toml",
    "sed -i '/biome_json_syntax/d' crates/turborepo-lib/Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build --no-default-features",
    "cargo update -p biome_json_syntax --precise 0.5.7 && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build --no-default-features",
    "cargo update -p biome_json_syntax --precise 0.5.6 && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build --no-default-features",
    "cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build --no-default-features",
    "sed -i '/biome_json_syntax/d' Cargo.toml && sed -i '/\\[workspace.dependencies\\]/a biome_json_syntax = { git = \"https://github.com/biomejs/biome\", branch = \"main\" }' Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build --no-default-features",
    "sed -i '/biome_json_syntax/d' crates/turborepo-lib/Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build --no-default-features",
    "sed -i '/biome_json_syntax/d' Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build --no-default-features",
    "cargo tree -i biome_json_syntax",
    "cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build --no-default-features --features \"default\"",
    "echo '[patch.crates-io]\nbiome_json_syntax = { git = \"https://github.com/biomejs/biome\", branch = \"main\" }' >> Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "cat Cargo.toml | grep -A5 \"\\[patch\\.crates-io\\]\"",
    "sed -i '/\\[patch\\.crates-io\\]/{N;N;d}' Cargo.toml && echo '[patch.crates-io]\nbiome_json_syntax = { git = \"https://github.com/biomejs/biome\", branch = \"main\" }' >> Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "sed -i '/\\[patch\\.crates-io\\]/a biome_rowan = { git = \"https://github.com/biomejs/biome\", branch = \"main\" }' Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "sed -i '/\\[patch\\.crates-io\\]/,+3d' Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build --no-default-features",
    "sed -i '/biome_json_syntax/d' Cargo.toml && sed -i '/biome_rowan/d' Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build --no-default-features",
    "cargo tree -i biome_json_syntax",
    "echo '[patch.crates-io]\nbiome_json_syntax = { git = \"https://github.com/biomejs/biome\", branch = \"main\" }' >> Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build",
    "sed -i '/\\[patch\\.crates-io\\]/a biome_rowan = { git = \"https://github.com/biomejs/biome\", branch = \"main\" }' Cargo.toml && cargo clean && RUSTFLAGS=\"--cfg=procmacro2_semver_exempt\" PROTOC_ARGS=\"--experimental_allow_proto3_optional\" cargo build"
  ],
  "test_commands": [],
  "duration": 45,
  "completed": null,
  "exception": "Launch failed"
}
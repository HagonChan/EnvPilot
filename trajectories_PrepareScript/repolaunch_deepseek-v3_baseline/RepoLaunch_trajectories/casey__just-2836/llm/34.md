##### LLM INPUT #####
================================ System Message ================================

You are a developer. Your task is to install dependencies and set up a environment that is able to run the tests of the project.

- You start with an initial Docker container based on ubuntu:22.04.
- You interact with a Bash session inside this container.
- Project files are located in /testbed within the container, and your current working directory of bash is already set to /testbed.
- No need to clone the project again.

The final objective is to successfully run the tests of the project.


### Rust-Specific Instructions:
- Use `cargo build` to build the project
- Use `cargo test` to run tests
- Use `cargo check` for faster compilation checks
- Install system dependencies if needed (check Cargo.toml for sys crates)
- Consider using `cargo install` for binary dependencies


================================ Human Message =================================


You run in a loop of Thought, Action, Observation.
At the end of the loop you should use Action to stop the loop.

Use Thought to describe your thoughts about the question you have been asked.
Use Action to run one of the actions available to you.
Observation will be the result of running those actions.
> Important Note: Each step, reply with only **one** (Thought, Action) pair.
> Important Note: Do not reply **Observation**, it will be provided by the system.

Your available actions are:

    Command: run a command in the bash, reply with following format, your command should not require sudo or interactive input:
        <command>bash command</command>
        e.g. install build-essential: <command>apt-get install -y build-essential</command>
        e.g. view file content: <command>cat README.md</command>
    Search: search the web for if you need some information, generate query and reply with following format:
        <search>the search query</search>
        e.g. <search>how to fix 'No module named setuptools'</search>
        e.g. <search>how to install python3 on ubuntu</search>
        e.g. <search>how to create development environment for python3</search>
    Stop: stop the setup loop once you think the setup is complete, reply with following format:
        <stop></stop>
    

Observation will be the result of running those actions.


Project Structure: the structure of the project, including files and directories.
Related Files: the content of related files of the project that may help you understand the project.
Thought: you should always think about what to do
Action: <command>your bash command here</command> or <search>your search query</search> or other actions available
Observation: the result of the action
... (this Thought/Action/Observation can repeat N times) ...
Thought: I think the setup should be fine
Action: <stop>stop the setup</stop>
Answer: the final result

Begin!
Project Structure: ğŸ“‚ 
/home/hagon/Project/msb/EnvAgent/git/EnvBench/baseline_RepoLaunch/SWE-bench-Live/laun
ch/playground/EnvPilot_baseline/casey__just-2836/repo
â”£â”â” ğŸ“‚ .github
â”£â”â” ğŸ“‚ bin
â”£â”â” ğŸ“‚ book
â”£â”â” ğŸ“‚ contrib
â”£â”â” ğŸ“‚ crates
â”£â”â” ğŸ“‚ examples
â”£â”â” ğŸ“‚ fuzz
â”£â”â” ğŸ“‚ src
â”£â”â” ğŸ“‚ tests
â”£â”â” ğŸ“‚ www
â”£â”â” ğŸ“„ .editorconfig
â”£â”â” ğŸ“„ Cargo.lock
â”£â”â” ğŸ“„ Cargo.toml
â”£â”â” ğŸ“„ CHANGELOG.md
â”£â”â” ğŸ“„ clippy.toml
â”£â”â” ğŸ“„ CONTRIBUTING.md
â”£â”â” ğŸ“„ crates-io-readme.md
â”£â”â” ğŸ“„ GRAMMAR.md
â”£â”â” ğŸ“„ icon.png
â”£â”â” ğŸ“„ justfile
â”£â”â” ğŸ“„ LICENSE
â”£â”â” ğŸ“„ README.md
â”£â”â” ğŸ“„ README.ä¸­æ–‡.md
â”£â”â” ğŸ“„ rustfmt.toml
â”£â”â” ğŸ“„ screenshot.png
â”—â”â” ğŸ“„ Vagrantfile

Related Files: ------ BEGIN RELATED FILES ------
File: .github/workflows/ci.yaml
```
name: CI

on:
  pull_request:
    branches:
    - '*'
  push:
    branches:
    - master

defaults:
  run:
    shell: bash

env:
  RUSTFLAGS: --deny warnings

jobs:
  lint:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - uses: Swatinem/rust-cache@v2

    - name: Clippy
      run: cargo clippy --all --all-targets

    - name: Format
      run: cargo fmt --all -- --check

    - name: Install Dependencies
      run: |
        sudo apt-get update
        sudo apt-get install ripgrep shellcheck

    - name: Check for Forbidden Words
      run: ./bin/forbid

    - name: Check Install Script
      run: shellcheck www/install.sh

  msrv:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - uses: actions-rust-lang/setup-rust-toolchain@v1
      with:
        toolchain: 1.77

    - uses: Swatinem/rust-cache@v2

    - name: Check
      run: cargo check

  pages:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - uses: Swatinem/rust-cache@v2

    - name: Install `mdbook`
      run: cargo install mdbook

    - name: Install `mdbook-linkcheck`
      run: |
        mkdir -p mdbook-linkcheck
        cd mdbook-linkcheck
        wget https://github.com/Michael-F-Bryan/mdbook-linkcheck/releases/latest/download/mdbook-linkcheck.x86_64-unknown-linux-gnu.zip
        unzip mdbook-linkcheck.x86_64-unknown-linux-gnu.zip
        chmod +x mdbook-linkcheck
        pwd >> $GITHUB_PATH

    - name: Build book
      run: |
        cargo run --package generate-book
        mdbook build book/en
        mdbook build book/zh

  test:
    strategy:
      matrix:
        os:
        - ubuntu-latest
        - macos-latest
        - windows-latest

    runs-on: ${{matrix.os}}

    steps:
    - uses: actions/checkout@v4

    - name: Remove Broken WSL bash executable
      if: ${{ matrix.os == 'windows-latest' }}
      shell: cmd
      run: |
        takeown /F C:\Windows\System32\bash.exe
        icacls C:\Windows\System32\bash.exe /grant administrators:F
        del C:\Windows\System32\bash.exe

    - uses: Swatinem/rust-cache@v2

    - name: Test
      run: cargo test --all

    - name: Test install.sh
      run: |
        bash www/install.sh --to /tmp --tag 1.25.0
        /tmp/just --version

```
File: Cargo.toml
```
[package]
name = "just"
version = "1.42.4"
authors = ["Casey Rodarmor <casey@rodarmor.com>"]
autotests = false
categories = ["command-line-utilities", "development-tools"]
description = "ğŸ¤– Just a command runner"
edition = "2021"
exclude = ["/book", "/icon.png", "/screenshot.png", "/www"]
homepage = "https://github.com/casey/just"
keywords = ["command-line", "task", "runner", "development", "utility"]
license = "CC0-1.0"
readme = "crates-io-readme.md"
repository = "https://github.com/casey/just"
rust-version = "1.77"

[workspace]
members = [".", "crates/*"]

[dependencies]
ansi_term = "0.12.0"
blake3 = { version = "1.5.0", features = ["rayon", "mmap"] }
camino = "1.0.4"
chrono = "0.4.38"
clap = { version = "4.0.0", features = ["derive", "env", "wrap_help"] }
clap_complete = "=4.5.48"
clap_mangen = "0.2.20"
ctrlc = { version = "3.1.1", features = ["termination"] }
derive-where = "1.2.7"
dirs = "6.0.0"
dotenvy = "0.15"
edit-distance = "2.0.0"
heck = "0.5.0"
is_executable = "1.0.4"
lexiclean = "0.0.1"
libc = "0.2.0"
num_cpus = "1.15.0"
once_cell = "1.19.0"
percent-encoding = "2.3.1"
rand = "0.9.0"
regex = "1.10.4"
rustversion = "1.0.18"
semver = "1.0.20"
serde = { version = "1.0.130", features = ["derive", "rc"] }
serde_json = "1.0.68"
sha2 = "0.10"
shellexpand = "3.1.0"
similar = { version = "2.1.0", features = ["unicode"] }
snafu = "0.8.0"
strum = { version = "0.27.1", features = ["derive"] }
target = "2.0.0"
tempfile = "3.0.0"
typed-arena = "2.0.1"
unicode-width = "0.2.0"
uuid = { version = "1.0.0", features = ["v4"] }

[target.'cfg(unix)'.dependencies]
nix = { version = "0.30.1", features = ["user"] }

[target.'cfg(windows)'.dependencies]
ctrlc = { version = "3.1.1", features = ["termination"] }

[dev-dependencies]
executable-path = "1.0.0"
pretty_assertions = "1.0.0"
temptree = "0.2.0"
which = "8.0.0"

[lints.rust]
unexpected_cfgs = { level = "warn", check-cfg = ['cfg(fuzzing)'] }

[lints.clippy]
all = { level = "deny", priority = -1 }
arbitrary-source-item-ordering = "deny"
enum_glob_use = "allow"
ignore_without_reason = "allow"
needless_pass_by_value = "allow"
pedantic = { level = "deny", priority = -1 }
similar_names = "allow"
struct_excessive_bools = "allow"
struct_field_names = "allow"
too_many_arguments = "allow"
too_many_lines = "allow"
type_complexity = "allow"
undocumented_unsafe_blocks = "deny"
unnecessary_wraps = "allow"
wildcard_imports = "allow"

[lib]
doctest = false

[[bin]]
path = "src/main.rs"
name = "just"
test = false

# The public documentation is minimal and doesn't change between
# platforms, so we only build them for linux on docs.rs to save
# their build machines some cycles.
[package.metadata.docs.rs]
targets = ["x86_64-unknown-linux-gnu"]

[profile.release]
lto = true
codegen-units = 1

[[test]]
name = "integration"
path = "tests/lib.rs"

```
File: README.ä¸­æ–‡.md
```
â†–ï¸ ç›®å½•

<h1 align="center"><code>just</code></h1>

<div align="center">
  <a href="https://crates.io/crates/just">
    <img src="https://img.shields.io/crates/v/just.svg" alt="crates.io version">
  </a>
  <a href="https://github.com/casey/just/actions">
    <img src="https://github.com/casey/just/actions/workflows/ci.yaml/badge.svg" alt="build status">
  </a>
  <a href="https://github.com/casey/just/releases">
    <img src="https://img.shields.io/github/downloads/casey/just/total.svg" alt="downloads">
  </a>
  <a href="https://discord.gg/ezYScXR">
    <img src="https://img.shields.io/discord/695580069837406228?logo=discord" alt="chat on discord">
  </a>
  <a href="mailto:casey@rodarmor.com?subject=Thanks%20for%20Just!">
    <img src="https://img.shields.io/badge/Say%20Thanks-!-1EAEDB.svg" alt="say thanks">
  </a>
</div>
<br>

`just` ä¸ºæ‚¨æä¾›ä¸€ç§ä¿å­˜å’Œè¿è¡Œé¡¹ç›®ç‰¹æœ‰å‘½ä»¤çš„ä¾¿æ·æ–¹å¼ã€‚

æœ¬æŒ‡å—åŒæ—¶ä¹Ÿå¯ä»¥ä»¥ [ä¹¦](https://just.systems/man/zh/) çš„å½¢å¼æä¾›åœ¨çº¿é˜…è¯»ã€‚

å‘½ä»¤ï¼Œåœ¨æ­¤ä¹Ÿç§°ä¸ºé…æ–¹ï¼Œå­˜å‚¨åœ¨ä¸€ä¸ªåä¸º `justfile` çš„æ–‡ä»¶ä¸­ï¼Œå…¶è¯­æ³•å— `make` å¯å‘ï¼š

![screenshot](https://raw.githubusercontent.com/casey/just/master/screenshot.png)

ç„¶åä½ å¯ä»¥ç”¨ `just RECIPE` è¿è¡Œå®ƒä»¬ï¼š

```sh
$ just test-all
cc *.c -o main
./test --all
Yay, all your tests passed!
```

`just` æœ‰å¾ˆå¤šå¾ˆæ£’çš„ç‰¹æ€§ï¼Œè€Œä¸”ç›¸æ¯” `make` æœ‰å¾ˆå¤šæ”¹è¿›ï¼š

- `just` æ˜¯ä¸€ä¸ªå‘½ä»¤è¿è¡Œå™¨ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ„å»ºç³»ç»Ÿï¼Œæ‰€ä»¥å®ƒé¿å…äº†è®¸å¤š [`make` çš„å¤æ‚æ€§å’Œç‰¹å¼‚æ€§](#just-é¿å…äº†-make-çš„å“ªäº›ç‰¹å¼‚æ€§)ã€‚ä¸éœ€è¦ `.PHONY` é…æ–¹!

- æ”¯æŒ Linuxã€MacOS å’Œ Windowsï¼Œè€Œä¸”æ— éœ€é¢å¤–çš„ä¾èµ–ã€‚(å°½ç®¡å¦‚æœä½ çš„ç³»ç»Ÿæ²¡æœ‰ `sh`ï¼Œä½ éœ€è¦ [é€‰æ‹©ä¸€ä¸ªä¸åŒçš„ Shell](#shell))ã€‚

- é”™è¯¯å…·ä½“ä¸”å¯Œæœ‰å‚è€ƒä»·å€¼ï¼Œè¯­æ³•é”™è¯¯å°†ä¼šä¸äº§ç”Ÿå®ƒä»¬çš„ä¸Šä¸‹æ–‡ä¸€èµ·è¢«æŠ¥å‘Šã€‚

- é…æ–¹å¯ä»¥æ¥å— [å‘½ä»¤è¡Œå‚æ•°](#é…æ–¹å‚æ•°)ã€‚

- é”™è¯¯ä¼šå°½å¯èƒ½è¢«é™æ€åœ°è§£å†³ã€‚æœªçŸ¥çš„é…æ–¹å’Œå¾ªç¯ä¾èµ–å…³ç³»ä¼šåœ¨è¿è¡Œä¹‹å‰è¢«æŠ¥å‘Šã€‚

- `just` å¯ä»¥ [åŠ è½½`.env`æ–‡ä»¶](#ç¯å¢ƒå˜é‡åŠ è½½)ï¼Œç®€åŒ–ç¯å¢ƒå˜é‡æ³¨å…¥ã€‚

- é…æ–¹å¯ä»¥åœ¨ [å‘½ä»¤è¡Œä¸­åˆ—å‡º](#åˆ—å‡ºå¯ç”¨çš„é…æ–¹)ã€‚

- å‘½ä»¤è¡Œè‡ªåŠ¨è¡¥å…¨è„šæœ¬ [æ”¯æŒå¤§å¤šæ•°æµè¡Œçš„ Shell](#shell-è‡ªåŠ¨è¡¥å…¨è„šæœ¬)ã€‚

- é…æ–¹å¯ä»¥ç”¨ [ä»»æ„è¯­è¨€](#ç”¨å…¶ä»–è¯­è¨€ä¹¦å†™é…æ–¹) ç¼–å†™ï¼Œå¦‚ Python æˆ– NodeJSã€‚

- `just` å¯ä»¥ä»ä»»ä½•å­ç›®å½•ä¸­è°ƒç”¨ï¼Œè€Œä¸ä»…ä»…æ˜¯åŒ…å« `justfile` çš„ç›®å½•ã€‚

- ä¸ä»…å¦‚æ­¤ï¼Œè¿˜æœ‰ [æ›´å¤š](https://just.systems/man/zh/)ï¼

å¦‚æœä½ åœ¨ä½¿ç”¨ `just` æ–¹é¢éœ€è¦å¸®åŠ©ï¼Œè¯·éšæ—¶åˆ›å»ºä¸€ä¸ª Issue æˆ–åœ¨ [Discord](https://discord.gg/ezYScXR) ä¸Šä¸æˆ‘è”ç³»ã€‚æˆ‘ä»¬éšæ—¶æ¬¢è¿åŠŸèƒ½è¯·æ±‚å’Œé”™è¯¯æŠ¥å‘Šï¼

å®‰è£…
------------

### é¢„å¤‡çŸ¥è¯†

`just` åº”è¯¥å¯ä»¥åœ¨ä»»ä½•æœ‰åˆé€‚çš„ `sh` çš„ç³»ç»Ÿä¸Šè¿è¡Œï¼ŒåŒ…æ‹¬ Linuxã€MacOS å’Œ BSDã€‚

åœ¨ Windows ä¸Šï¼Œ`just` å¯ä»¥ä½¿ç”¨ [Git for Windows](https://git-scm.com)ã€[GitHub Desktop](https://desktop.github.com) æˆ– [Cygwin](http://www.cygwin.com) æ‰€æä¾›çš„ `sh`ã€‚

å¦‚æœä½ ä¸æ„¿æ„å®‰è£… `sh`ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ `shell` è®¾ç½®æ¥æŒ‡å®šä½ è¦ä½¿ç”¨çš„ Shellã€‚

æ¯”å¦‚ PowerShellï¼š

```just
# ä½¿ç”¨ PowerShell æ›¿ä»£ sh:
set shell := ["powershell.exe", "-c"]

hello:
  Write-Host "Hello, world!"
```

â€¦æˆ–è€… `cmd.exe`:

```just
# ä½¿ç”¨ cmd.exe æ›¿ä»£ sh:
set shell := ["cmd.exe", "/c"]

list:
  dir
```

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°æ¥è®¾ç½® Shellã€‚ä¾‹å¦‚ï¼Œè‹¥è¦ä½¿ç”¨ PowerShell ä¹Ÿå¯ä»¥ç”¨ `--shell powershell.exe --shell-arg -c` å¯åŠ¨`just`ã€‚

(PowerShell é»˜è®¤å®‰è£…åœ¨ Windows 7 SP1 å’Œ Windows Server 2008 R2 S1 åŠæ›´é«˜ç‰ˆæœ¬ä¸Šï¼Œè€Œ `cmd.exe` ç›¸å½“éº»çƒ¦ï¼Œæ‰€ä»¥ PowerShell è¢«æ¨èç»™å¤§å¤šæ•° Windows ç”¨æˆ·)

### å®‰è£…åŒ…

<table>
  <thead>
    <tr>
      <th>æ“ä½œç³»ç»Ÿ</th>
      <th>åŒ…ç®¡ç†å™¨</th>
      <th>å®‰è£…åŒ…</th>
      <th>å‘½ä»¤</th>
    </tr>
  </thead>
  <tbody>
  <tr>
    <td><a href="https://forge.rust-lang.org/release/platform-support.html">Various</a></td>
    <td><a href="https://www.rust-lang.org">Cargo</a></td>
    <td><a href="https://crates.io/crates/just">just</a></td>
    <td><code>cargo install just</code></td>
  </tr>
  <tr>
    <td><a href="https://en.wikipedia.org/wiki/Microsoft_Windows">Microsoft Windows</a></td>
    <td><a href="https://scoop.sh">Scoop</a></td>
    <td><a href="https://github.com/ScoopInstaller/Main/blob/master/bucket/just.json">just</a></td>
    <td><code>scoop install just</code></td>
  </tr>
  <tr>
    <td><a href="https://docs.brew.sh/Installation">Various</a></td>
    <td><a href="https://brew.sh">Homebrew</a></td>
    <td><a href="https://formulae.brew.sh/formula/just">just</a></td>
    <td><code>brew install just</code></td>
  </tr>
  <tr>
    <td><a href="https://en.wikipedia.org/wiki/MacOS">macOS</a></td>
    <td><a href="https://www.macports.org">MacPorts</a></td>
    <td><a href="https://ports.macports.org/port/just/summary">just</a></td>
    <td><code>port install just</code></td>
  </tr>
  <tr>
    <td><a href="https://www.archlinux.org">Arch Linux</a></td>
    <td><a href="https://wiki.archlinux.org/title/Pacman">pacman</a></td>
    <td><a href="https://archlinux.org/packages/community/x86_64/just/">just</a></td>
    <td><code>pacman -S just</code></td>
  </tr>
  <tr>
    <td><a href="https://nixos.org/download.html#download-nix">Various</a></td>
    <td><a href="https://nixos.org/nix/">Nix</a></td>
    <td><a href="https://github.com/NixOS/nixpkgs/blob/master/pkgs/by-name/ju/just/package.nix">just</a></td>
    <td><code>nix-env -iA nixpkgs.just</code></td>
  </tr>
  <tr>
    <td><a href="https://nixos.org/nixos/">NixOS</a></td>
    <td><a href="https://nixos.org/nix/">Nix</a></td>
    <td><a href="https://github.com/NixOS/nixpkgs/blob/master/pkgs/by-name/ju/just/package.nix">just</a></td>
    <td><code>nix-env -iA nixos.just</code></td>
  </tr>
  <tr>
    <td><a href="https://getsol.us">Solus</a></td>
    <td><a href="https://getsol.us/articles/package-management/basics/en">eopkg</a></td>
    <td><a href="https://dev.getsol.us/source/just/">just</a></td>
    <td><code>eopkg install just</code></td>
  </tr>
  <tr>
    <td><a href="https://voidlinux.org">Void Linux</a></td>
    <td><a href="https://wiki.voidlinux.org/XBPS">XBPS</a></td>
    <td><a href="https://github.com/void-linux/void-packages/blob/master/srcpkgs/just/template">just</a></td>
    <td><code>xbps-install -S just</code></td>
  </tr>
  <tr>
    <td><a href="https://www.freebsd.org">FreeBSD</a></td>
    <td><a href="https://www.freebsd.org/doc/handbook/pkgng-intro.html">pkg</a></td>
    <td><a href="https://www.freshports.org/deskutils/just/">just</a></td>
    <td><code>pkg install just</code></td>
  </tr>
  <tr>
    <td><a href="https://alpinelinux.org">Alpine Linux</a></td>
    <td><a href="https://wiki.alpinelinux.org/wiki/Alpine_Linux_package_management">apk-tools</a></td>
    <td><a href="https://pkgs.alpinelinux.org/package/edge/community/x86_64/just">just</a></td>
    <td><code>apk add just</code></td>
  </tr>
  <tr>
    <td><a href="https://getfedora.org">Fedora Linux</a></td>
    <td><a href="https://dnf.readthedocs.io/en/latest/">DNF</a></td>
    <td><a href="https://src.fedoraproject.org/rpms/rust-just">just</a></td>
    <td><code>dnf install just</code></td>
  </tr>
  <tr>
    <td><a href="https://www.gentoo.org">Gentoo Linux</a></td>
    <td><a href="https://wiki.gentoo.org/wiki/Portage">Portage</a></td>
    <td><a href="https://github.com/gentoo-mirror/guru/tree/master/sys-devel/just">guru/sys-devel/just</a></td>
    <td>
      <code>eselect repository enable guru</code><br>
      <code>emerge --sync guru</code><br>
      <code>emerge sys-devel/just</code>
    </td>
  </tr>
  <tr>
    <td><a href="https://docs.conda.io/en/latest/miniconda.html#system-requirements">Various</a></td>
    <td><a href="https://docs.conda.io/projects/conda/en/latest/index.html">Conda</a></td>
    <td><a href="https://anaconda.org/conda-forge/just">just</a></td>
    <td><code>conda install -c conda-forge just</code></td>
  </tr>
  <tr>
    <td><a href="https://en.wikipedia.org/wiki/Microsoft_Windows">Microsoft Windows</a></td>
    <td><a href="https://chocolatey.org">Chocolatey</a></td>
    <td><a href="https://github.com/michidk/just-choco">just</a></td>
    <td><code>choco install just</code></td>
  </tr>
  <tr>
    <td><a href="https://snapcraft.io/docs/installing-snapd">Various</a></td>
    <td><a href="https://snapcraft.io">Snap</a></td>
    <td><a href="https://snapcraft.io/just">just</a></td>
    <td><code>snap install --edge --classic just</code></td>
  </tr>
  <tr>
    <td><a href="https://github.com/casey/just/releases">Various</a></td>
    <td><a href="https://asdf-vm.com">asdf</a></td>
    <td><a href="https://github.com/olofvndrhr/asdf-just">just</a></td>
    <td>
      <code>asdf plugin add just</code><br>
      <code>asdf install just &lt;version&gt;</code>
    </td>
  </tr>
  <tr>
    <td><a href="https://packaging.python.org/tutorials/installing-packages">Various</a></td>
    <td><a href="https://pypi.org">PyPI</a></td>
    <td><a href="https://pypi.org/project/rust-just">rust-just</a></td>
    <td>
      <code>pipx install rust-just</code><br>
    </td>
  </tr>
  <tr>
    <td><a href="https://docs.npmjs.com/packages-and-modules/getting-packages-from-the-registry">Various</a></td>
    <td><a href="https://www.npmjs.com">npm</a></td>
    <td><a href="https://www.npmjs.com/package/rust-just">rust-just</a></td>
    <td>
      <code>npm install -g rust-just</code><br>
    </td>
  </tr>
  <tr>
    <td><a href="https://debian.org">Debian</a> and <a href="https://ubuntu.com">Ubuntu</a> derivatives</td>
    <td><a href="https://mpr.makedeb.org">MPR</a></td>
    <td><a href="https://mpr.makedeb.org/packages/just">just</a></td>
    <td>
      <code>git clone 'https://mpr.makedeb.org/just'</code><br>
      <code>cd just</code><br>
      <code>makedeb -si</code>
    </td>
  </tr>
  <tr>
    <td><a href="https://debian.org">Debian</a> and <a href="https://ubuntu.com">Ubuntu</a> derivatives</td>
    <td><a href="https://docs.makedeb.org/prebuilt-mpr">Prebuilt-MPR</a></td>
    <td><a href="https://mpr.makedeb.org/packages/just">just</a></td>
    <td>
      <sup><b>You must have the <a href="https://docs.makedeb.org/prebuilt-mpr/getting-started/#setting-up-the-repository">Prebuilt-MPR set up</a> on your system in order to run this command.</b></sup><br>
      <code>sudo apt install just</code>
    </td>
  </tr>
  </tbody>
</table>

![package version table](https://repology.org/badge/vertical-allrepos/just.svg)

### é¢„åˆ¶äºŒè¿›åˆ¶æ–‡ä»¶

Linuxã€MacOS å’Œ Windows çš„é¢„åˆ¶äºŒè¿›åˆ¶æ–‡ä»¶å¯ä»¥åœ¨ [å‘å¸ƒé¡µ](https://github.com/casey/just/releases) ä¸Šæ‰¾åˆ°ã€‚

ä½ ä¹Ÿå¯ä»¥åœ¨ Linuxã€MacOS æˆ– Windows ä¸Šä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æ¥ä¸‹è½½æœ€æ–°çš„ç‰ˆæœ¬ï¼Œåªéœ€å°† `DEST` æ›¿æ¢ä¸ºä½ æƒ³å®‰è£… `just` çš„ç›®å½•å³å¯ï¼š

```sh
curl --proto '=https' --tlsv1.2 -sSf https://just.systems/install.sh | bash -s -- --to DEST
```

ä¾‹å¦‚ï¼Œå®‰è£… `just` åˆ° `~/bin` ç›®å½•ï¼š

```sh
# åˆ›å»º ~/bin
mkdir -p ~/bin

# ä¸‹è½½å¹¶è§£å‹ just åˆ° ~/bin/just
curl --proto '=https' --tlsv1.2 -sSf https://just.systems/install.sh | bash -s -- --to ~/bin

# åœ¨ Shell æœç´¢å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„ä¸­æ·»åŠ `~/bin`
# è¿™ä¸€è¡Œåº”è¯¥è¢«æ·»åŠ åˆ°ä½ çš„ Shell åˆå§‹åŒ–æ–‡ä»¶ä¸­ï¼Œe.g. `~/.bashrc` æˆ–è€… `~/.zshrc`ï¼š
export PATH="$PATH:$HOME/bin"

# ç°åœ¨ just åº”è¯¥å°±å¯ä»¥æ‰§è¡Œäº†
just --help
```

### GitHub Actions

ä½¿ç”¨ [extractions/setup-just](https://github.com/extractions/setup-just):

```yaml
- uses: extractions/setup-just@v1
  with:
    just-version: 0.8 # optional semver specification, otherwise latest
```

ä½¿ç”¨ [taiki-e/install-action](https://github.com/taiki-e/install-action):

```yaml
- uses: taiki-e/install-action@just
```

### å‘å¸ƒ RSS è®¢é˜…

`just` çš„å‘å¸ƒ [RSS è®¢é˜…](https://en.wikipedia.org/wiki/RSS) å¯ä»¥åœ¨ [è¿™é‡Œ](https://github.com/casey/just/releases.atom) æ‰¾åˆ°ã€‚

### Node.js å®‰è£…

[just-install](https://npmjs.com/package/just-install) å¯ç”¨äºåœ¨ Node.js åº”ç”¨ç¨‹åºä¸­è‡ªåŠ¨å®‰è£… `just`ã€‚

`just` æ˜¯ä¸€ä¸ªå¾ˆèµçš„æ¯” npm è„šæœ¬æ›´å¼ºå¤§çš„æ›¿ä»£å“ã€‚å¦‚æœä½ æƒ³åœ¨ Node.js åº”ç”¨ç¨‹åºçš„ä¾èµ–ä¸­åŒ…å« `just`ï¼Œå¯ä»¥é€šè¿‡ `just-install`ï¼Œå®ƒå°†åœ¨æœ¬æœºå®‰è£…ä¸€ä¸ªé’ˆå¯¹ç‰¹å®šå¹³å°çš„äºŒè¿›åˆ¶æ–‡ä»¶ä½œä¸º `npm install` å®‰è£…ç»“æœçš„ä¸€éƒ¨åˆ†ã€‚è¿™æ ·å°±ä¸éœ€è¦æ¯ä¸ªå¼€å‘è€…ä½¿ç”¨ä¸Šè¿°æåˆ°çš„æ­¥éª¤ç‹¬ç«‹å®‰è£… `just`ã€‚å®‰è£…åï¼Œ`just` å‘½ä»¤å°†åœ¨ npm è„šæœ¬æˆ– npx ä¸­å·¥ä½œã€‚è¿™å¯¹é‚£äº›æƒ³è®©é¡¹ç›®çš„è®¾ç½®è¿‡ç¨‹å°½å¯èƒ½ç®€å•çš„å›¢é˜Ÿæ¥è¯´æ˜¯å¾ˆæœ‰ç”¨çš„ã€‚

æƒ³äº†è§£æ›´å¤šä¿¡æ¯, è¯·æŸ¥çœ‹ [just-install è¯´æ˜æ–‡ä»¶](https://github.com/brombal/just-install#readme)ã€‚

å‘åå…¼å®¹æ€§
-----------------------

éšç€ 1.0 ç‰ˆæœ¬çš„å‘å¸ƒï¼Œ`just` çªå‡ºå¯¹å‘åå…¼å®¹æ€§å’Œç¨³å®šæ€§çš„å¼ºçƒˆæ‰¿è¯ºã€‚

æœªæ¥çš„ç‰ˆæœ¬å°†ä¸ä¼šå¼•å…¥å‘åä¸å…¼å®¹çš„å˜åŒ–ï¼Œä¸ä¼šä½¿ç°æœ‰çš„ `justfile` åœæ­¢å·¥ä½œï¼Œæˆ–ç ´åå‘½ä»¤è¡Œç•Œé¢çš„æ­£å¸¸è°ƒç”¨ã€‚

ç„¶è€Œï¼Œè¿™å¹¶ä¸æ’é™¤ä¿®å¤å…¨é¢çš„é”™è¯¯ï¼Œå³ä½¿è¿™æ ·åšå¯èƒ½ä¼šç ´åä¾èµ–å…¶è¡Œä¸ºçš„ `justfiles`ã€‚

æ°¸è¿œä¸ä¼šæœ‰ä¸€ä¸ª `just` 2.0ã€‚ä»»ä½•ç†æƒ³çš„å‘åå…¼å®¹çš„å˜åŒ–éƒ½æ˜¯åœ¨æ¯ä¸ª `justfile` çš„åŸºç¡€ä¸Šé€‰æ‹©æ€§åŠ å…¥çš„ï¼Œæ‰€ä»¥ç”¨æˆ·å¯ä»¥åœ¨ä»–ä»¬çš„é—²æš‡æ—¶é—´è¿›è¡Œè¿ç§»ã€‚

è¿˜æ²¡æœ‰å‡†å¤‡å¥½ç¨³å®šåŒ–çš„åŠŸèƒ½å°†åœ¨ `--unstable` æ ‡å¿—åè¢«é€‰æ‹©æ€§å¯ç”¨ã€‚ç”± `--unstable` å¯ç”¨çš„åŠŸèƒ½å¯èƒ½ä¼šåœ¨ä»»ä½•æ—¶å€™ä»¥ä¸å…¼å®¹çš„æ–¹å¼å‘ç”Ÿå˜åŒ–ã€‚

ç¼–è¾‘å™¨æ”¯æŒ
--------------

`justfile` çš„è¯­æ³•ä¸ `make` éå¸¸æ¥è¿‘ï¼Œä½ å¯ä»¥è®©ä½ çš„ç¼–è¾‘å™¨å¯¹ `just` ä½¿ç”¨ `make` è¯­æ³•é«˜äº®ã€‚

### Vim å’Œ Neovim

#### `vim-just`

[vim-just](https://github.com/NoahTheDuke/vim-just) æ’ä»¶å¯ä»¥ä¸º vim æä¾› `justfile` è¯­æ³•é«˜äº®æ˜¾ç¤ºã€‚

ä½ å¯ä»¥ç”¨ä½ å–œæ¬¢çš„è½¯ä»¶åŒ…ç®¡ç†å™¨å®‰è£…å®ƒï¼Œå¦‚ [Plug](https://github.com/junegunn/vim-plug)ï¼š

```vim
call plug#begin()

Plug 'NoahTheDuke/vim-just'

call plug#end()
```

æˆ–è€…ä½¿ç”¨ Vim çš„å†…ç½®åŒ…æ”¯æŒï¼š

```sh
mkdir -p ~/.vim/pack/vendor/start
cd ~/.vim/pack/vendor/start
git clone https://github.com/NoahTheDuke/vim-just.git
```

#### `tree-sitter-just`

[tree-sitter-just](https://github.com/IndianBoy42/tree-sitter-just) æ˜¯ä¸€ä¸ªé’ˆå¯¹ Neovim çš„ [Nvim Treesitter](https://github.com/nvim-treesitter/nvim-treesitter) æ’ä»¶ã€‚

#### Makefile è¯­æ³•é«˜äº®

Vim å†…ç½®çš„ makefile è¯­æ³•é«˜äº®å¯¹ `justfile` æ¥è¯´å¹¶ä¸å®Œç¾ï¼Œä½†æ€»æ¯”æ²¡æœ‰å¥½ã€‚ä½ å¯ä»¥æŠŠä»¥ä¸‹å†…å®¹æ”¾åœ¨ `~/.vim/filetype.vim` ä¸­ï¼š

```vimscript
if exists("did_load_filetypes")
  finish
endif

augroup filetypedetect
  au BufNewFile,BufRead justfile setf make
augroup END
```
æˆ–è€…åœ¨å•ä¸ª `justfile` ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œä»¥åœ¨æ¯ä¸ªæ–‡ä»¶çš„åŸºç¡€ä¸Šå¯ç”¨ `make` æ¨¡å¼ï¼š

```text
# vim: set ft=make :
```

### Emacs

[just-mode](https://github.com/leon-barrett/just-mode.el) å¯ä»¥ä¸º `justfile` æä¾›è¯­æ³•é«˜äº®å’Œè‡ªåŠ¨ç¼©è¿›ã€‚å®ƒå¯ä»¥åœ¨ [MELPA](https://melpa.org/) ä¸Šé€šè¿‡ [just-mode](https://melpa.org/#/just-mode) è·å¾—ã€‚

[justl](https://github.com/psibi/justl.el) æä¾›äº†æ‰§è¡Œå’Œåˆ—å‡ºé…æ–¹çš„å‘½ä»¤ã€‚

ä½ å¯ä»¥åœ¨ä¸€ä¸ªå•ç‹¬çš„ `justfile` ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼Œä»¥ä¾¿å¯¹æ¯ä¸ªæ–‡ä»¶å¯ç”¨ `make` æ¨¡å¼ï¼š

```text
# Local Variables:
# mode: makefile
# End:
```

### Visual Studio Code

ç”± [skellock](https://github.com/skellock) ä¸º VS Code æä¾›çš„æ‰©å±• [å¯åœ¨æ­¤è·å¾—](https://marketplace.visualstudio.com/items?itemName=skellock.just)ï¼ˆ[ä»“åº“](https://github.com/skellock/vscode-just)ï¼‰ï¼Œä½†æ˜¯å¼€å‘å·²ç»ä¸æ´»è·ƒäº†ã€‚

ä½ å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…å®ƒï¼š

```sh
code --install-extension skellock.just
```

æœ€è¿‘ç”± [sclu1034](https://github.com/sclu1034) æä¾›çš„ä¸€ä¸ªæ›´æ´»è·ƒçš„åˆ†å‰å¯ä»¥åœ¨ [è¿™é‡Œ](https://github.com/sclu1034/vscode-just) æ‰¾åˆ°ã€‚

### JetBrains IDEs

ç”± [linux_china](https://github.com/linux-china) ä¸º JetBrains IDEs æä¾›çš„æ’ä»¶å¯ [ç”±æ­¤è·å¾—](https://plugins.jetbrains.com/plugin/18658-just)ã€‚

### Kakoune

Kakoune å·²ç»å†…ç½®æ”¯æŒ `justfile` è¯­æ³•é«˜äº®ï¼Œè¿™è¦æ„Ÿè°¢ TeddyDDã€‚

### Sublime Text

ç”± [nk9](https://github.com/nk9) æä¾›çš„ [Just åŒ…](https://github.com/nk9/just_sublime) æ”¯æŒ `just` è¯­æ³•é«˜äº®ï¼ŒåŒæ—¶è¿˜æœ‰å…¶å®ƒå·¥å…·ï¼Œè¿™äº›å¯ä»¥åœ¨ [PackageControl](https://packagecontrol.io/packages/Just) ä¸Šæ‰¾åˆ°ã€‚

### å…¶å®ƒç¼–è¾‘å™¨

æ¬¢è¿ç»™æˆ‘å‘é€å¿…è¦çš„å‘½ä»¤ï¼Œä»¥ä¾¿åœ¨ä½ é€‰æ‹©çš„ç¼–è¾‘å™¨ä¸­å®ç°è¯­æ³•é«˜äº®ï¼Œè¿™æ ·æˆ‘å°±å¯ä»¥æŠŠå®ƒä»¬æ”¾åœ¨è¿™é‡Œã€‚

å¿«é€Ÿå¼€å§‹
-----------

å‚è§ [å®‰è£…éƒ¨åˆ†](#å®‰è£…) äº†è§£å¦‚ä½•åœ¨ä½ çš„ç”µè„‘ä¸Šå®‰è£… `just`ã€‚è¯•ç€è¿è¡Œ `just --version` ä»¥ç¡®ä¿å®ƒè¢«æ­£ç¡®å®‰è£…ã€‚

å…³äºè¯­æ³•çš„æ¦‚è¿°ï¼Œè¯·æŸ¥çœ‹è¿™ä¸ª [é€ŸæŸ¥è¡¨](https://cheatography.com/linux-china/cheat-sheets/justfile/)ã€‚

ä¸€æ—¦ `just` å®‰è£…å®Œæ¯•å¹¶å¼€å§‹å·¥ä½œï¼Œåœ¨ä½ çš„é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªåä¸º `justfile` çš„æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š

```just
recipe-name:
  echo 'This is a recipe!'

# è¿™æ˜¯ä¸€è¡Œæ³¨é‡Š
another-recipe:
  @echo 'This is another recipe.'
```

å½“ä½ è°ƒç”¨ `just` æ—¶ï¼Œå®ƒä¼šåœ¨å½“å‰ç›®å½•å’Œçˆ¶ç›®å½•å¯»æ‰¾æ–‡ä»¶ `justfile`ï¼Œæ‰€ä»¥ä½ å¯ä»¥ä»ä½ é¡¹ç›®çš„ä»»ä½•å­ç›®å½•ä¸­è°ƒç”¨å®ƒã€‚

æœç´¢ `justfile` æ˜¯ä¸åˆ†å¤§å°å†™çš„ï¼Œæ‰€ä»¥ä»»ä½•å¤§å°å†™ï¼Œå¦‚ `Justfile`ã€`JUSTFILE` æˆ– `JuStFiLe` éƒ½å¯ä»¥å·¥ä½œã€‚`just` ä¹Ÿä¼šå¯»æ‰¾åå­—ä¸º `.justfile` çš„æ–‡ä»¶ï¼Œä»¥ä¾¿ä½ æ‰“ç®—éšè—ä¸€ä¸ª `justfile`ã€‚

è¿è¡Œ `just` æ—¶æœªä¼ å‚æ•°ï¼Œåˆ™è¿è¡Œ `justfile` ä¸­çš„ç¬¬ä¸€ä¸ªé…æ–¹ï¼š

```sh
$ just
echo 'This is a recipe!'
This is a recipe!
```

é€šè¿‡ä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°æŒ‡å®šè¦è¿è¡Œçš„é…æ–¹ï¼š

```sh
$ just another-recipe
This is another recipe.
```

`just` åœ¨è¿è¡Œæ¯æ¡å‘½ä»¤å‰éƒ½ä¼šå°†å…¶æ‰“å°åˆ°æ ‡å‡†é”™è¯¯ä¸­ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆ `echo 'This is a recipe!'` è¢«æ‰“å°å‡ºæ¥ã€‚å¯¹äºä»¥ `@` å¼€å¤´çš„è¡Œï¼Œè¿™å°†è¢«æŠ‘åˆ¶ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆ `echo 'This is another recipe.'` æ²¡æœ‰è¢«æ‰“å°ã€‚

å¦‚æœä¸€ä¸ªå‘½ä»¤å¤±è´¥ï¼Œé…æ–¹å°±ä¼šåœæ­¢è¿è¡Œã€‚è¿™é‡Œ `cargo publish` åªæœ‰åœ¨ `cargo test` æˆåŠŸåæ‰ä¼šè¿è¡Œï¼š

```just
publish:
  cargo test
  # å‰é¢çš„æµ‹è¯•é€šè¿‡æ‰ä¼šæ‰§è¡Œ publish!
  cargo publish
```

é…æ–¹å¯ä»¥ä¾èµ–å…¶ä»–é…æ–¹ã€‚åœ¨è¿™é‡Œï¼Œ`test` é…æ–¹ä¾èµ–äº `build` é…æ–¹ï¼Œæ‰€ä»¥ `build` å°†åœ¨ `test` ä¹‹å‰è¿è¡Œï¼š

```just
build:
  cc main.c foo.c bar.c -o main

test: build
  ./test

sloc:
  @echo "`wc -l *.c` lines of code"
```

```sh
$ just test
cc main.c foo.c bar.c -o main
./test
testingâ€¦ all tests passed!
```

æ²¡æœ‰ä¾èµ–å…³ç³»çš„é…æ–¹å°†æŒ‰ç…§å‘½ä»¤è¡Œä¸Šç»™å‡ºçš„é¡ºåºè¿è¡Œï¼š

```sh
$ just build sloc
cc main.c foo.c bar.c -o main
1337 lines of code
```

ä¾èµ–é¡¹æ€»æ˜¯å…ˆè¿è¡Œï¼Œå³ä½¿å®ƒä»¬è¢«æ”¾åœ¨ä¾èµ–å®ƒä»¬çš„é…æ–¹ä¹‹åï¼š

```sh
$ just test build
cc main.c foo.c bar.c -o main
./test
testingâ€¦ all tests passed!
```

ç¤ºä¾‹
--------

åœ¨ [Examples ç›®å½•](https://github.com/casey/just/tree/master/examples) ä¸­å¯ä»¥æ‰¾åˆ°å„ç§ `justfile` çš„ä¾‹å­ã€‚

ç‰¹æ€§ä»‹ç»
--------

### é»˜è®¤é…æ–¹

å½“ `just` è¢«è°ƒç”¨è€Œæ²¡æœ‰ä¼ å…¥ä»»ä½•é…æ–¹æ—¶ï¼Œå®ƒä¼šè¿è¡Œ `justfile` ä¸­çš„ç¬¬ä¸€ä¸ªé…æ–¹ã€‚è¿™ä¸ªé…æ–¹å¯èƒ½æ˜¯é¡¹ç›®ä¸­æœ€å¸¸è¿è¡Œçš„å‘½ä»¤ï¼Œæ¯”å¦‚è¿è¡Œæµ‹è¯•ï¼š

```just
test:
  cargo test
```

ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ä¾èµ–å…³ç³»æ¥é»˜è®¤è¿è¡Œå¤šä¸ªé…æ–¹ï¼š

```just
default: lint build test

build:
  echo Buildingâ€¦

test:
  echo Testingâ€¦

lint:
  echo Lintingâ€¦
```

åœ¨æ²¡æœ‰åˆé€‚é…æ–¹ä½œä¸ºé»˜è®¤é…æ–¹çš„æƒ…å†µä¸‹ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨ `justfile` çš„å¼€å¤´æ·»åŠ ä¸€ä¸ªé…æ–¹ï¼Œç”¨äºåˆ—å‡ºå¯ç”¨çš„é…æ–¹ï¼š

```just
default:
  just --list
```

### åˆ—å‡ºå¯ç”¨çš„é…æ–¹

å¯ä»¥ç”¨ `just --list` æŒ‰å­—æ¯é¡ºåºåˆ—å‡ºé…æ–¹ï¼š

```sh
$ just --list
Available recipes:
    build
    test
    deploy
    lint
```

`just --summary` ä»¥æ›´ç®€æ´çš„å½¢å¼åˆ—å‡ºé…æ–¹ï¼š

```sh
$ just --summary
build test deploy lint
```

ä¼ å…¥ `--unsorted` é€‰é¡¹å¯ä»¥æŒ‰ç…§å®ƒä»¬åœ¨ `justfile` ä¸­å‡ºç°çš„é¡ºåºæ‰“å°é…æ–¹ï¼š

```just
test:
  echo 'Testing!'

build:
  echo 'Building!'
```

```sh
$ just --list --unsorted
Available recipes:
    test
    build
```

```sh
$ just --summary --unsorted
test build
```

å¦‚æœä½ æƒ³è®© `just` é»˜è®¤åˆ—å‡º `justfile` ä¸­çš„é…æ–¹ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªä½œä¸ºé»˜è®¤é…æ–¹ï¼š

```just
default:
  @just --list
```

è¯·æ³¨æ„ï¼Œä½ å¯èƒ½éœ€è¦åœ¨ä¸Šé¢è¿™ä¸€è¡Œä¸­æ·»åŠ  `--justfile {{justfile()}}`ã€‚æ²¡æœ‰å®ƒï¼Œå¦‚æœä½ æ‰§è¡Œ `just -f /some/distant/justfile -d .` æˆ– `just -f ./non-standard-justfile` é…æ–¹ä¸­çš„æ™®é€š `just --list` å°±ä¸ä¸€å®šä¼šä½¿ç”¨ä½ æä¾›çš„æ–‡ä»¶ï¼Œå®ƒå°†è¯•å›¾åœ¨ä½ çš„å½“å‰è·¯å¾„ä¸­æ‰¾åˆ°ä¸€ä¸ª `justfile`ï¼Œç”šè‡³å¯èƒ½å¯¼è‡´ `No justfile found` çš„é”™è¯¯ã€‚

æ ‡é¢˜æ–‡æœ¬å¯ä»¥ç”¨ `--list-heading` æ¥å®šåˆ¶ï¼š

```sh
$ just --list --list-heading $'Cool stuffâ€¦\n'
Cool stuffâ€¦
    test
    build
```

è€Œç¼©è¿›å¯ä»¥ç”¨ `--list-prefix` æ¥å®šåˆ¶ï¼š

```sh
$ just --list --list-prefix Â·Â·Â·Â·
Available recipes:
Â·Â·Â·Â·test
Â·Â·Â·Â·build
```

`--list-heading` å‚æ•°åŒæ—¶æ›¿æ¢äº†æ ‡é¢˜å’Œåé¢çš„æ¢è¡Œï¼Œæ‰€ä»¥å¦‚æœä¸æ˜¯ç©ºçš„ï¼Œåº”è¯¥åŒ…å«ä¸€ä¸ªæ¢è¡Œã€‚è¿™æ ·åšæ˜¯ä¸ºäº†å…è®¸ä½ é€šè¿‡ä¼ é€’ç©ºå­—ç¬¦ä¸²æ¥å®Œå…¨æŠ‘åˆ¶æ ‡é¢˜è¡Œï¼š

```sh
$ just --list --list-heading ''
    test
    build
```

### åˆ«å

åˆ«åå…è®¸ä½ ç”¨å…¶ä»–åç§°æ¥è°ƒç”¨é…æ–¹ï¼š

```just
alias b := build

build:
  echo 'Building!'
```

```sh
$ just b
build
echo 'Building!'
Building!
```

### è®¾ç½®

è®¾ç½®æ§åˆ¶è§£é‡Šå’Œæ‰§è¡Œã€‚æ¯ä¸ªè®¾ç½®æœ€å¤šå¯ä»¥æŒ‡å®šä¸€æ¬¡ï¼Œå¯ä»¥å‡ºç°åœ¨ `justfile` çš„ä»»ä½•åœ°æ–¹ã€‚

ä¾‹å¦‚ï¼š

```just
set shell := ["zsh", "-cu"]

foo:
  # this line will be run as `zsh -cu 'ls **/*.txt'`
  ls **/*.txt
```

#### è®¾ç½®ä¸€è§ˆè¡¨

| åç§°                        | å€¼                 | é»˜è®¤  | æè¿°                                                                                    |
| --------------------------- | ------------------ | ----- | --------------------------------------------------------------------------------------- |
| `allow-duplicate-recipes`   | boolean            | False | å…è®¸åœ¨ `justfile` åé¢å‡ºç°çš„é…æ–¹è¦†ç›–ä¹‹å‰çš„åŒåé…æ–¹                                      |
| `allow-duplicate-variables` | boolean            | False | å…è®¸åœ¨ `justfile` åé¢å‡ºç°çš„å˜é‡è¦†ç›–ä¹‹å‰çš„åŒåå˜é‡                                      |
| `dotenv-filename`           | string             | -     | å¦‚æœæœ‰è‡ªå®šä¹‰åç§°çš„ `.env` ç¯å¢ƒå˜é‡æ–‡ä»¶çš„è¯ï¼Œåˆ™å°†å…¶åŠ è½½                                  |
| `dotenv-load`               | boolean            | False | å¦‚æœæœ‰`.env` ç¯å¢ƒå˜é‡æ–‡ä»¶çš„è¯ï¼Œåˆ™å°†å…¶åŠ è½½                                               |
| `dotenv-path`               | string             | -     | ä»è‡ªå®šä¹‰è·¯å¾„ä¸­åŠ è½½ `.env` ç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œ æ–‡ä»¶ä¸å­˜åœ¨å°†ä¼šæŠ¥é”™ã€‚å¯ä»¥è¦†ç›– `dotenv-filename` |
| `dotenv-required`           | boolean            | False | å¦‚æœ `.env` ç¯å¢ƒå˜é‡æ–‡ä»¶ä¸å­˜åœ¨çš„è¯ï¼Œéœ€è¦æŠ¥é”™                                                         |
| `export`                    | boolean            | False | å°†æ‰€æœ‰å˜é‡å¯¼å‡ºä¸ºç¯å¢ƒå˜é‡                                                                |
| `fallback`                  | boolean            | False | å¦‚æœå‘½ä»¤è¡Œä¸­çš„ç¬¬ä¸€ä¸ªé…æ–¹æ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™åœ¨çˆ¶ç›®å½•ä¸­æœç´¢ `justfile`                           |
| `ignore-comments`           | boolean            | False | å¿½ç•¥ä»¥`#`å¼€å¤´çš„é…æ–¹è¡Œ                                                                   |
| `positional-arguments`      | boolean            | False | ä¼ é€’ä½ç½®å‚æ•°                                                                            |
| `shell`                     | `[COMMAND, ARGSâ€¦]` | -     | è®¾ç½®ç”¨äºè°ƒç”¨é…æ–¹å’Œè¯„ä¼°åå¼•å·å†…åŒ…è£¹å†…å®¹çš„å‘½ä»¤                                            |
| `tempdir`                   | string             | -     | åœ¨ `tempdir` ä½ç½®åˆ›å»ºä¸´æ—¶ç›®å½•ï¼Œè€Œä¸æ˜¯ç³»ç»Ÿé»˜è®¤çš„ä¸´æ—¶ç›®å½•                                 |
| `windows-powershell`        | boolean            | False | åœ¨ Windows ä¸Šä½¿ç”¨ PowerShell ä½œä¸ºé»˜è®¤ Shell(åºŸå¼ƒï¼Œå»ºè®®ä½¿ç”¨ `windows-shell`)             |
| `windows-shell`             | `[COMMAND, ARGSâ€¦]` | -     | è®¾ç½®ç”¨äºè°ƒç”¨é…æ–¹å’Œè¯„ä¼°åå¼•å·å†…åŒ…è£¹å†…å®¹çš„å‘½ä»¤                                            |

Bool ç±»å‹è®¾ç½®å¯ä»¥å†™æˆï¼š

```justfile
set NAME
```

è¿™å°±ç›¸å½“äºï¼š

```justfile
set NAME := true
```

#### å…è®¸é‡å¤çš„é…æ–¹

å¦‚æœ `allow-duplicate-recipes` è¢«è®¾ç½®ä¸º `true`ï¼Œé‚£ä¹ˆå®šä¹‰å¤šä¸ªåŒåçš„é…æ–¹å°±ä¸ä¼šå‡ºé”™ï¼Œè€Œä¼šä½¿ç”¨æœ€åçš„å®šä¹‰ã€‚é»˜è®¤ä¸º `false`ã€‚

```just
set allow-duplicate-recipes

@foo:
  echo foo

@foo:
  echo bar
```

```sh
$ just foo
bar
```

#### å…è®¸é‡å¤çš„å˜é‡
å¦‚æœ `allow-duplicate-variables` è¢«è®¾ç½®ä¸º `true`ï¼Œé‚£ä¹ˆå®šä¹‰å¤šä¸ªåŒåçš„å˜é‡å°†ä¸ä¼šæŠ¥é”™ã€‚é»˜è®¤ä¸º `false`ã€‚

```just
set allow-duplicate-variables

a := "foo"
a := "bar"

@foo:
  echo $a
```

```sh
$ just foo
bar
```

#### ç¯å¢ƒå˜é‡åŠ è½½

å¦‚æœ `dotenv-load`, `dotenv-filename`, `dotenv-path`, or `dotenv-required`
ä¸­ä»»æ„ä¸€é¡¹è¢«è®¾ç½®, `just` ä¼šå°è¯•ä»æ–‡ä»¶ä¸­åŠ è½½ç¯å¢ƒå˜é‡

å¦‚æœè®¾ç½®äº† `dotenv-path`, `just` ä¼šåœ¨æŒ‡å®šçš„è·¯å¾„ä¸‹æœç´¢æ–‡ä»¶ï¼Œè¯¥è·¯å¾„å¯ä»¥æ˜¯ç»å¯¹è·¯å¾„ï¼Œ
ä¹Ÿå¯ä»¥æ˜¯åŸºäºå½“å‰å·¥ä½œè·¯å¾„çš„ç›¸å¯¹è·¯å¾„

å¦‚æœè®¾ç½®äº† `dotenv-filename`ï¼Œ`just` ä¼šåœ¨æŒ‡å®šçš„ç›¸å¯¹è·¯å¾„ï¼Œä»¥åŠå…¶æ‰€æœ‰çš„ä¸Šå±‚ç›®å½•ä¸­ï¼Œæœç´¢æŒ‡å®šæ–‡ä»¶

å¦‚æœæ²¡æœ‰è®¾ç½® `dotenv-filename`ï¼Œä½†æ˜¯è®¾ç½®äº† `dotenv-load` æˆ– `dotenv-required`ï¼Œ
`just` ä¼šåœ¨å½“å‰å·¥ä½œè·¯å¾„ï¼Œä»¥åŠå…¶æ‰€æœ‰çš„ä¸Šå±‚ç›®å½•ä¸­ï¼Œå¯»æ‰¾åä¸º `.env` çš„æ–‡ä»¶ã€‚

`dotenv-filename` å’Œ `dotenv-path` å¾ˆç›¸ä¼¼ï¼Œä½†æ˜¯ `dotenv-path` åªä¼šæ£€æŸ¥æŒ‡å®šçš„ç›®å½•
è€Œ `dotenv-filename` ä¼šæ£€æŸ¥æŒ‡å®šç›®å½•ä»¥åŠå…¶æ‰€æœ‰çš„ä¸Šå±‚ç›®å½•ã€‚

å¦‚æœæ²¡æœ‰æ‰¾åˆ°ç¯å¢ƒå˜é‡æ–‡ä»¶ä¹Ÿä¸ä¼šæŠ¥é”™ï¼Œé™¤éè®¾ç½®äº† `dotenv-required`ã€‚

ä»æ–‡ä»¶ä¸­åŠ è½½çš„å˜é‡æ˜¯ç¯å¢ƒå˜é‡ï¼Œè€Œé `just` å˜é‡ï¼Œæ‰€ä»¥åœ¨é…æ–¹å’Œåå¼•å·ä¸­éœ€è¦å¿…é¡»é€šè¿‡ `$VARIABLE_NAME` æ¥è°ƒç”¨ã€‚

æ¯”å¦‚ï¼Œå¦‚æœä½ çš„ `.env` æ–‡ä»¶åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š

```sh
# a comment, will be ignored
DATABASE_ADDRESS=localhost:6379
SERVER_PORT=1337
```

å¹¶ä¸”ä½ çš„ `justfile` åŒ…å«ï¼š

```just
set dotenv-load

serve:
  @echo "Starting server with database $DATABASE_ADDRESS on port $SERVER_PORTâ€¦"
  ./server --database $DATABASE_ADDRESS --port $SERVER_PORT
```

`just serve` å°†ä¼šè¾“å‡ºï¼š

```sh
$ just serve
Starting server with database localhost:6379 on port 1337â€¦
./server --database $DATABASE_ADDRESS --port $SERVER_PORT
```

#### å¯¼å‡º

`export` è®¾ç½®ä½¿æ‰€æœ‰ `just` å˜é‡ä½œä¸ºç¯å¢ƒå˜é‡è¢«å¯¼å‡ºã€‚é»˜è®¤å€¼ä¸º `false`ã€‚

```just
set export

a := "hello"

@foo b:
  echo $a
  echo $b
```

```sh
$ just foo goodbye
hello
goodbye
```

#### ä½ç½®å‚æ•°

å¦‚æœ `positional-arguments` ä¸º `true`ï¼Œé…æ–¹å‚æ•°å°†ä½œä¸ºä½ç½®å‚æ•°ä¼ é€’ç»™å‘½ä»¤ã€‚å¯¹äºè¡Œå¼é…æ–¹ï¼Œå‚æ•° `$0` å°†æ˜¯é…æ–¹çš„åç§°ã€‚

ä¾‹å¦‚ï¼Œè¿è¡Œè¿™ä¸ªé…æ–¹ï¼š

```just
set positional-arguments

@foo bar:
  echo $0
  echo $1
```

å°†äº§ç”Ÿä»¥ä¸‹è¾“å‡ºï¼š

```sh
$ just foo hello
foo
hello
```

å½“ä½¿ç”¨ `sh` å…¼å®¹çš„ Shellï¼Œå¦‚ `bash` æˆ– `zsh` æ—¶ï¼Œ`$@` ä¼šå±•å¼€ä¸ºä¼ ç»™é…æ–¹çš„ä½ç½®å‚æ•°ï¼Œä»1å¼€å§‹ã€‚å½“åœ¨åŒå¼•å·å†…ä½¿ç”¨ `"$@"` æ—¶ï¼ŒåŒ…æ‹¬ç©ºç™½çš„å‚æ•°å°†è¢«ä¼ é€’ï¼Œå°±åƒå®ƒä»¬æ˜¯åŒå¼•å·ä¸€æ ·ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œ`"$@"` ç›¸å½“äº `"$1" "$2"`......å½“æ²¡æœ‰ä½ç½®å‚æ•°æ—¶ï¼Œ`"$@"` å’Œ `$@` å°†å±•å¼€ä¸ºç©ºï¼ˆå³ï¼Œå®ƒä»¬è¢«åˆ é™¤ï¼‰ã€‚

è¿™ä¸ªä¾‹å­çš„é…æ–¹å°†é€è¡Œæ‰“å°å‚æ•°ï¼š

```just
set positional-arguments

@test *args='':
  bash -c 'while (( "$#" )); do echo - $1; shift; done' -- "$@"
```

ç”¨ _ä¸¤ä¸ª_ å‚æ•°è¿è¡Œï¼š

```sh
$ just test foo "bar baz"
- foo
- bar baz
```

#### Shell

`shell` è®¾ç½®æ§åˆ¶ç”¨äºè°ƒç”¨æ‰§è¡Œé…æ–¹ä»£ç è¡Œå’Œåå¼•å·å†…æŒ‡ä»¤çš„å‘½ä»¤ã€‚Shebang é…æ–¹ä¸å—å½±å“ã€‚

```just
# use python3 to execute recipe lines and backticks
set shell := ["python3", "-c"]

# use print to capture result of evaluation
foos := `print("foo" * 4)`

foo:
  print("Snake snake snake snake.")
  print("{{foos}}")
```

`just` æŠŠè¦æ‰§è¡Œçš„å‘½ä»¤ä½œä¸ºä¸€ä¸ªå‚æ•°è¿›è¡Œä¼ é€’ã€‚è®¸å¤š Shell éœ€è¦ä¸€ä¸ªé¢å¤–çš„æ ‡å¿—ï¼Œé€šå¸¸æ˜¯ `-c`ï¼Œä»¥ä½¿å®ƒä»¬è¯„ä¼°æ‰§è¡Œç¬¬ä¸€ä¸ªå‚æ•°ã€‚

##### Windows Shell

`just` åœ¨ Windows ä¸Šé»˜è®¤ä½¿ç”¨ `sh`ã€‚è¦åœ¨ Windows ä¸Šä½¿ç”¨ä¸åŒçš„ Shellï¼Œè¯·ä½¿ç”¨`windows-shell`ï¼š

```just
set windows-shell := ["powershell.exe", "-NoLogo", "-Command"]

hello:
  Write-Host "Hello, world!"
```

å‚è€ƒ [powershell.just](https://github.com/casey/just/blob/master/examples/powershell.just) ï¼Œäº†è§£åœ¨æ‰€æœ‰å¹³å°ä¸Šä½¿ç”¨ PowerShell çš„ justfileã€‚

##### Windows PowerShell

*`set windows-powershell` ä½¿ç”¨é—ç•™çš„ `powershell.exe` äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸å†æ¨èã€‚è¯·å‚é˜…ä¸Šé¢çš„ `windows-shell` è®¾ç½®ï¼Œä»¥é€šè¿‡æ›´çµæ´»çš„æ–¹å¼æ¥æ§åˆ¶åœ¨ Windows ä¸Šä½¿ç”¨å“ªä¸ª Shellã€‚*

`just` åœ¨ Windows ä¸Šé»˜è®¤ä½¿ç”¨ `sh`ã€‚è¦ä½¿ç”¨ `powershell.exe` ä½œä¸ºæ›¿ä»£ï¼Œè¯·å°† `windows-powershell` è®¾ç½®ä¸º `true`ã€‚

```just
set windows-powershell := true

hello:
  Write-Host "Hello, world!"
```

##### Python 3

```just
set shell := ["python3", "-c"]
```

##### Bash

```just
set shell := ["bash", "-uc"]
```

##### Z Shell

```just
set shell := ["zsh", "-uc"]
```

##### Fish

```just
set shell := ["fish", "-c"]
```

##### Nushell

```just
set shell := ["nu", "-c"]
```

å¦‚æœä½ æƒ³è®¾ç½®é»˜è®¤çš„è¡¨æ ¼æ˜¾ç¤ºæ¨¡å¼ä¸º `light`:

```just
set shell := ['nu', '-m', 'light', '-c']
```

*[Nushell](https://github.com/nushell/nushell) ä½¿ç”¨ Rust å¼€å‘å¹¶ä¸”å…·å¤‡è‰¯å¥½çš„è·¨å¹³å°èƒ½åŠ›ï¼Œ**æ”¯æŒ Windows / macOS å’Œå„ç§ Linux å‘è¡Œç‰ˆ***

### æ–‡æ¡£æ³¨é‡Š

ç´§æ¥ç€é…æ–¹å‰é¢çš„æ³¨é‡Šå°†å‡ºç°åœ¨ `just --list` ä¸­ï¼š

```just
# build stuff
build:
  ./bin/build

# test stuff
test:
  ./bin/test
```

```sh
$ just --list
Available recipes:
    build # build stuff
    test # test stuff
```

### å˜é‡å’Œæ›¿æ¢

æ”¯æŒåœ¨å˜é‡ã€å­—ç¬¦ä¸²ã€æ‹¼æ¥ã€è·¯å¾„è¿æ¥å’Œæ›¿æ¢ä¸­ä½¿ç”¨ `{{â€¦}}` ï¼š

```just
tmpdir  := `mktemp -d`
version := "0.2.7"
tardir  := tmpdir / "awesomesauce-" + version
tarball := tardir + ".tar.gz"

publish:
  rm -f {{tarball}}
  mkdir {{tardir}}
  cp README.md *.c {{tardir}}
  tar zcvf {{tarball}} {{tardir}}
  scp {{tarball}} me@server.com:release/
  rm -rf {{tarball}} {{tardir}}
```

#### è·¯å¾„æ‹¼æ¥

`/` æ“ä½œç¬¦å¯ç”¨äºé€šè¿‡æ–œçº¿è¿æ¥ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼š

```just
foo := "a" / "b"
```

```
$ just --evaluate foo
a/b
```

è¯·æ³¨æ„ï¼Œå³ä½¿å·²ç»æœ‰ä¸€ä¸ª `/`ï¼Œä¹Ÿä¼šæ·»åŠ ä¸€ä¸ª `/`ï¼š

```just
foo := "a/"
bar := foo / "b"
```

```
$ just --evaluate bar
a//b
```

ä¹Ÿå¯ä»¥æ„å»ºç»å¯¹è·¯å¾„<sup>1.5.0</sup>:

```just
foo := / "b"
```

```
$ just --evaluate foo
/b
```

`/` æ“ä½œç¬¦ä½¿ç”¨ `/` å­—ç¬¦ï¼Œå³ä½¿åœ¨ Windows ä¸Šä¹Ÿæ˜¯å¦‚æ­¤ã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨é€šç”¨å‘½åè§„åˆ™ï¼ˆUNCï¼‰çš„è·¯å¾„ä¸­åº”é¿å…ä½¿ç”¨ `/` æ“ä½œç¬¦ï¼Œå³é‚£äº›ä»¥ `\?` å¼€å¤´çš„è·¯å¾„ï¼Œå› ä¸º UNC è·¯å¾„ä¸æ”¯æŒæ­£æ–œçº¿ã€‚

#### è½¬ä¹‰ `{{`

æƒ³è¦å†™ä¸€ä¸ªåŒ…å«  `{{` çš„é…æ–¹ï¼Œå¯ä»¥ä½¿ç”¨ `{{{{`ï¼š

```just
braces:
  echo 'I {{{{LOVE}} curly braces!'
```

(æœªåŒ¹é…çš„ `}}` ä¼šè¢«å¿½ç•¥ï¼Œæ‰€ä»¥ä¸éœ€è¦è½¬ä¹‰)

å¦ä¸€ä¸ªé€‰æ‹©æ˜¯æŠŠæ‰€æœ‰ä½ æƒ³è½¬ä¹‰çš„æ–‡æœ¬éƒ½æ”¾åœ¨æ’å€¼é‡Œé¢ï¼š

```just
braces:
  echo '{{'I {{LOVE}} curly braces!'}}'
```

ç„¶è€Œï¼Œå¦ä¸€ä¸ªé€‰æ‹©æ˜¯ä½¿ç”¨  `{{ "{{" }}`ï¼š

```just
braces:
  echo 'I {{ "{{" }}LOVE}} curly braces!'
```

### å­—ç¬¦ä¸²

åŒå¼•å·å­—ç¬¦ä¸²æ”¯æŒè½¬ä¹‰åºåˆ—ï¼š

```just
string-with-tab             := "\t"
string-with-newline         := "\n"
string-with-carriage-return := "\r"
string-with-double-quote    := "\""
string-with-slash           := "\\"
string-with-no-newline      := "\
"
```

```sh
$ just --evaluate
"tring-with-carriage-return := "
string-with-double-quote    := """
string-with-newline         := "
"
string-with-no-newline      := ""
string-with-slash           := "\"
string-with-tab             := "     "
```

å­—ç¬¦ä¸²å¯ä»¥åŒ…å«æ¢è¡Œç¬¦ï¼š

```just
single := '
hello
'

double := "
goodbye
"
```

å•å¼•å·å­—ç¬¦ä¸²ä¸æ”¯æŒè½¬ä¹‰åºåˆ—ï¼š

```just
escapes := '\t\n\r\"\\'
```

```sh
$ just --evaluate
escapes := "\t\n\r\"\\"
```

æ”¯æŒå•å¼•å·å’ŒåŒå¼•å·å­—ç¬¦ä¸²çš„ç¼©è¿›ç‰ˆæœ¬ï¼Œä»¥ä¸‰ä¸ªå•å¼•å·æˆ–ä¸‰ä¸ªåŒå¼•å·ä¸ºç•Œã€‚ç¼©è¿›çš„å­—ç¬¦ä¸²è¡Œè¢«åˆ é™¤äº†æ‰€æœ‰éç©ºè¡Œæ‰€å…±æœ‰çš„å‰å¯¼ç©º
... (truncated due to size)

================================ Human Message =================================


The commands you have run:```
rustc --version, curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y, apt-get update && apt-get install -y curl, curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y, source "$HOME/.cargo/env", rustc --version && cargo --version, cargo build, apt-get install -y build-essential, cargo build, cargo test, apt-get install -y zsh, cargo test, cargo test -- --nocapture, cargo test --features unstable -- --nocapture, apt-get install -y python3 && cargo test -- --nocapture, export TEST_VAR=test_value && cargo test -- --nocapture, grep -r "env_var_functions" tests/, cat tests/functions.rs | grep -A 50 "fn env_var_functions()"```
Following are the last 5 messages:

================================ Human Message =================================

Observation:
[{"title": "How can I test Rust methods that depend on environment variables?", "url": "https://stackoverflow.com/questions/35858323/how-can-i-test-rust-methods-that-depend-on-environment-variables", "content": "Connect and share knowledge within a single location that is structured and easy to search.\n\n# How can I test Rust methods that depend on environment variables?\n\nI am building a library that interrogates its running environment to return values to the asking program. Sometimes as simple as\n\n`pub fn func_name() -> Option<String> {\nmatch env::var(\"ENVIRONMENT_VARIABLE\") {\nOk(s) => Some(s),\nErr(e) => None\n}\n}` [...] `use std::env;\nfn env_is_set() -> bool {\nmatch env::var(\"ENVIRONMENT_VARIABLE\") {\nOk(s) => s == \"yes\",\n_ => false\n}\n}\n#[test]\nfn when_set_yes() {\nenv::set_var(\"ENVIRONMENT_VARIABLE\", \"yes\");\nassert!(env_is_set());\n}\n#[test]\nfn when_set_no() {\nenv::set_var(\"ENVIRONMENT_VARIABLE\", \"no\");\nassert!(!env_is_set());\n}\n#[test]\nfn when_unset() {\nenv::remove_var(\"ENVIRONMENT_VARIABLE\");\nassert!(!env_is_set());\n}` [...] However, you need to be aware that environment variables are a shared resource. From the docs for `set_var`, emphasis mine:\n\n`set_var`\n\nSets the environment variable `k` to the value `v` for the currently running process.\n\n`k`\n`v`\n\nYou may also need to be aware that the Rust test runner runs tests in parallel by default, so it's possible to have one test clobber another.\n\nAdditionally, you may wish to \"reset\" your environment variables to a known good state after the test.", "score": 0.57894874}, {"title": "Working with Environment Variables - The Rust Programming ...", "url": "https://doc.rust-lang.org/book/ch12-05-working-with-environment-variables.html", "content": "We first add a new `search_case_insensitive` function that will be called when\nthe environment variable has a value. We\u00e2\u0080\u0099ll continue to follow the TDD process,\nso the first step is again to write a failing test. We\u00e2\u0080\u0099ll add a new test for\nthe new `search_case_insensitive` function and rename our old test from\n`one_result` to `case_sensitive` to clarify the differences between the two\ntests, as shown in Listing 12-20. [...] Finally, we need to check for the environment variable. The functions for\nworking with environment variables are in the `env` module in the standard\nlibrary, so we bring that module into scope at the top of src/lib.rs. Then\nwe\u00e2\u0080\u0099ll use the `var` function from the `env` module to check to see if any value\nhas been set for an environment variable named `IGNORE_CASE`, as shown in\nListing 12-23. [...] test result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\nDoc-tests minigrep\nrunning 0 tests\ntest result: ok. 0 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s`", "score": 0.45231876}, {"title": "How to Write Tests - The Rust Programming Language", "url": "https://doc.rust-lang.org/book/ch11-01-writing-tests.html", "content": "note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\nfailures:\ntests::larger_can_hold_smaller\ntest result: FAILED. 1 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\nerror: test failed, to rerun pass `--lib`` [...] note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\nfailures:\ntests::another\ntest result: FAILED. 1 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\nerror: test failed, to rerun pass `--lib`` [...] note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace\nfailures:\ntests::greeting_contains_name\ntest result: FAILED. 0 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\nerror: test failed, to rerun pass `--lib``", "score": 0.37586737}]
================================== Ai Message ==================================

Thought: Based on the search results, I understand that environment variable tests in Rust need careful handling since they're shared resources. The failing `env_var_functions` test likely expects specific environment variables to be set. Since we've already tried setting `TEST_VAR`, we should now look at the test case itself to understand its exact requirements.

Action: <command>grep -r "env_var_functions" tests/</command>
================================ Human Message =================================

Observation:
grep -r "env_var_functions" tests/
tests/functions.rs:fn env_var_functions() {
tests/functions.rs:fn env_var_functions() {


root@f8374885f8c6:/testbed $

exit code: 0

================================== Ai Message ==================================

Thought: The test is located in `tests/functions.rs`. Let's examine the test case to understand what environment variables it expects.

Action: <command>cat tests/functions.rs | grep -A 50 "fn env_var_functions()"</command>
================================ Human Message =================================

Observation:
cat tests/functions.rs | grep -A 50 "fn env_var_functions()"
fn env_var_functions() {
  Test::new()
    .justfile(
      r"
p := env_var('USER')
b := env_var_or_default('ZADDY', 'HTAP')
x := env_var_or_default('XYZ', 'ABC')

foo:
  /usr/bin/env echo '{{p}}' '{{b}}' '{{x}}'
",
    )
    .stdout(format!("{} HTAP ABC\n", env::var("USER").unwrap()).as_str())
    .stderr(
      format!(
        "/usr/bin/env echo '{}' 'HTAP' 'ABC'\n",
        env::var("USER").unwrap()
      )
      .as_str(),
    )
    .run();
}

#[cfg(not(windows))]
#[test]
fn path_functions() {
  Test::new()
    .justfile(
      r"
we  := without_extension('/foo/bar/baz.hello')
fs  := file_stem('/foo/bar/baz.hello')
fn  := file_name('/foo/bar/baz.hello')
dir := parent_directory('/foo/bar/baz.hello')
ext := extension('/foo/bar/baz.hello')
jn  := join('a', 'b')

foo:
  /usr/bin/env echo '{{we}}' '{{fs}}' '{{fn}}' '{{dir}}' '{{ext}}' '{{jn}}'
",
    )
    .stdout("/foo/bar/baz baz baz.hello /foo/bar hello a/b\n")
    .stderr("/usr/bin/env echo '/foo/bar/baz' 'baz' 'baz.hello' '/foo/bar' 'hello' 'a/b'\n")
    .run();
}

#[cfg(not(windows))]
#[test]
fn path_functions2() {
  Test::new()
    .justfile(
      r"
--
fn env_var_functions() {
  Test::new()
    .justfile(
      r#"
p := env_var('USERNAME')
b := env_var_or_default('ZADDY', 'HTAP')
x := env_var_or_default('XYZ', 'ABC')

foo:
  /usr/bin/env echo '{{p}}' '{{b}}' '{{x}}'
"#,
    )
    .stdout(format!("{} HTAP ABC\n", env::var("USERNAME").unwrap()).as_str())
    .stderr(
      format!(
        "/usr/bin/env echo '{}' 'HTAP' 'ABC'\n",
        env::var("USERNAME").unwrap()
      )
      .as_str(),
    )
    .run();
}

#[test]
fn env_var_failure() {
  Test::new()
    .arg("a")
    .justfile("a:\n  echo {{env_var('ZADDY')}}")
    .status(EXIT_FAILURE)
    .stderr(
      "error: Call to function `env_var` failed: environment variable `ZADDY` not present
 â€”â€”â–¶ justfile:2:10
  â”‚
2 â”‚   echo {{env_var('ZADDY')}}
  â”‚          ^^^^^^^
",
    )
    .run();
}

#[test]
fn test_just_executable_function() {
  Test::new()
    .arg("a")
    .justfile(
      "
    a:
      @printf 'Executable path is: %s\\n' '{{ just_executable() }}'
  ",
    )
    .status(EXIT_SUCCESS)


root@f8374885f8c6:/testbed $

exit code: 0

##### LLM OUTPUT #####
================================== Ai Message ==================================

Thought: The test expects the environment variable 'USER' (or 'USERNAME' on Windows) to be set, along with checking behavior for undefined variables 'ZADDY' and 'XYZ'. Since we're in a Docker container, we should verify and set these variables before running the tests.

Action: <command>export USER=root && export ZADDY=testvalue && cargo test --test functions -- --nocapture</command>
##### LLM INPUT #####
================================ System Message ================================

You are a developer. Your task is to install dependencies and set up a environment that is able to run the tests of the project.

- You start with an initial Docker container based on ubuntu:22.04.
- You interact with a Bash session inside this container.
- Project files are located in /testbed within the container, and your current working directory of bash is already set to /testbed.
- No need to clone the project again.

The final objective is to successfully run the tests of the project.


### Rust-Specific Instructions:
- Use `cargo build` to build the project
- Use `cargo test` to run tests
- Use `cargo check` for faster compilation checks
- Install system dependencies if needed (check Cargo.toml for sys crates)
- Consider using `cargo install` for binary dependencies


================================ Human Message =================================


You run in a loop of Thought, Action, Observation.
At the end of the loop you should use Action to stop the loop.

Use Thought to describe your thoughts about the question you have been asked.
Use Action to run one of the actions available to you.
Observation will be the result of running those actions.
> Important Note: Each step, reply with only **one** (Thought, Action) pair.
> Important Note: Do not reply **Observation**, it will be provided by the system.

Your available actions are:

    Command: run a command in the bash, reply with following format, your command should not require sudo or interactive input:
        <command>bash command</command>
        e.g. install build-essential: <command>apt-get install -y build-essential</command>
        e.g. view file content: <command>cat README.md</command>
    Search: search the web for if you need some information, generate query and reply with following format:
        <search>the search query</search>
        e.g. <search>how to fix 'No module named setuptools'</search>
        e.g. <search>how to install python3 on ubuntu</search>
        e.g. <search>how to create development environment for python3</search>
    Stop: stop the setup loop once you think the setup is complete, reply with following format:
        <stop></stop>
    

Observation will be the result of running those actions.


Project Structure: the structure of the project, including files and directories.
Related Files: the content of related files of the project that may help you understand the project.
Thought: you should always think about what to do
Action: <command>your bash command here</command> or <search>your search query</search> or other actions available
Observation: the result of the action
... (this Thought/Action/Observation can repeat N times) ...
Thought: I think the setup should be fine
Action: <stop>stop the setup</stop>
Answer: the final result

Begin!
Project Structure: ðŸ“‚ 
/home/hagon/Project/msb/EnvAgent/git/EnvBench/baseline_RepoLaunch/SWE-bench-Live/laun
ch/playground/EnvPilot_baseline/rwf2__Rocket-2838/repo
â”£â”â” ðŸ“‚ .github
â”£â”â” ðŸ“‚ benchmarks
â”£â”â” ðŸ“‚ contrib
â”£â”â” ðŸ“‚ core
â”£â”â” ðŸ“‚ docs
â”£â”â” ðŸ“‚ examples
â”£â”â” ðŸ“‚ scripts
â”£â”â” ðŸ“‚ testbench
â”£â”â” ðŸ“„ .rustfmt.toml
â”£â”â” ðŸ“„ Cargo.toml
â”£â”â” ðŸ“„ CHANGELOG.md
â”£â”â” ðŸ“„ CONTRIBUTING.md
â”£â”â” ðŸ“„ LICENSE-APACHE
â”£â”â” ðŸ“„ LICENSE-MIT
â”—â”â” ðŸ“„ README.md

Related Files: ------ BEGIN RELATED FILES ------
File: .github/workflows/ci.yml
```
name: CI

on: [push, pull_request]

env:
  CARGO_TERM_COLOR: always

jobs:
  test:
    name: "${{ matrix.platform.name }} ${{ matrix.test.name }} (${{ matrix.platform.toolchain }})"
    runs-on: ${{ matrix.platform.distro }}

    strategy:
      fail-fast: false
      matrix:
        platform:
          - { name: Linux, distro: ubuntu-latest, toolchain: stable }
          - { name: Windows, distro: windows-latest, toolchain: stable }
          - { name: macOS, distro: macOS-latest, toolchain: stable }
          - { name: Linux, distro: ubuntu-latest, toolchain: nightly }
        test:
          - { name: Debug }
          - { name: Examples, flag: "--examples" }
          - { name: Contrib, flag: "--contrib" }
        include:
          # Additional tests on Linux/stable.
          - platform: { name: Linux, distro: ubuntu-latest, toolchain: stable }
            test: { name: Core, flag: "--core" }
          - platform: { name: Linux, distro: ubuntu-latest, toolchain: stable }
            test: { name: Release, flag: "--release" }
          - platform: { name: Linux, distro: ubuntu-latest, toolchain: stable }
            test: { name: Testbench, flag: "--testbench" }
          - platform: { name: Linux, distro: ubuntu-latest, toolchain: stable }
            test: { name: UI, flag: "--ui" }
            fallible: true
          # Allow tests on nightly to fail.
          - platform: { toolchain: nightly }
            fallible: true
          # Use the bigger 'C:/' from the "Switch Disk" step
          - platform: { name: Windows }
            working-directory:
              "C:\\a\\${{ github.event.repository.name }}\\${{ github.event.repository.name }}"

    steps:
      - name: Checkout Sources
        uses: actions/checkout@v4

      - name: Free Disk Space (Linux)
        if: matrix.platform.name == 'Linux'
        run: |
            echo "Freeing up disk space on Linux CI"
            df -h
            sudo rm -rf /usr/share/dotnet/
            sudo rm -rf /opt/ghc
            sudo rm -rf /usr/local/share/boost
            sudo rm -rf /usr/local/graalvm/
            sudo rm -rf /usr/local/.ghcup/
            sudo rm -rf /usr/local/share/powershell
            sudo rm -rf /usr/local/share/chromium
            sudo rm -rf /usr/local/lib/android
            sudo rm -rf /usr/local/lib/node_modules
            sudo rm -rf "$AGENT_TOOLSDIRECTORY"
            sudo docker image prune --all --force
            df -h

      - name: Install Native Dependencies (macOS)
        if: matrix.platform.name == 'macOS'
        run: |
            brew install mysql-client@8.4 libpq sqlite coreutils
            brew link --force --overwrite mysql-client@8.4
            brew link --force --overwrite libpq
            echo "/usr/local/opt/mysql-client/bin" >> "$GITHUB_PATH"

      # vcpkg --triplet x64-windows install libmysql libpq sqlite3 openssl
      # + vcpkg/installed/vcpkg (in particular, the status file)
      - name: Install Native Dependencies (Windows)
        if: matrix.platform.name == 'Windows'
        run: |
          curl -fsLS -o vcpkg.7z https://blob.rocket.rs/vcpkg-2024-08-16.7z
          7z x vcpkg.7z -y -bb0
          xcopy .\vcpkg $env:VCPKG_INSTALLATION_ROOT /s /e /h /y /q
          vcpkg integrate install
          echo "VCPKGRS_DYNAMIC=1" >> "$env:GITHUB_ENV"
          echo "VCPKG_ROOT=$env:VCPKG_INSTALLATION_ROOT" >> "$env:GITHUB_ENV"
          echo "$env:VCPKG_INSTALLATION_ROOT\installed\x64-windows\lib" >> "$env:GITHUB_PATH"
          echo "MYSQLCLIENT_VERSION=8.0.39" >> "$env:GITHUB_ENV"

      - name: Install NASM (Windows)
        if: matrix.platform.name == 'Windows'
        uses: ilammy/setup-nasm@v1

      - name: Install Native Dependencies (Linux)
        if: matrix.platform.name == 'Linux'
        run: |
          sudo apt-get update
          sudo apt-get install -y libmysqlclient-dev libpq-dev libsqlite3-dev

      - name: Install Rust
        uses: dtolnay/rust-toolchain@master
        id: toolchain
        with:
          toolchain: ${{ matrix.platform.toolchain }}
          components: rust-src

      - name: Cache Example Workspace
        if: matrix.test.name == 'Examples'
        uses: Swatinem/rust-cache@v2
        with:
          workspaces: examples
          key: ${{ matrix.test.name }}-${{ steps.toolchain.outputs.cachekey }}

      - name: Cache Root Workspace
        if: matrix.test.name != 'Examples'
        uses: Swatinem/rust-cache@v2
        with:
          key: ${{ matrix.test.name }}-${{ steps.toolchain.outputs.cachekey }}

      # Don't run out of disk space on Windows. C: has much much space than D:.
      - name: Switch Disk (Windows)
        if: matrix.platform.name == 'Windows'
        run: |
          Get-PSDrive
          cp D:\a C:\ -Recurse
          Get-PSDrive

      - name: Run Tests
        continue-on-error: ${{ matrix.fallible || false }}
        working-directory: ${{ matrix.working-directory || github.workspace }}
        run: ./scripts/test.sh ${{ matrix.test.flag || '' }} -q
        shell: bash

```
File: docs/guide/02-quickstart.md
```
+++
summary = "the minimal steps to running your first Rocket application"
+++

# Quickstart

Before you can start writing a Rocket application, you'll need to install the
Rust toolchain. We recommend using [rustup](https://rustup.rs/). If you don't
have Rust installed and would like extra guidance doing so, see [Getting
Started].

## Running Examples

The absolute fastest way to start experimenting with Rocket is to clone the
Rocket repository and run the included examples in the `examples/` directory.
For instance, the following set of commands runs the `hello` example:

```sh
git clone https://github.com/rwf2/Rocket
cd Rocket
git checkout master
cd examples/hello
cargo run
```

There are numerous examples in the `examples/` directory. They can all be run
with `cargo run`.

! note

  The examples' `Cargo.toml` files will point to the locally cloned `rocket`
  libraries. When copying the examples for your own use, you should modify the
  `Cargo.toml` files as explained in the [Getting Started] guide.

[Getting Started]: ../getting-started/

```
File: Cargo.toml
```
[workspace]
resolver = "2"
members = [
  "core/lib/",
  "core/codegen/",
  "core/http/",
  "contrib/db_pools/codegen/",
  "contrib/db_pools/lib/",
  "contrib/sync_db_pools/codegen/",
  "contrib/sync_db_pools/lib/",
  "contrib/dyn_templates/",
  "contrib/ws/",
  "docs/tests",
]

[workspace.lints.rust]
unexpected_cfgs = { level = "warn", check-cfg = ['cfg(nightly)'] }
rust_2018_idioms = "warn"
async_fn_in_trait = "allow"
refining_impl_trait = "allow"
# unreachable_pub = "warn"
# single_use_lifetimes = "warn"
# missing_docs = "warn"

[workspace.lints.clippy]
type_complexity = "allow"
module_inception = "allow"
multiple_bound_locations = "allow"
manual_range_contains = "allow"

```
File: README.md
```
# Rocket

[![Build Status](https://github.com/rwf2/Rocket/workflows/CI/badge.svg)](https://github.com/rwf2/Rocket/actions)
[![Rocket Homepage](https://img.shields.io/badge/web-rocket.rs-red.svg?style=flat&label=https&colorB=d33847)](https://rocket.rs)
[![Current Crates.io Version](https://img.shields.io/crates/v/rocket.svg)](https://crates.io/crates/rocket)
[![Matrix: #rocket:mozilla.org](https://img.shields.io/badge/style-%23rocket:mozilla.org-blue.svg?style=flat&label=[m])](https://chat.mozilla.org/#/room/#rocket:mozilla.org)

Rocket is an async web framework for Rust with a focus on usability, security,
extensibility, and speed.

```rust
#[macro_use] extern crate rocket;

#[get("/<name>/<age>")]
fn hello(name: &str, age: u8) -> String {
    format!("Hello, {} year old named {}!", age, name)
}

#[launch]
fn rocket() -> _ {
    rocket::build().mount("/hello", routes![hello])
}
```

Visiting `localhost:8000/hello/John/58`, for example, will trigger the `hello`
route resulting in the string `Hello, 58 year old named John!` being sent to the
browser. If an `<age>` string was passed in that can't be parsed as a `u8`, the
route won't get called, resulting in a 404 error.

## Documentation

Rocket is extensively documented:

  * [Overview]: A brief look at what makes Rocket special.
  * [Quickstart]: How to get started as quickly as possible.
  * [Getting Started]: How to start your first Rocket project.
  * [Guide]: A detailed guide and reference to Rocket.
  * [API Documentation]: The "rustdocs".

[Quickstart]: https://rocket.rs/guide/quickstart
[Getting Started]: https://rocket.rs/guide/getting-started
[Overview]: https://rocket.rs/overview/
[Guide]: https://rocket.rs/guide/
[API Documentation]: https://api.rocket.rs

Documentation for the `master` branch is available at https://rocket.rs/master
and https://api.rocket.rs/master.

Documentation for major release version `${x}` is available at
`https://[api.]rocket.rs/v${x}`. For example, the v0.4 docs are available at
https://rocket.rs/v0.4 and https://api.rocket.rs/v0.4.

Finally, API docs for active git branches are available at
`https://api.rocket.rs/${branch}`. For example, API docs for the `master` branch
are available at https://api.rocket.rs/master. Branch rustdocs are built and
deployed on every commit.

## Examples

The [examples](examples#readme) directory contains complete crates that showcase
Rocket's features and usage. Each example can be compiled and run with Cargo.
For instance, the following sequence of commands builds and runs the `hello`
example:

```sh
cd examples/hello
cargo run
```

## Getting Help

If you find yourself needing help outside of the documentation, you may:

  * Ask questions via [GitHub discussions questions].
  * Chat with us at [`#rocket:mozilla.org`] on Matrix (join [via Element]).

[`#rocket:mozilla.org`]: https://chat.mozilla.org/#/room/#rocket:mozilla.org
[via Element]: https://chat.mozilla.org/#/room/#rocket:mozilla.org
[GitHub discussions questions]: https://github.com/rwf2/Rocket/discussions/categories/questions

## Contributing

Contributions are absolutely, positively welcomed and encouraged! If you're
interested in contributing code, please first read [CONTRIBUTING] for complete
guidelines. Additionally, you could:

  1. Submit a feature request or bug report as an [issue].
  2. Ask for improved documentation as an [issue].
  3. Comment on [issues that require feedback].
  4. Answers questions in [GitHub discussions questions].
  5. Share a project in [GitHub discussions show & tell].

[issue]: https://github.com/rwf2/Rocket/issues
[issues that require feedback]: https://github.com/rwf2/Rocket/issues?q=is%3Aissue+is%3Aopen+label%3A%22feedback+wanted%22
[pull requests]: https://github.com/rwf2/Rocket/pulls
[CONTRIBUTING]: CONTRIBUTING.md
[GitHub discussions show & tell]: https://github.com/rwf2/Rocket/discussions/categories/show-tell

## License

Rocket is licensed under either of the following, at your option:

 * Apache License, Version 2.0, ([LICENSE-APACHE](LICENSE-APACHE) or https://www.apache.org/licenses/LICENSE-2.0)
 * MIT License ([LICENSE-MIT](LICENSE-MIT) or https://opensource.org/licenses/MIT)

Unless you explicitly state otherwise, any contribution intentionally submitted
for inclusion in Rocket by you shall be dual licensed under the MIT License and
Apache License, Version 2.0, without any additional terms or conditions.

The Rocket website docs are licensed under [separate terms](docs/LICENSE). Any
contribution intentionally submitted for inclusion in the Rocket website docs by
you shall be licensed under those terms.

```
File: docs/guide/10-configuration.md
```
+++
summary = "overview and customization of Rocket application configuration"
+++

# Configuration

Rocket's configuration system is flexible. Based on [Figment](@figment), it
allows you to configure your application the way _you_ want while also providing
with a sensible set of defaults.

## Overview

Rocket's configuration system is based on Figment's [`Provider`]s, types which
provide configuration data. Rocket's [`Config`] and [`Config::figment()`], as
well as Figment's [`Toml`] and [`Json`], are some examples of providers.
Providers can be combined into a single [`Figment`] provider from which any
configuration structure that implements [`Deserialize`] can be extracted.

Rocket expects to be able to extract a [`Config`] structure from the provider it
is configured with. This means that no matter which configuration provider
Rocket is asked to use, it must be able to read the following configuration
values:

| key                  | kind               | description                                     | debug/release default         |
|----------------------|--------------------|-------------------------------------------------|-------------------------------|
| `address`            | `IpAddr`           | IP address to serve on.                         | `127.0.0.1`                   |
| `port`               | `u16`              | Port to serve on.                               | `8000`                        |
| `workers`*           | `usize`            | Number of threads to use for executing futures. | cpu core count                |
| `max_blocking`*      | `usize`            | Limit on threads to start for blocking tasks.   | `512`                         |
| `ident`              | `string`, `false`  | If and how to identify via the `Server` header. | `"Rocket"`                    |
| `ip_header`          | `string`, `false`  | IP header to inspect to get [client's real IP]. | `"X-Real-IP"`                 |
| `proxy_proto_header` | `string`, `false`  | Header identifying [client to proxy protocol].  | `None`                        |
| `keep_alive`         | `u32`              | Keep-alive timeout seconds; disabled when `0`.  | `5`                           |
| `log_level`          | [`LogLevel`]       | Max level to log. (off/normal/debug/critical)   | `normal`/`critical`           |
| `cli_colors`         | [`CliColors`]      | Whether to use colors and emoji when logging.   | `"auto"`                      |
| `secret_key`         | [`SecretKey`]      | Secret key for signing and encrypting values.   | `None`                        |
| `tls`                | [`TlsConfig`]      | TLS configuration, if any.                      | `None`                        |
| `limits`             | [`Limits`]         | Streaming read size limits.                     | [`Limits::default()`]         |
| `limits.$name`       | `&str`/`uint`      | Read limit for `$name`.                         | form = "32KiB"                |
| `ctrlc`              | `bool`             | Whether `ctrl-c` initiates a server shutdown.   | `true`                        |
| `shutdown`*          | [`ShutdownConfig`] | Graceful shutdown configuration.                | [`ShutdownConfig::default()`] |


<small>* Note: the `workers`, `max_blocking`, and `shutdown.force` configuration
parameters are only read from the [default provider](#default-provider).</small>

[client's real IP]: @api/master/rocket/request/struct.Request.html#method.real_ip
[client to proxy protocol]: @api/master/rocket/request/struct.Request.html#method.proxy_proto

### Profiles

Configurations can be arbitrarily namespaced by [`Profile`]s. Rocket's
[`Config`] and [`Config::figment()`] providers automatically set the
configuration profile to "debug" when compiled in "debug" mode and "release"
when compiled in release mode, but you can arbitrarily name and set profiles to
your desire. For example, with the [default provider](#default-provider), you
can set the selected profile via `ROCKET_PROFILE`. This results in Rocket
preferring the values in the `ROCKET_PROFILE` profile.

In addition to any profiles you declare, there are two meta-profiles, `default`
and `global`, which can be used to provide values that apply to _all_ profiles.
Values provided in a `default` profile are used as fall-back values when the
selected profile doesn't contain a requested value, while values in the `global`
profile supplant any values with the same name in any profile.

[`Provider`]: @figment/trait.Provider.html
[`Profile`]: @figment/struct.Profile.html
[`Config`]: @api/master/rocket/struct.Config.html
[`Config::figment()`]: @api/master/rocket/struct.Config.html#method.figment
[`Toml`]: @figment/providers/struct.Toml.html
[`Json`]: @figment/providers/struct.Json.html
[`Figment`]: @figment/struct.Figment.html
[`Deserialize`]: @api/master/rocket/serde/trait.Deserialize.html
[`LogLevel`]: @api/master/rocket/config/enum.LogLevel.html
[`Limits`]: @api/master/rocket/data/struct.Limits.html
[`Limits::default()`]: @api/master/rocket/data/struct.Limits.html#impl-Default-for-Limits
[`SecretKey`]: @api/master/rocket/config/struct.SecretKey.html
[`CliColors`]: @api/master/rocket/config/enum.CliColors.html
[`TlsConfig`]: @api/master/rocket/tls/struct.TlsConfig.html
[`ShutdownConfig`]: @api/master/rocket/shutdown/struct.ShutdownConfig.html
[`ShutdownConfig::default()`]: @api/master/rocket/shutdown/struct.ShutdownConfig.html#fields

## Default Provider

Rocket's default configuration provider is [`Config::figment()`]; this is the
provider that's used when calling [`rocket::build()`].

The default figment reads from and merges, at a per-key level, the following
sources in ascending priority order:

  1. [`Config::default()`], which provides default values for all parameters.
  2. `Rocket.toml` _or_ TOML file path in `ROCKET_CONFIG` environment variable.
  3. `ROCKET_` prefixed environment variables.

The selected profile is the value of the `ROCKET_PROFILE` environment variable,
or if it is not set, "debug" when compiled in debug mode and "release" when
compiled in release mode. With the exception of `log_level`, which changes from
`normal` in debug to `critical` in release, all of the default configuration
values are the same in all profiles. What's more, all configuration values
_have_ defaults, so no configuration is needed to get started.

As a result of `Config::figment()`, without any effort, Rocket can be configured
via a `Rocket.toml` file and/or via environment variables, the latter of which
take precedence over the former.

[`Config::default()`]: @api/master/rocket/struct.Config.html#method.default

### Rocket.toml

Rocket searches for `Rocket.toml` or the filename in a `ROCKET_CONFIG`
environment variable starting at the current working directory. If it is not
found, the parent directory, its parent, and so on, are searched until the file
is found or the root is reached. If the path set in `ROCKET_CONFIG` is absolute,
no such search occurs and the set path is used directly.

The file is assumed to be _nested_, so each top-level key declares a profile and
its values the value for the profile. The following is an example of what such a
file might look like:

```toml
## defaults for _all_ profiles
[default]
address = "0.0.0.0"
limits = { form = "64 kB", json = "1 MiB" }

## set only when compiled in debug mode, i.e, `cargo build`
[debug]
port = 8000
## only the `json` key from `default` will be overridden; `form` will remain
limits = { json = "10MiB" }

## set only when the `nyc` profile is selected
[nyc]
port = 9001

## set only when compiled in release mode, i.e, `cargo build --release`
[release]
port = 9999
ip_header = false
proxy_proto_header = "X-Forwarded-Proto"
# NOTE: Don't (!) use this key! Generate your own and keep it private!
#       e.g. via `head -c64 /dev/urandom | base64`
secret_key = "hPrYyÐ­RiMyÂµ5sBB1Ï€+CMÃ¦1kÃ¸FsÃ¥qKvBiQJxBVHQk="
```

The following is a `Rocket.toml` file with all configuration options set for
demonstration purposes. You **do not** and _should not_ set a value for
configuration options needlessly, preferring to use the default value when
sensible.

```toml
[default]
address = "127.0.0.1"
port = 8000
workers = 16
max_blocking = 512
keep_alive = 5
ident = "Rocket"
ip_header = "X-Real-IP" # set to `false` to disable
proxy_proto_header = false # set to `false` (the default) to disable
log_level = "normal"
temp_dir = "/tmp"
cli_colors = true
# NOTE: Don't (!) use this key! Generate your own and keep it private!
#       e.g. via `head -c64 /dev/urandom | base64`
secret_key = "hPrYyÐ­RiMyÂµ5sBB1Ï€+CMÃ¦1kÃ¸FsÃ¥qKvBiQJxBVHQk="

[default.limits]
form = "64 kB"
json = "1 MiB"
msgpack = "2 MiB"
"file/jpg" = "5 MiB"

[default.tls]
certs = "path/to/cert-chain.pem"
key = "path/to/key.pem"

[default.shutdown]
ctrlc = true
signals = ["term", "hup"]
grace = 5
mercy = 5
```

### Environment Variables

Rocket reads all environment variable names prefixed with `ROCKET_` using the
string after the `_` as the name of a configuration value as the value of the
parameter as the value itself. Environment variables take precedence over values
in `Rocket.toml`. Values are parsed as loose form of TOML syntax. Consider the
following examples:

```sh
ROCKET_FLOAT=3.14
ROCKET_ARRAY=[1,"b",3.14]
ROCKET_STRING=Hello
ROCKET_STRING="Hello There"

ROCKET_KEEP_ALIVE=1
ROCKET_IDENT=Rocket
ROCKET_IDENT="Hello Rocket"
ROCKET_IDENT=false
ROCKET_TLS={certs="abc",key="foo/bar"}
ROCKET_LIMITS={form="64 KiB"}
```

## Configuration Parameters

### Secret Key

The `secret_key` parameter configures a cryptographic key to use when encrypting
application values. In particular, the key is used to encrypt [private cookies],
which are available only when the `secrets` crate feature is enabled.

Generating a string suitable for use as a `secret_key` configuration value is
usually done through tools like `openssl`. Using `openssl`, a 256-bit base64 key
can be generated with the command `openssl rand -base64 32`.

When compiled in debug mode, a fresh key is generated automatically. In release
mode, Rocket requires you to set a secret key if the `secrets` feature is
enabled. Failure to do so results in a hard error at launch time. The value of
the parameter may either be a 256-bit base64 or hex string or a slice of 32
bytes.

[private cookies]: ../requests/#private-cookies

### Limits

The `limits` parameter configures the maximum amount of data Rocket will accept
for a given data type. The value is expected to be a dictionary table where each
key corresponds to a data type and each value corresponds to the maximum size in
bytes Rocket should accept for that type. Rocket can parse both integers
(`32768`) or SI unit based strings (`"32KiB"`) as limits.

By default, Rocket specifies a `32 KiB` limit for incoming forms. Since Rocket
requires specifying a read limit whenever data is read, external data guards may
also choose to have a configure limit via the `limits` parameter. The
[`Json`](@api/master/rocket/serde/json/struct.Json.html) type, for instance, uses the
`limits.json` parameter.

### TLS

Rocket includes built-in, native support for TLS >= 1.2 (Transport Layer
Security). To enable TLS support:

  1. Enable the `tls` crate feature in `Cargo.toml`:

   ```toml,ignore
   [dependencies]
   rocket = { version = "0.6.0-dev", features = ["tls"] }
   ```

  2. Configure a TLS certificate chain and private key via the `tls.key` and
     `tls.certs` configuration parameters. With the default provider, this can
     be done via `Rocket.toml` as:

   ```toml,ignore
   [default.tls]
   key = "path/to/key.pem"     # Path or bytes to DER-encoded ASN.1 PKCS#1/#8 or SEC1 key.
   certs = "path/to/certs.pem" # Path or bytes to DER-encoded X.509 TLS cert chain.
   ```

The `tls` parameter is expected to be a dictionary that deserializes into a
[`TlsConfig`] structure:

| key                          | required  | type                                                          |
|------------------------------|-----------|---------------------------------------------------------------|
| `key`                        | **_yes_** | Path or bytes to DER-encoded ASN.1 PKCS#1/#8 or SEC1 key.     |
| `certs`                      | **_yes_** | Path or bytes to DER-encoded X.509 TLS cert chain.            |
| `ciphers`                    | no        | Array of [`CipherSuite`]s to enable.                          |
| `prefer_server_cipher_order` | no        | Boolean for whether to [prefer server cipher suites].         |
| `mutual`                     | no        | A map with [mutual TLS] configuration.                        |

[`CipherSuite`]: @api/master/rocket/tls/enum.CipherSuite.html
[prefer server cipher suites]: @api/master/rocket/tls/struct.TlsConfig.html#method.with_preferred_server_cipher_order
[mutual TLS]: #mutual-tls

When specified via TOML or other serialized formats, each [`CipherSuite`] is
written as a string representation of the respective variant. For example,
`CipherSuite::TLS_AES_256_GCM_SHA384` is `"TLS_AES_256_GCM_SHA384"`. In TOML,
the defaults (with an arbitrary `certs` and `key`) are written:

```toml
[default.tls]
certs = "/ssl/cert.pem"
key = "/ssl/key.pem"
prefer_server_cipher_order = false
ciphers = [
    "TLS_CHACHA20_POLY1305_SHA256",
    "TLS_AES_256_GCM_SHA384",
    "TLS_AES_128_GCM_SHA256",
    "TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305_SHA256",
    "TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305_SHA256",
    "TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384",
    "TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256",
    "TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384",
    "TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256",
]
```

### Mutual TLS

Rocket supports mutual TLS client authentication. Configuration works in concert
with the [`mtls`] module, which provides a request guard to validate, verify,
and retrieve client certificates in routes.

By default, mutual TLS is disabled and client certificates are not required,
validated or verified. To enable mutual TLS, the `mtls` feature must be
enabled and support configured via the `tls.mutual` config parameter:

  1. Enable the `mtls` crate feature in `Cargo.toml`:

   ```toml,ignore
   [dependencies]
   rocket = { version = "0.6.0-dev", features = ["mtls"] }
   ```

   This implicitly enables the `tls` feature.

  2. Configure a CA certificate chain via the `tls.mutual.ca_certs`
     configuration parameter. With the default provider, this can be done via
     `Rocket.toml` as:

   ```toml,ignore
   [default.tls.mutual]
   ca_certs = "path/to/ca_certs.pem" # Path or bytes to DER-encoded X.509 TLS cert chain.
   mandatory = true                  # when absent, defaults to false
   ```

The `tls.mutual` parameter is expected to be a dictionary that deserializes into a
[`MutualTls`] structure:

| key         | required  | type                                                        |
|-------------|-----------|-------------------------------------------------------------|
| `ca_certs`  | **_yes_** | Path or bytes to DER-encoded X.509 TLS cert chain.          |
| `mandatory` | no        | Boolean controlling whether the client _must_ authenticate. |

[`MtlsConfig`]: @api/master/rocket/mtls/struct.MtlsConfig.html
[`mtls`]: @api/master/rocket/mtls/index.html

Rocket reports if TLS and/or mTLS are enabled at launch time:

```text
ðŸ”§ Configured for debug.
   ...
   >> tls: enabled w/mtls
```

Once mutual TLS is properly enabled, the [`mtls::Certificate`] request guard can
be used to retrieve validated, verified client certificates:

```rust
# #[macro_use] extern crate rocket;
use rocket::mtls::Certificate;

#[get("/auth")]
fn auth(cert: Certificate<'_>) {
    // This handler only runs when a valid certificate was presented.
}
```

The [TLS example](@git/master/examples/tls) illustrates a fully configured TLS server with
mutual TLS.

! warning: Rocket's built-in TLS supports only TLS 1.2 and 1.3.

  This may not be suitable for production use requiring legacy support.

[`mtls::Certificate`]: @api/master/rocket/mtls/struct.Certificate.html

### Proxied TLS

The `proxy_proto_header` configuration parameter allows Rocket applications to
determine when and if a client's initial connection was likely made in a secure
context by examining the header with the configured name. The header's value is
parsed into a [`ProxyProto`], retrievable via [`Request::proxy_proto()`].

That value is in-turn inspected to determine if the initial connection was
secure (i.e, made over TLS) and the outcome made available via
[`Request::context_is_likely_secure()`]. The value returned by this method
influences cookie defaults. In particular, if the method returns `true` (i.e,
the request context is likely secure), the `Secure` cookie flag is set by
default when a cookie is added to a [`CookieJar`].

To enable this behaviour, configure the header as set by your reverse proxy or
forwarding entity. For example, to set the header name to `X-Forwarded-Proto`
via a TOML file:

```toml,ignore
proxy_proto_header = "X-Forwarded-Proto"
```

[`Request::proxy_proto()`]: @api/master/rocket/request/struct.Request.html#method.proxy_proto
[`ProxyProto`]: @api/master/rocket/http/enum.ProxyProto.html
[`CookieJar`]: @api/master/rocket/http/struct.CookieJar.html
[`Request::context_is_likely_secure()`]: @api/master/rocket/request/struct.Request.html#method.context_is_likely_secure

### Crypto Providers

Rocket's TLS support, provided by [`rustls`], allows replacing the underlying
[`CryptoProvider`] for cryptographic operations. By default, Rocket uses
[`ring`] as its `CryptoProvider`, but applications can change the default by
[installing] a different `CryptoProvider` before Rocket launches.

For example, to use `aws-lc-rs` instead of `ring`, first depend on `rustls`
directly with the `aws_lc_rs` feature enabled:

```toml
[dependencies]
rustls = { version = "0.23", features = ["aws_lc_rs"] }
```

Then, before the application starts, install the provider as the default:

```rust,ignore
# #[macro_use] extern crate rocket;

#[launch]
fn rocket() -> _ {
    let _ = rustls::crypto::aws_lc_rs::default_provider().install_default();
    rocket::build()
}
```

Rocket will use the installed default whenever TLS is operational.

[`rustls`]: @rustls
[`CryptoProvider`]: @rustls/crypto/struct.CryptoProvider.html
[`ring`]: @rustls/crypto/ring/index.html
[installing]: @rustls/crypto/struct.CryptoProvider.html#method.in
... (truncated due to size)

================================ Human Message =================================


The commands you have run:```
rustc --version, curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y, apt-get update && apt-get install -y curl, curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y, source "$HOME/.cargo/env", rustc --version && cargo --version```
Following are the last 5 messages:

================================ Human Message =================================

Observation:
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
info: downloading installer
info: profile set to 'default'
info: default host triple is x86_64-unknown-linux-gnu
info: syncing channel updates for 'stable-x86_64-unknown-linux-gnu'
info: latest update on 2025-06-26, rust version 1.88.0 (6b00bc388 2025-06-23)
info: downloading component 'cargo'
  3.4 MiB /   9.5 MiB ( 35 %)   0 B/s in  1s ETA: Unknown                                                           9.5 MiB /   9.5 MiB (100 %)   3.4 MiB/s in  2s
info: downloading component 'clippy'
info: downloading component 'rust-docs'
  3.4 MiB /  20.1 MiB ( 17 %)   0 B/s in  1s ETA: Unknown                                                          11.5 MiB /  20.1 MiB ( 57 %)   3.4 MiB/s in  2s ETA:  2s                                                          19.5 MiB /  20.1 MiB ( 97 %)   5.7 MiB/s in  3s                                                 20.1 MiB /  20.1 MiB (100 %)   6.5 MiB/s in  3s
info: downloading component 'rust-std'
  2.7 MiB /  29.5 MiB (  9 %)   0 B/s in  1s ETA: Unknown                                                           8.8 MiB /  29.5 MiB ( 30 %)   2.7 MiB/s in  2s ETA:  7s                                                          16.6 MiB /  29.5 MiB ( 56 %)   4.4 MiB/s in  3s ETA:  2s                                                          23.7 MiB /  29.5 MiB ( 80 %)   5.5 MiB/s in  4s ETA:  1s                                                          29.5 MiB /  29.5 MiB (100 %)   5.9 MiB/s in  5s
info: downloading component 'rustc'
  2.8 MiB /  76.3 MiB (  4 %)   0 B/s in  1s ETA: Unknown                                                          10.7 MiB /  76.3 MiB ( 14 %)   2.8 MiB/s in  2s ETA: 23s                                                          18.8 MiB /  76.3 MiB ( 25 %)   5.4 MiB/s in  3s ETA: 10s                                                          26.9 MiB /  76.3 MiB ( 35 %)   6.3 MiB/s in  4s ETA:  7s                                                          35.0 MiB /  76.3 MiB ( 46 %)   6.7 MiB/s in  5s ETA:  6s                                                          42.4 MiB /  76.3 MiB ( 56 %)   7.0 MiB/s in  6s ETA:  4s                                                          50.5 MiB /  76.3 MiB ( 66 %)   7.9 MiB/s in  7s ETA:  3s                                                          58.5 MiB /  76.3 MiB ( 77 %)   7.9 MiB/s in  9s ETA:  2s                                                          66.6 MiB /  76.3 MiB ( 87 %)   7.9 MiB/s in 10s ETA:  1s                                                          74.7 MiB /  76.3 MiB ( 98 %)   7.9 MiB/s in 11s                                                 76.3 MiB /  76.3 MiB (100 %)   7.9 MiB/s in 11s
info: downloading component 'rustfmt'
info: installing component 'cargo'
info: installing component 'clippy'
info: installing component 'rust-docs'
 15.4 MiB /  20.1 MiB ( 77 %)   0 B/s in  1s ETA: Unknown                                                          20.1 MiB /  20.1 MiB (100 %)  15.4 MiB/s in  1s
info: installing component 'rust-std'
 20.6 MiB /  29.5 MiB ( 70 %)   0 B/s in  1s ETA: Unknown                                                          29.5 MiB /  29.5 MiB (100 %)  20.6 MiB/s in  1s
info: installing component 'rustc'
 22.2 MiB /  76.3 MiB ( 29 %)   0 B/s in  1s ETA: Unknown                                                          43.8 MiB /  76.3 MiB ( 57 %)  22.2 MiB/s in  2s ETA:  1s                                                          64.6 MiB /  76.3 MiB ( 85 %)  21.9 MiB/s in  3s                                                 76.3 MiB /  76.3 MiB (100 %)  21.5 MiB/s in  3s
info: installing component 'rustfmt'
info: default toolchain set to 'stable-x86_64-unknown-linux-gnu'

  stable-x86_64-unknown-linux-gnu installed - rustc 1.88.0 (6b00bc388 2025-06-23)


Rust is installed now. Great!

To get started you may need to restart your current shell.
This would reload your PATH environment variable to include
Cargo's bin directory ($HOME/.cargo/bin).

To configure your current shell, you need to source
the corresponding env file under $HOME/.cargo.

This is usually done by running one of the following (note the leading DOT):
. "$HOME/.cargo/env"            # For sh/bash/zsh/ash/dash/pdksh
source "$HOME/.cargo/env.fish"  # For fish
source $"($nu.home-path)/.cargo/env.nu"  # For nushell


root@b8984f16c12d:/testbed $

exit code: 0

================================== Ai Message ==================================

Thought: Rust is now installed, but I need to add cargo to the PATH before I can use it. Let's source the cargo environment file.

Action: <command>source "$HOME/.cargo/env"</command>
================================ Human Message =================================

Observation:
source "$HOME/.cargo/env"


root@b8984f16c12d:/testbed $

exit code: 0

================================== Ai Message ==================================

Thought: Now that Rust and Cargo are properly set up, I should verify the installation and check the Rust version before proceeding with the project setup.

Action: <command>rustc --version && cargo --version</command>
================================ Human Message =================================

Observation:
rustc --version && cargo --version
rustc 1.88.0 (6b00bc388 2025-06-23)
cargo 1.88.0 (873a06493 2025-05-10)


root@b8984f16c12d:/testbed $

exit code: 0

##### LLM OUTPUT #####
================================== Ai Message ==================================

Thought: The Rust toolchain is properly installed. Looking at the CI workflow file, I see we need to install some system dependencies (libmysqlclient-dev, libpq-dev, libsqlite3-dev) before building the project.

Action: <command>apt-get update && apt-get install -y libmysqlclient-dev libpq-dev libsqlite3-dev</command>